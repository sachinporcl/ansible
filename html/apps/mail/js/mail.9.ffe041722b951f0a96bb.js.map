{"version":3,"sources":["webpack:///./src/components/AppDetailsToggle.vue?e041","webpack:///./src/components/SectionTitle.vue?ddb0","webpack:///./node_modules/moment/locale sync ^\\.\\/.*$","webpack:///./src/components/MenuEnvelope.vue?2db6","webpack:///./src/components/Envelope.vue?cd2c","webpack:///./img/reply.svg","webpack:///./src/components/EnvelopeList.vue?d0e8","webpack:///./src/components/Loading.vue?8ca9","webpack:///./src/components/EmptyMailboxSection.vue?7d59","webpack:///./src/components/Mailbox.vue?2954","webpack:///./src/components/ComposerAttachments.vue?e6e8","webpack:///./src/components/MailvelopeEditor.vue?2c0c","webpack:///./src/components/Composer.vue?fd1a","webpack:///./src/components/NoMessageSelected.vue?40be","webpack:///./src/components/RecipientBubble.vue?1622","webpack:///./src/components/itinerary/EventReservation.vue?de14","webpack:///./src/components/itinerary/FlightReservation.vue?e045","webpack:///./src/components/itinerary/TrainReservation.vue?a8f5","webpack:///./src/components/MessageAttachment.vue?8b9c","webpack:///./src/components/MessageAttachments.vue?dd20","webpack:///./src/components/MdnRequest.vue?cb30","webpack:///./src/components/MessageEncryptedBody.vue?6f6d","webpack:///./src/components/MessageHTMLBody.vue?1526","webpack:///./src/components/MessagePlainTextBody.vue?13b4","webpack:///./src/components/MessagePlainTextBody.vue?cb2e","webpack:///./src/components/Message.vue?d01f","webpack:///./src/components/ThreadEnvelope.vue?a079","webpack:///./src/components/Thread.vue?8bde","webpack:///./src/components/MailboxThread.vue?edcb","webpack:///./src/views/Home.vue?1f31","webpack:///./src/views/Home.vue?79f4","webpack:///./src/components/AppDetailsToggle.vue?9998","webpack:///src/components/AppDetailsToggle.vue","webpack:///./src/components/AppDetailsToggle.vue?e108","webpack:///./src/components/AppDetailsToggle.vue","webpack:///./src/components/AppDetailsToggle.vue?47ad","webpack:///./src/components/SectionTitle.vue?9080","webpack:///src/components/SectionTitle.vue","webpack:///./src/components/SectionTitle.vue?b005","webpack:///./src/components/SectionTitle.vue","webpack:///./src/components/SectionTitle.vue?b57d","webpack:///./src/components/EmptyMailbox.vue?abca","webpack:///src/components/EmptyMailbox.vue","webpack:///./src/components/EmptyMailbox.vue","webpack:///./src/components/EmptyMailbox.vue?4ad4","webpack:///./src/ReplyBuilder.js","webpack:///src/components/MoveModal.vue","webpack:///./src/components/MoveModal.vue?4efc","webpack:///./src/components/MoveModal.vue","webpack:///./src/components/MoveModal.vue?5d56","webpack:///src/components/MenuEnvelope.vue","webpack:///./src/components/MenuEnvelope.vue?77d6","webpack:///./src/components/MenuEnvelope.vue?21bf","webpack:///./src/components/MenuEnvelope.vue","webpack:///./src/components/MenuEnvelope.vue?052b","webpack:///./src/components/Moment.vue?eaed","webpack:///src/components/Moment.vue","webpack:///./src/components/Moment.vue","webpack:///./src/components/Moment.vue?c1e1","webpack:///./src/directives/drag-and-drop/draggable-envelope/draggable-envelope.js","webpack:///./src/directives/drag-and-drop/draggable-envelope/index.js","webpack:///./src/components/Envelope.vue?f968","webpack:///src/components/Envelope.vue","webpack:///./src/components/Envelope.vue?e493","webpack:///./src/components/Envelope.vue","webpack:///./src/components/Envelope.vue?6928","webpack:///src/components/EnvelopeList.vue","webpack:///./src/components/EnvelopeList.vue?f5c3","webpack:///./src/components/EnvelopeList.vue?2635","webpack:///./src/components/EnvelopeList.vue","webpack:///./src/components/EnvelopeList.vue?d794","webpack:///./src/util/CrashReport.js","webpack:///./src/components/Error.vue?1fd4","webpack:///src/components/Error.vue","webpack:///./src/components/Error.vue","webpack:///./src/components/Error.vue?eea6","webpack:///./src/components/Loading.vue?8bea","webpack:///src/components/Loading.vue","webpack:///./src/components/Loading.vue?5975","webpack:///./src/components/Loading.vue","webpack:///./src/components/Loading.vue?64ca","webpack:///./src/components/EmptyMailboxSection.vue?805c","webpack:///src/components/EmptyMailboxSection.vue","webpack:///./src/components/EmptyMailboxSection.vue?a41b","webpack:///src/components/Mailbox.vue","webpack:///./src/components/Mailbox.vue?99b2","webpack:///./src/components/EmptyMailboxSection.vue","webpack:///./src/components/EmptyMailboxSection.vue?1a0c","webpack:///./src/components/Mailbox.vue?8ec7","webpack:///./src/components/Mailbox.vue","webpack:///./src/components/Mailbox.vue?1d16","webpack:///./src/service/FileService.js","webpack:///./src/service/FileSharingService.js","webpack:///./src/service/AttachmentService.js","webpack:///src/components/ComposerAttachments.vue","webpack:///./src/components/ComposerAttachments.vue?8b74","webpack:///./src/components/ComposerAttachments.vue?50f3","webpack:///./src/components/ComposerAttachments.vue","webpack:///./src/components/ComposerAttachments.vue?4dbb","webpack:///./src/crypto/pgp.js","webpack:///src/components/MailvelopeEditor.vue","webpack:///./src/crypto/mailvelope.js","webpack:///./src/components/MailvelopeEditor.vue?5039","webpack:///./src/components/MailvelopeEditor.vue?30fc","webpack:///./src/components/MailvelopeEditor.vue","webpack:///./src/components/MailvelopeEditor.vue?f2b7","webpack:///src/components/Composer.vue","webpack:///./src/service/AutocompleteService.js","webpack:///./src/components/Composer.vue?b085","webpack:///./src/components/Composer.vue?66a0","webpack:///./src/components/Composer.vue","webpack:///./src/components/Composer.vue?323e","webpack:///./src/util/ErrorMessageFactory.js","webpack:///src/components/NewMessageDetail.vue","webpack:///./src/components/NewMessageDetail.vue?15b4","webpack:///./src/components/NewMessageDetail.vue","webpack:///./src/components/NewMessageDetail.vue?d2ab","webpack:///./src/components/NoMessageSelected.vue?7c7e","webpack:///src/components/NoMessageSelected.vue","webpack:///./src/components/NoMessageSelected.vue?c50a","webpack:///./src/components/NoMessageSelected.vue","webpack:///./src/components/NoMessageSelected.vue?6fae","webpack:///src/components/RecipientBubble.vue","webpack:///./src/components/RecipientBubble.vue?07c8","webpack:///./src/components/RecipientBubble.vue?a2e8","webpack:///./src/components/RecipientBubble.vue","webpack:///./src/components/RecipientBubble.vue?bb14","webpack:///./src/service/DAVService.js","webpack:///./src/components/itinerary/CalendarImport.vue?ef70","webpack:///src/components/itinerary/CalendarImport.vue","webpack:///./src/components/itinerary/CalendarImport.vue","webpack:///./src/components/itinerary/CalendarImport.vue?515a","webpack:///./src/components/itinerary/EventReservation.vue?f93a","webpack:///src/components/itinerary/EventReservation.vue","webpack:///./src/components/itinerary/EventReservation.vue?5c08","webpack:///./src/components/itinerary/EventReservation.vue","webpack:///./src/components/itinerary/EventReservation.vue?0586","webpack:///./src/components/itinerary/FlightReservation.vue?a2ae","webpack:///src/components/itinerary/FlightReservation.vue","webpack:///./src/components/itinerary/FlightReservation.vue?e5a5","webpack:///./src/components/itinerary/FlightReservation.vue","webpack:///./src/components/itinerary/FlightReservation.vue?5894","webpack:///./src/components/itinerary/TrainReservation.vue?a40c","webpack:///src/components/itinerary/TrainReservation.vue","webpack:///./src/components/itinerary/TrainReservation.vue?000b","webpack:///./src/components/itinerary/TrainReservation.vue","webpack:///./src/components/itinerary/TrainReservation.vue?9424","webpack:///src/components/Itinerary.vue","webpack:///./src/components/Itinerary.vue?6d2b","webpack:///./src/components/Itinerary.vue","webpack:///./src/components/Itinerary.vue?c67f","webpack:///./src/components/MessageAttachment.vue?426a","webpack:///src/components/MessageAttachment.vue","webpack:///./src/components/MessageAttachment.vue?861d","webpack:///./src/components/MessageAttachments.vue?43cf","webpack:///src/components/MessageAttachments.vue","webpack:///./src/components/MessageAttachment.vue","webpack:///./src/components/MessageAttachment.vue?4040","webpack:///./src/components/MessageAttachments.vue?eab8","webpack:///./src/components/MessageAttachments.vue","webpack:///./src/components/MessageAttachments.vue?40d9","webpack:///src/components/MdnRequest.vue","webpack:///./src/components/MdnRequest.vue?df6a","webpack:///./src/components/MdnRequest.vue?badb","webpack:///./src/components/MdnRequest.vue","webpack:///./src/components/MdnRequest.vue?511c","webpack:///src/components/MessageEncryptedBody.vue","webpack:///./src/components/MessageEncryptedBody.vue?d56e","webpack:///./src/components/MessageEncryptedBody.vue?8cff","webpack:///./src/components/MessageEncryptedBody.vue","webpack:///./src/components/MessageEncryptedBody.vue?0d96","webpack:///src/components/MessageHTMLBody.vue","webpack:///./src/components/MessageHTMLBody.vue?aa4c","webpack:///./src/components/MessageHTMLBody.vue?0f39","webpack:///./src/components/MessageHTMLBody.vue","webpack:///./src/components/MessageHTMLBody.vue?0bf8","webpack:///src/components/MessagePlainTextBody.vue","webpack:///./src/components/MessagePlainTextBody.vue?6434","webpack:///./src/components/MessagePlainTextBody.vue?dedf","webpack:///./src/components/MessagePlainTextBody.vue?72a4","webpack:///./src/components/MessagePlainTextBody.vue","webpack:///./src/components/MessagePlainTextBody.vue?e5b1","webpack:///./src/components/Message.vue?7d74","webpack:///src/components/Message.vue","webpack:///./src/components/Message.vue?ee31","webpack:///src/components/ThreadEnvelope.vue","webpack:///./src/components/ThreadEnvelope.vue?d8a2","webpack:///./src/components/Message.vue","webpack:///./src/components/Message.vue?54c5","webpack:///./src/components/ThreadEnvelope.vue?2d55","webpack:///./src/components/ThreadEnvelope.vue","webpack:///./src/components/ThreadEnvelope.vue?b78f","webpack:///src/components/Thread.vue","webpack:///./src/components/Thread.vue?588c","webpack:///./src/components/Thread.vue?77d9","webpack:///./src/components/Thread.vue","webpack:///./src/components/Thread.vue?d76d","webpack:///./src/components/MailboxThread.vue?b046","webpack:///src/components/MailboxThread.vue","webpack:///./src/components/MailboxThread.vue?5d4c","webpack:///./src/components/MailboxThread.vue","webpack:///./src/components/MailboxThread.vue?a94a","webpack:///./src/views/Home.vue?8c94","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?3841","webpack:///./src/views/Home.vue","webpack:///./src/service/AvatarService.js","webpack:///./src/components/Avatar.vue?959d","webpack:///./src/components/Avatar.vue?0735","webpack:///src/components/Avatar.vue","webpack:///./src/components/Avatar.vue","webpack:///./img/important.svg"],"names":["___CSS_LOADER_EXPORT___","push","module","i","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","exports","___CSS_LOADER_URL_REPLACEMENT_0___","options","locals","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","$event","$emit","_e","_v","_s","name","t","buildReplyBody","original","from","date","replyOnTop","startEnd","plainBody","value","replace","htmlBody","format","dateString","moment","unix","html","label","email","RecipientType","seal","None","To","Cc","buildRecipients","envelope","ownAddress","recipientType","isOwnAddress","a","isNotOwnAddress","negate","replyingAddress","to","find","undefined","cc","filter","concat","length","replyPrepends","buildReplySubject","some","prepend","toLowerCase","startsWith","forwardPrepends","account","destMailboxId","moving","onMove","onClose","nativeOn","preventDefault","hasMultipleRecipients","replyAllLink","replyOneLink","forwardLink","params","mailboxId","$route","threadId","query","messageId","databaseId","onToggleImportant","flags","important","iconFavorite","onToggleFlagged","flagged","onToggleSeen","seen","onToggleJunk","junk","toggleSelected","isSelected","onOpenMoveModal","sourceLoading","onShowSourceModal","threadingFileName","threadingFile","onDelete","onCloseSourceModal","rawMessage","onCloseMoveModal","timestamp","title","formatted","DraggableEnvelope","el","componentInstance","registerListeners","bind","setInitialAttributes","setAttribute","classList","add","instance","addEventListener","onDragStart","onDragEnd","removeEventListener","event","accountId","selectedEnvelopes","dataTransfer","clearData","effectAllowed","envelopes","forEach","index","envelopeId","draggableLabel","subject","setData","JSON","stringify","attachGhost","dragEventBus","itemCount","baseClass","dragNode","document","createElement","counterNode","textCountNode","createTextNode","appendChild","labelWrapperNode","labelNode","textLabelNode","body","setDragImage","defer","removeChild","instances","DraggableEnvelopeDirective","binding","vnode","context","componentUpdated","setTimeout","update","unbind","directives","rawName","data","mailbox","expression","class","draft","selected","link","style","accountColor","domProps","importantSvg","addresses","avatarEmail","ctrlKey","shiftKey","altKey","metaKey","onSelectMultiple","hasAttachments","dateInt","unselect","key","markSelectedSeenOrUnseen","areAllSelectedRead","n","selection","number","favoriteOrUnfavoriteAll","areAllSelectedFavorite","unselectAll","isUnified","forwardSelectedAsAttachment","deleteAllSelected","refreshing","_l","env","includes","selectMode","onEnvelopeSelectToggle","apply","onEnvelopeSelectMultiple","loadMoreButton","loadingMore","searchQuery","flattenTrace","trace","reduce","acc","entry","text","function","file","line","getReportUrl","error","console","message","endsWith","template","IssueTemplateBuilder","addEmptyStepsToReproduce","addExpectedActualBehaviour","addLogs","type","stack","flattenError","render","encodeURIComponent","debug","reportUrl","hint","slowHint","slow","_t","isPriorityInbox","hasMessages","envelopesToShow","showLoadMore","loadMore","getWebDavClient","memoize","axios","defaults","headers","webdav","patch","generateRemoteUrl","getCurrentUser","uid","getFileSize","path","stat","details","response","props","size","shareFile","token","post","generateOcsUrl","shareType","shareWith","res","ocs","url","meta","showError","saveAttachmentToFiles","attachmentId","directory","generateUrl","Axios","targetPath","progress","FormData","opts","onUploadProgress","prog","loaded","total","append","then","resp","attachment","displayName","uploading","percent","uploadProgress","ref","staticStyle","onLocalAttachmentSelected","isPgpgMessage","mailvelope","getMailvelope","window","logger","Promise","term","get","state","STATES","EDITING","aliases","formatAliases","onInputChanged","model","callback","$$v","selectedAlias","selectableRecipients","onNewToAddr","onAutocomplete","selectTo","showCC","onNewCcAddr","selectCc","slot","onNewBccAddr","selectBcc","target","composing","subjectVal","keysMissing","recipients","join","encrypt","editorPlainText","isReply","bus","bodyVal","allRecipients","isForward","attachmentSizeLimit","onAttachmentsUploading","attachments","canSaveDraft","savingDraft","onAddLocalAttachment","onAddCloudAttachment","onAddCloudAttachmentLink","addShareLink","editorMode","requestMdn","canSend","submitButtonTitle","onSend","UPLOADING","SENDING","ERROR","errorText","reset","smileys","getRandomSmiley","Math","floor","random","getRandomMessageErrorMessage","texts","errorMessage","composerData","bcc","saveDraft","sendMessage","replyTo","forwardFrom","avatarUrlAbsolute","onClick","client","Client","baseUrl","xmlNamespaces","getUserCalendars","propFind","requesttoken","getRequestToken","calendars","cal","propStat","parseInt","split","getResponseCodeFromHTTPResponse","status","properties","canWrite","acl","k","href","getElementsByTagNameNS","textContent","getACLFromResponse","displayname","color","order","components","vevent","writable","attributes","getNamedItem","hasOwnProperty","call","getCalendarData","getRandomString","str","toString","substring","importCalendarEvent","Logger","promises","timezones","allObjects","jCal","ical","parse","Component","getAllSubcomponents","vtimezone","componentNames","componentName","vobjects","vobject","getFirstPropertyValue","objectsId","objects","component","root","updatePropertyWithValue","OC","theme","objectId","addSubcomponent","splitCalendar","componentId","info","put","all","calendar","idx","loading","onImport","eventName","location","time","handleImport","reservationFor","departureAirport","iataCode","departureDate","departureTime","flightNumber","reservation","arrivalAirport","arrivalDate","arrivalTime","departureStation","trainNumber","arrivalStation","download","mimeUrl","humanReadable","loadingCalendars","stopPropagation","loadCalendars","savingToCloud","saveToCloud","open","showCalendarPopover","calendarMenuEntries","fileName","downloadUrl","isImage","isCalendarEvent","mime","saveAll","downloadZip","hasMdnRequest","mdnSent","sendMdn","onShowBlockedContent","sender","onShowBlockedContentForDomain","domain","getDomain","hidden","scroll","fullHeight","onMessageFrameLoad","nl2br","enhancedBody","signatureSummaryAndBody","summary","hasHtmlBody","itineraries","htmlUrl","signature","route","primary","expanded","threadSubject","threadParticipants","slice","participantsToDisplay","participant","moreParticipantsString","expandedThreads","thread","toggleExpand","modifiers","showThread","onShortcut","importantInfo","unifiedAccount","unifiedInbox","appendToSearch","deleteMessage","hasEnvelopes","isMobile","onNewMessage","isThreadShown","hideMessage","activeAccount","activeMailbox","fetchAvatarUrlMemoized","avatar","isExternal","catch","err","reject","hasAvatar","disableTooltip","avatarUrl"],"mappings":"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,0CAA2C,CAClE2B,SAGD,OAAO1B,IAAM2B,IAAIlC,GAAKiB,MAAK,SAACC,GAAD,OAAUA,EAAK1H,UD4O3C,KAIA,oBAEA,oBACA,UACA,YACA,UACA,QACA,aEpRwL,GFuRxL,CACA,gBACA,YACA,oBACA,YACA,iBACA,oBACA,eACA,uBACA,WACA,iBACA,iBAEA,OACA,aACA,YACA,sBAEA,IACA,WACA,8BAEA,IACA,WACA,8BAEA,KACA,WACA,8BAEA,SACA,YACA,YAEA,MACA,YACA,4CAEA,OACA,cACA,aAEA,MACA,cACA,aAEA,SACA,YACA,YACA,sBAEA,aACA,YACA,YACA,uBAGA,KAzDA,WAyDA,UACA,OACA,wBACA,eAxEA,EAyEA,gEACA,iBACA,wBACA,qCACA,eACA,4GACA,gCACA,qCACA,gBACA,mBACA,4CACA,iBACA,iBACA,UACA,iBACA,iBACA,mBACA,kBACA,WACA,YACA,aACA,eACA,gBAEA,kBACA,+MACA,gBAGA,UACA,QADA,WAEA,QAEA,EADA,uEACA,4BACA,CACA,QACA,aACA,aACA,wBACA,sBACA,YACA,6BAEA,2BACA,OACA,QACA,aACA,aACA,wBACA,sBACA,YACA,6BAIA,iBAEA,cA5BA,WA6BA,mEAEA,oBA/BA,WAgCA,mEAEA,qBAlCA,WAmCA,0BACA,oCACA,qEAEA,UAvCA,WAwCA,kCAEA,QA1CA,WA2CA,8BAEA,QA7CA,WA8CA,6DAIA,0EAEA,gBApDA,WAqDA,qCAEA,kBAvDA,WAwDA,iCAIA,6GAHA,sCAMA,OACA,yBADA,WAEA,cAEA,cAJA,WAKA,6BAGA,YAjKA,WAiKA,kJACA,aACA,aAFA,KAIA,EAJA,SAIA,KAJA,wCAIA,mBAJA,8DAMA,QAvKA,WAuKA,aACA,cACA,+BAIA,wCACA,gBACA,iBACA,wCAEA,iBAEA,qBAKA,oEAGA,wGACA,oBACA,oBACA,iCACA,QACA,mCACA,+BAMA,SACA,gFACA,wCACA,iFACA,uCAEA,mBACA,sCACA,EAQA,oBACA,6BACA,KACA,iBATA,2EACA,YAYA,cA/NA,WAgOA,8BAEA,kEAEA,SACA,SADA,WACA,WACA,qBACA,iBACA,iFAEA,oCAtPA,IAwPA,IACA,gDAGA,oBAZA,WAYA,sJACA,kCADA,wDAKA,qDALA,SAMA,2CANA,OAMA,EANA,OAOA,kEACA,kEARA,8CAUA,SAtBA,WAuBA,aACA,oCACA,mBACA,EACA,mEACA,qBACA,qBACA,+DACA,OACA,MACA,iBACA,oCACA,mBACA,EACA,mEACA,yBACA,yBACA,+DACA,OACA,MAEA,4EAGA,kBA/CA,SA+CA,GACA,0BAGA,cAGA,kCAJA,QASA,+CAGA,eA9DA,SA8DA,GACA,OACA,8BACA,mCACA,wDACA,wDACA,0DACA,UACA,wBACA,sEACA,6BACA,sDACA,6BACA,6BAGA,UA9EA,SA8EA,cA8CA,OA7CA,oBACA,sCACA,kBACA,WACA,OACA,GACA,WACA,QACA,MACA,OACA,KASA,YAJA,8DACA,iBACA,MAIA,kBAIA,OAFA,kBAEA,KAEA,MA1BA,6CA0BA,2GACA,wCADA,SAEA,wBACA,gBADA,WAEA,YAFA,2BAKA,YALA,IAFA,gBAWA,mBAXA,2CA1BA,uDAwCA,kBAEA,OADA,iBACA,KAEA,oBAEA,eA9HA,WA+HA,8CAEA,qBAjIA,WAkIA,wCAEA,qBApIA,WAqIA,wCAEA,yBAvIA,WAwIA,4CAEA,eA1IA,SA0IA,mBACA,eAGA,wBACA,+EAGA,uBAlJA,SAkJA,GACA,gDACA,6BACA,iFACA,8DAEA,mBAxJA,SAwJA,qJACA,qBACA,0BACA,8BACA,kBACA,yBACA,+BANA,SAQA,eARA,cAQA,qBARA,gBASA,wBATA,8CAWA,YAnKA,SAmKA,GACA,iCAEA,YAtKA,SAsKA,GACA,iCAEA,aAzKA,SAyKA,GACA,kCAEA,UA5KA,SA4KA,KACA,OACA,QACA,SAEA,2BACA,WAEA,OApLA,WAoLA,qJACA,UADA,uBAEA,mDAFA,SAGA,gCAHA,cAMA,qBANA,SAQA,qBACA,8CACA,2CACA,uBACA,sCACA,oDACA,+CACA,MAPA,6CAOA,2GACA,8CADA,SAEA,wBACA,gBADA,WAEA,8GAFA,yBAIA,GACA,iBACA,uBANA,IAFA,OAEA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","file":"mail.9.ffe041722b951f0a96bb.js","sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".toggle[data-v-46075dda]{position:fixed;width:44px;height:44px;padding:14px;cursor:pointer;opacity:.6;font-size:16px;line-height:17px;transform:rotate(180deg);background-color:var(--color-main-background);z-index:1100}.toggle[data-v-46075dda]:active,.toggle[data-v-46075dda]:hover,.toggle[data-v-46075dda]:focus{opacity:1}.toggle[data-v-46075dda]+.app-navigation--close .app-navigation-toggle{display:none}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/AppDetailsToggle.vue\"],\"names\":[],\"mappings\":\"AAsCA,yBACC,cAAA,CACA,UAAA,CACA,WAAA,CACA,YAAA,CACA,cAAA,CACA,UAAA,CACA,cAAA,CACA,gBAAA,CACA,wBAAA,CACA,6CAAA,CACA,YAAA,CAEA,8FAGC,SAAA,CAID,uEACC,YAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.toggle {\\n\\tposition: fixed;\\n\\twidth: 44px;\\n\\theight: 44px;\\n\\tpadding: 14px;\\n\\tcursor: pointer;\\n\\topacity: .6;\\n\\tfont-size: 16px;\\n\\tline-height: 17px;\\n\\ttransform: rotate(180deg);\\n\\tbackground-color: var(--color-main-background);\\n\\tz-index: 1100; // needs to be above the main content(1000) and below the navigation(1800)\\n\\n\\t&:active,\\n\\t&:hover,\\n\\t&:focus {\\n\\t\\topacity: 1;\\n\\t}\\n\\n\\t// Hide app navigation toggle in case we are on mobile and have the back arrow visible\\n\\t&::v-deep + .app-navigation--close .app-navigation-toggle {\\n\\t\\tdisplay: none;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n#priority[data-v-95f06344] {\\n\\tdisplay: inline-block;\\n}\\n.app-content-list-item[data-v-95f06344]:hover {\\n\\tbackground-color: transparent;\\n\\topacity: 0.8;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/SectionTitle.vue\"],\"names\":[],\"mappings\":\";AAyCA;CACA,qBAAA;AACA;AACA;CACA,6BAAA;CACA,YAAA;AACA\",\"sourcesContent\":[\"<!--\\n  - @copyright 2020 Greta Doçi <gretadoci@gmail.com>\\n  -\\n  - @author 2020 Greta Doçi <gretadoci@gmail.com>\\n  -\\n  - @license GNU AGPL version 3 or any later version\\n  -\\n  - This program is free software: you can redistribute it and/or modify\\n  - it under the terms of the GNU Affero General Public License as\\n  - published by the Free Software Foundation, either version 3 of the\\n  - License, or (at your option) any later version.\\n  -\\n  - This program is distributed in the hope that it will be useful,\\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n  - GNU Affero General Public License for more details.\\n  -\\n  - You should have received a copy of the GNU Affero General Public License\\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\\n  -->\\n\\n<template>\\n\\t<div id=\\\"priority\\\">\\n\\t\\t<div class=\\\"app-content-list-item\\\">\\n\\t\\t\\t<h2>{{ name }}</h2>\\n\\t\\t</div>\\n\\t</div>\\n</template>\\n<script>\\nexport default {\\n\\tname: 'SectionTitle',\\n\\tprops: {\\n\\t\\tname: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n#priority {\\n\\tdisplay: inline-block;\\n}\\n.app-content-list-item:hover {\\n\\tbackground-color: transparent;\\n\\topacity: 0.8;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","var map = {\n\t\"./af\": 774,\n\t\"./af.js\": 774,\n\t\"./ar\": 775,\n\t\"./ar-dz\": 776,\n\t\"./ar-dz.js\": 776,\n\t\"./ar-kw\": 777,\n\t\"./ar-kw.js\": 777,\n\t\"./ar-ly\": 778,\n\t\"./ar-ly.js\": 778,\n\t\"./ar-ma\": 779,\n\t\"./ar-ma.js\": 779,\n\t\"./ar-sa\": 780,\n\t\"./ar-sa.js\": 780,\n\t\"./ar-tn\": 781,\n\t\"./ar-tn.js\": 781,\n\t\"./ar.js\": 775,\n\t\"./az\": 782,\n\t\"./az.js\": 782,\n\t\"./be\": 783,\n\t\"./be.js\": 783,\n\t\"./bg\": 784,\n\t\"./bg.js\": 784,\n\t\"./bm\": 785,\n\t\"./bm.js\": 785,\n\t\"./bn\": 786,\n\t\"./bn.js\": 786,\n\t\"./bo\": 787,\n\t\"./bo.js\": 787,\n\t\"./br\": 788,\n\t\"./br.js\": 788,\n\t\"./bs\": 789,\n\t\"./bs.js\": 789,\n\t\"./ca\": 790,\n\t\"./ca.js\": 790,\n\t\"./cs\": 791,\n\t\"./cs.js\": 791,\n\t\"./cv\": 792,\n\t\"./cv.js\": 792,\n\t\"./cy\": 793,\n\t\"./cy.js\": 793,\n\t\"./da\": 794,\n\t\"./da.js\": 794,\n\t\"./de\": 795,\n\t\"./de-at\": 796,\n\t\"./de-at.js\": 796,\n\t\"./de-ch\": 797,\n\t\"./de-ch.js\": 797,\n\t\"./de.js\": 795,\n\t\"./dv\": 798,\n\t\"./dv.js\": 798,\n\t\"./el\": 799,\n\t\"./el.js\": 799,\n\t\"./en-SG\": 800,\n\t\"./en-SG.js\": 800,\n\t\"./en-au\": 801,\n\t\"./en-au.js\": 801,\n\t\"./en-ca\": 802,\n\t\"./en-ca.js\": 802,\n\t\"./en-gb\": 803,\n\t\"./en-gb.js\": 803,\n\t\"./en-ie\": 804,\n\t\"./en-ie.js\": 804,\n\t\"./en-il\": 805,\n\t\"./en-il.js\": 805,\n\t\"./en-nz\": 806,\n\t\"./en-nz.js\": 806,\n\t\"./eo\": 807,\n\t\"./eo.js\": 807,\n\t\"./es\": 808,\n\t\"./es-do\": 809,\n\t\"./es-do.js\": 809,\n\t\"./es-us\": 810,\n\t\"./es-us.js\": 810,\n\t\"./es.js\": 808,\n\t\"./et\": 811,\n\t\"./et.js\": 811,\n\t\"./eu\": 812,\n\t\"./eu.js\": 812,\n\t\"./fa\": 813,\n\t\"./fa.js\": 813,\n\t\"./fi\": 814,\n\t\"./fi.js\": 814,\n\t\"./fo\": 815,\n\t\"./fo.js\": 815,\n\t\"./fr\": 816,\n\t\"./fr-ca\": 817,\n\t\"./fr-ca.js\": 817,\n\t\"./fr-ch\": 818,\n\t\"./fr-ch.js\": 818,\n\t\"./fr.js\": 816,\n\t\"./fy\": 819,\n\t\"./fy.js\": 819,\n\t\"./ga\": 820,\n\t\"./ga.js\": 820,\n\t\"./gd\": 821,\n\t\"./gd.js\": 821,\n\t\"./gl\": 822,\n\t\"./gl.js\": 822,\n\t\"./gom-latn\": 823,\n\t\"./gom-latn.js\": 823,\n\t\"./gu\": 824,\n\t\"./gu.js\": 824,\n\t\"./he\": 825,\n\t\"./he.js\": 825,\n\t\"./hi\": 826,\n\t\"./hi.js\": 826,\n\t\"./hr\": 827,\n\t\"./hr.js\": 827,\n\t\"./hu\": 828,\n\t\"./hu.js\": 828,\n\t\"./hy-am\": 829,\n\t\"./hy-am.js\": 829,\n\t\"./id\": 830,\n\t\"./id.js\": 830,\n\t\"./is\": 831,\n\t\"./is.js\": 831,\n\t\"./it\": 832,\n\t\"./it-ch\": 833,\n\t\"./it-ch.js\": 833,\n\t\"./it.js\": 832,\n\t\"./ja\": 834,\n\t\"./ja.js\": 834,\n\t\"./jv\": 835,\n\t\"./jv.js\": 835,\n\t\"./ka\": 836,\n\t\"./ka.js\": 836,\n\t\"./kk\": 837,\n\t\"./kk.js\": 837,\n\t\"./km\": 838,\n\t\"./km.js\": 838,\n\t\"./kn\": 839,\n\t\"./kn.js\": 839,\n\t\"./ko\": 840,\n\t\"./ko.js\": 840,\n\t\"./ku\": 841,\n\t\"./ku.js\": 841,\n\t\"./ky\": 842,\n\t\"./ky.js\": 842,\n\t\"./lb\": 843,\n\t\"./lb.js\": 843,\n\t\"./lo\": 844,\n\t\"./lo.js\": 844,\n\t\"./lt\": 845,\n\t\"./lt.js\": 845,\n\t\"./lv\": 846,\n\t\"./lv.js\": 846,\n\t\"./me\": 847,\n\t\"./me.js\": 847,\n\t\"./mi\": 848,\n\t\"./mi.js\": 848,\n\t\"./mk\": 849,\n\t\"./mk.js\": 849,\n\t\"./ml\": 850,\n\t\"./ml.js\": 850,\n\t\"./mn\": 851,\n\t\"./mn.js\": 851,\n\t\"./mr\": 852,\n\t\"./mr.js\": 852,\n\t\"./ms\": 853,\n\t\"./ms-my\": 854,\n\t\"./ms-my.js\": 854,\n\t\"./ms.js\": 853,\n\t\"./mt\": 855,\n\t\"./mt.js\": 855,\n\t\"./my\": 856,\n\t\"./my.js\": 856,\n\t\"./nb\": 857,\n\t\"./nb.js\": 857,\n\t\"./ne\": 858,\n\t\"./ne.js\": 858,\n\t\"./nl\": 859,\n\t\"./nl-be\": 860,\n\t\"./nl-be.js\": 860,\n\t\"./nl.js\": 859,\n\t\"./nn\": 861,\n\t\"./nn.js\": 861,\n\t\"./pa-in\": 862,\n\t\"./pa-in.js\": 862,\n\t\"./pl\": 863,\n\t\"./pl.js\": 863,\n\t\"./pt\": 864,\n\t\"./pt-br\": 865,\n\t\"./pt-br.js\": 865,\n\t\"./pt.js\": 864,\n\t\"./ro\": 866,\n\t\"./ro.js\": 866,\n\t\"./ru\": 867,\n\t\"./ru.js\": 867,\n\t\"./sd\": 868,\n\t\"./sd.js\": 868,\n\t\"./se\": 869,\n\t\"./se.js\": 869,\n\t\"./si\": 870,\n\t\"./si.js\": 870,\n\t\"./sk\": 871,\n\t\"./sk.js\": 871,\n\t\"./sl\": 872,\n\t\"./sl.js\": 872,\n\t\"./sq\": 873,\n\t\"./sq.js\": 873,\n\t\"./sr\": 874,\n\t\"./sr-cyrl\": 875,\n\t\"./sr-cyrl.js\": 875,\n\t\"./sr.js\": 874,\n\t\"./ss\": 876,\n\t\"./ss.js\": 876,\n\t\"./sv\": 877,\n\t\"./sv.js\": 877,\n\t\"./sw\": 878,\n\t\"./sw.js\": 878,\n\t\"./ta\": 879,\n\t\"./ta.js\": 879,\n\t\"./te\": 880,\n\t\"./te.js\": 880,\n\t\"./tet\": 881,\n\t\"./tet.js\": 881,\n\t\"./tg\": 882,\n\t\"./tg.js\": 882,\n\t\"./th\": 883,\n\t\"./th.js\": 883,\n\t\"./tl-ph\": 884,\n\t\"./tl-ph.js\": 884,\n\t\"./tlh\": 885,\n\t\"./tlh.js\": 885,\n\t\"./tr\": 886,\n\t\"./tr.js\": 886,\n\t\"./tzl\": 887,\n\t\"./tzl.js\": 887,\n\t\"./tzm\": 888,\n\t\"./tzm-latn\": 889,\n\t\"./tzm-latn.js\": 889,\n\t\"./tzm.js\": 888,\n\t\"./ug-cn\": 890,\n\t\"./ug-cn.js\": 890,\n\t\"./uk\": 891,\n\t\"./uk.js\": 891,\n\t\"./ur\": 892,\n\t\"./ur.js\": 892,\n\t\"./uz\": 893,\n\t\"./uz-latn\": 894,\n\t\"./uz-latn.js\": 894,\n\t\"./uz.js\": 893,\n\t\"./vi\": 895,\n\t\"./vi.js\": 895,\n\t\"./x-pseudo\": 896,\n\t\"./x-pseudo.js\": 896,\n\t\"./yo\": 897,\n\t\"./yo.js\": 897,\n\t\"./zh-cn\": 898,\n\t\"./zh-cn.js\": 898,\n\t\"./zh-hk\": 899,\n\t\"./zh-hk.js\": 899,\n\t\"./zh-tw\": 900,\n\t\"./zh-tw.js\": 900\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1072;","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".source-modal[data-v-6279924e]  .modal-container{height:800px}.source-modal .source-modal-content[data-v-6279924e]{width:100%;height:100%;overflow-y:scroll !important}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MenuEnvelope.vue\"],\"names\":[],\"mappings\":\"AAyUC,iDACC,YAAA,CAGD,qDACC,UAAA,CACA,WAAA,CACA,4BAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.source-modal {\\n\\t::v-deep .modal-container {\\n\\t\\theight: 800px;\\n\\t}\\n\\n\\t.source-modal-content {\\n\\t\\twidth: 100%;\\n\\t\\theight: 100%;\\n\\t\\toverflow-y: scroll !important;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/getUrl.js\";\nimport ___CSS_LOADER_URL_IMPORT_0___ from \"../../img/reply.svg\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".mail-message-account-color[data-v-5b5c7240]{position:absolute;left:0px;width:2px;height:69px;z-index:1}.icon-important[data-v-5b5c7240]  path{fill:#fc0;stroke:var(--color-main-background)}.app-content-list-item:hover .icon-important[data-v-5b5c7240]  path,.app-content-list-item:focus .icon-important[data-v-5b5c7240]  path,.app-content-list-item.active .icon-important[data-v-5b5c7240]  path{stroke:var(--color-background-dark)}.icon-important.app-content-list-item-star[data-v-5b5c7240]{background-image:none;left:7px;top:13px;opacity:1}.icon-important.app-content-list-item-star[data-v-5b5c7240]:hover,.icon-important.app-content-list-item-star[data-v-5b5c7240]:focus{opacity:.5}.app-content-list-item .app-content-list-item-select-checkbox[data-v-5b5c7240]{display:inline-block;vertical-align:middle;position:absolute;left:22px;top:20px;z-index:50}.app-content-list-item[data-v-5b5c7240]:not(.seen){font-weight:bold}.app-content-list-item.selected[data-v-5b5c7240]{background-color:var(--color-background-dark);font-weight:bold}.app-content-list-item-star.junk[data-v-5b5c7240]{background-image:var(--icon-junk-000);opacity:1}.app-content-list-item.draft .app-content-list-item-line-two[data-v-5b5c7240]{font-style:italic}.app-content-list-item.active[data-v-5b5c7240]{background-color:var(--color-primary-light)}.icon-reply[data-v-5b5c7240],.icon-attachment[data-v-5b5c7240]{display:inline-block;vertical-align:text-top}.icon-reply[data-v-5b5c7240]{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \");-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)\\\";opacity:.5}.icon-attachment[data-v-5b5c7240]{-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=25)\\\";opacity:.25}.app-content-list .app-content-list-item[data-v-5b5c7240]{padding-right:0}.app-content-list .app-content-list-item .app-content-list-item-line-two[data-v-5b5c7240]{padding-right:0;margin-top:-8px}.app-content-list .app-content-list-item .app-content-list-item-menu[data-v-5b5c7240]{margin-right:-2px;margin-top:-8px}.app-content-list .app-content-list-item .app-content-list-item-menu[data-v-5b5c7240]  .action-item__menu{right:7px !important}.app-content-list .app-content-list-item .app-content-list-item-menu[data-v-5b5c7240]  .action-item__menu .action-item__menu_arrow{right:6px !important}.app-content-list .app-content-list-item .app-content-list-item-details[data-v-5b5c7240]{padding-right:7px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Envelope.vue\"],\"names\":[],\"mappings\":\"AAiNA,6CACC,iBAAA,CACA,QAAA,CACA,SAAA,CACA,WAAA,CACA,SAAA,CAIA,uCACC,SAAA,CACA,mCAAA,CAKA,6MACC,mCAAA,CAKF,4DACC,qBAAA,CACA,QAAA,CACA,QAAA,CACA,SAAA,CAEA,oIAEC,UAAA,CAKH,+EACC,oBAAA,CACA,qBAAA,CACA,iBAAA,CACA,SAAA,CACA,QAAA,CACA,UAAA,CAGD,mDACC,gBAAA,CAED,iDACC,6CAAA,CACA,gBAAA,CAED,kDACC,qCAAA,CACA,SAAA,CAED,8EACC,iBAAA,CAED,+CACC,2CAAA,CAGD,+DAEC,oBAAA,CACA,uBAAA,CAGD,6BACC,wDAAA,CACA,gEAAA,CACA,UAAA,CAGD,kCACC,gEAAA,CACA,WAAA,CAKD,0DACC,eAAA,CAEA,0FACC,eAAA,CACA,eAAA,CAGD,sFACC,iBAAA,CACA,eAAA,CAEA,0GACC,oBAAA,CAEA,mIACC,oBAAA,CAKH,yFACC,iBAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.mail-message-account-color {\\n\\tposition: absolute;\\n\\tleft: 0px;\\n\\twidth: 2px;\\n\\theight: 69px;\\n\\tz-index: 1;\\n}\\n\\n.icon-important {\\n\\t::v-deep path {\\n\\t\\tfill: #ffcc00;\\n\\t\\tstroke: var(--color-main-background);\\n\\t}\\n\\t.app-content-list-item:hover &,\\n\\t.app-content-list-item:focus &,\\n\\t.app-content-list-item.active & {\\n\\t\\t::v-deep path {\\n\\t\\t\\tstroke: var(--color-background-dark);\\n\\t\\t}\\n\\t}\\n\\n\\t// In message list, but not the one in the action menu\\n\\t&.app-content-list-item-star {\\n\\t\\tbackground-image: none;\\n\\t\\tleft: 7px;\\n\\t\\ttop: 13px;\\n\\t\\topacity: 1;\\n\\n\\t\\t&:hover,\\n\\t\\t&:focus {\\n\\t\\t\\topacity: 0.5;\\n\\t\\t}\\n\\t}\\n}\\n\\n.app-content-list-item .app-content-list-item-select-checkbox {\\n\\tdisplay: inline-block;\\n\\tvertical-align: middle;\\n\\tposition: absolute;\\n\\tleft: 22px;\\n\\ttop: 20px;\\n\\tz-index: 50; // same as icon-starred\\n}\\n\\n.app-content-list-item:not(.seen) {\\n\\tfont-weight: bold;\\n}\\n.app-content-list-item.selected {\\n\\tbackground-color: var(--color-background-dark);\\n\\tfont-weight: bold;\\n}\\n.app-content-list-item-star.junk {\\n\\tbackground-image: var(--icon-junk-000);\\n\\topacity: 1;\\n}\\n.app-content-list-item.draft .app-content-list-item-line-two {\\n\\tfont-style: italic;\\n}\\n.app-content-list-item.active {\\n\\tbackground-color: var(--color-primary-light);\\n}\\n\\n.icon-reply,\\n.icon-attachment {\\n\\tdisplay: inline-block;\\n\\tvertical-align: text-top;\\n}\\n\\n.icon-reply {\\n\\tbackground-image: url('../../img/reply.svg');\\n\\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=50)';\\n\\topacity: 0.5;\\n}\\n\\n.icon-attachment {\\n\\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=25)';\\n\\topacity: 0.25;\\n}\\n\\n// Fix layout of messages in list until we move to component\\n\\n.app-content-list .app-content-list-item {\\n\\tpadding-right: 0;\\n\\n\\t.app-content-list-item-line-two {\\n\\t\\tpadding-right: 0;\\n\\t\\tmargin-top: -8px;\\n\\t}\\n\\n\\t.app-content-list-item-menu {\\n\\t\\tmargin-right: -2px;\\n\\t\\tmargin-top: -8px;\\n\\n\\t\\t::v-deep .action-item__menu {\\n\\t\\t\\tright: 7px !important;\\n\\n\\t\\t\\t.action-item__menu_arrow {\\n\\t\\t\\t\\tright: 6px !important;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\t.app-content-list-item-details {\\n\\t\\tpadding-right: 7px;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M15 15s-.4-7.8-7-10V1L1 8l7 7v-4c5.1 0 7 4 7 4z\\\"></path></svg>\"","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"div[data-v-74567ca5]{position:relative}.load-more[data-v-74567ca5]{text-align:center;margin-top:10px;cursor:pointer;color:var(--color-text-maxcontrast)}.multiselect-header[data-v-74567ca5]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:var(--color-main-background-translucent);position:sticky;top:0px;height:48px;z-index:100}#load-more-mail-messages[data-v-74567ca5]{margin:10px auto;padding:10px;margin-top:50px;margin-bottom:50px}#load-more-mail-messages.icon-loading-small[data-v-74567ca5]{padding-left:32px;background-position:9px center}#list-refreshing[data-v-74567ca5]{position:absolute;left:calc(50% - 8px);overflow:hidden;padding:12px;background-color:var(--color-main-background);z-index:1;border-radius:var(--border-radius-pill);border:1px solid var(--color-border);top:-24px;opacity:0;transition-property:top,opacity;transition-duration:.5s;transition-timing-function:ease-in-out}#list-refreshing.refreshing[data-v-74567ca5]{top:4px;opacity:1}.multiselect-header-enter-active[data-v-74567ca5],.multiselect-header-leave-active[data-v-74567ca5],.list-enter-active[data-v-74567ca5],.list-leave-active[data-v-74567ca5]{transition:all var(--animation-slow)}.multiselect-header-enter[data-v-74567ca5],.multiselect-header-leave-to[data-v-74567ca5],.list-enter[data-v-74567ca5],.list-leave-to[data-v-74567ca5]{opacity:0;height:0px;transform:scaleY(0)}#action-label[data-v-74567ca5]{vertical-align:middle}@media only screen and (min-width: 600px){#action-label[data-v-74567ca5]{display:block}}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/EnvelopeList.vue\"],\"names\":[],\"mappings\":\"AAgXA,qBAEC,iBAAA,CAGD,4BACC,iBAAA,CACA,eAAA,CACA,cAAA,CACA,mCAAA,CAGD,qCACC,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,sBAAA,CACA,yDAAA,CACA,eAAA,CACA,OAAA,CACA,WAAA,CACA,WAAA,CAGD,0CACC,gBAAA,CACA,YAAA,CACA,eAAA,CACA,kBAAA,CAID,6DACC,iBAAA,CACA,8BAAA,CAGD,kCACC,iBAAA,CACA,oBAAA,CACA,eAAA,CACA,YAAA,CACA,6CAAA,CACA,SAAA,CACA,uCAAA,CACA,oCAAA,CACA,SAAA,CACA,SAAA,CACA,+BAAA,CACA,uBAAA,CACA,sCAAA,CAEA,6CACC,OAAA,CACA,SAAA,CAIF,4KAIC,oCAAA,CAGD,sJAIC,SAAA,CACA,UAAA,CACA,mBAAA,CAGD,+BACC,qBAAA,CAED,0CACC,+BACC,aAAA,CAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\ndiv {\\n\\t// So we can align the loading spinner in the Priority inbox\\n\\tposition: relative;\\n}\\n\\n.load-more {\\n\\ttext-align: center;\\n\\tmargin-top: 10px;\\n\\tcursor: pointer;\\n\\tcolor: var(--color-text-maxcontrast);\\n}\\n\\n.multiselect-header {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n\\tbackground-color: var(--color-main-background-translucent);\\n\\tposition: sticky;\\n\\ttop: 0px;\\n\\theight: 48px;\\n\\tz-index: 100;\\n}\\n\\n#load-more-mail-messages {\\n\\tmargin: 10px auto;\\n\\tpadding: 10px;\\n\\tmargin-top: 50px;\\n\\tmargin-bottom: 50px;\\n}\\n\\n/* TODO: put this in core icons.css as general rule for buttons with icons */\\n#load-more-mail-messages.icon-loading-small {\\n\\tpadding-left: 32px;\\n\\tbackground-position: 9px center;\\n}\\n\\n#list-refreshing {\\n\\tposition: absolute;\\n\\tleft: calc(50% - 8px);\\n\\toverflow: hidden;\\n\\tpadding: 12px;\\n\\tbackground-color: var(--color-main-background);\\n\\tz-index: 1;\\n\\tborder-radius: var(--border-radius-pill);\\n\\tborder: 1px solid var(--color-border);\\n\\ttop: -24px;\\n\\topacity: 0;\\n\\ttransition-property: top, opacity;\\n\\ttransition-duration: 0.5s;\\n\\ttransition-timing-function: ease-in-out;\\n\\n\\t&.refreshing {\\n\\t\\ttop: 4px;\\n\\t\\topacity: 1;\\n\\t}\\n}\\n\\n.multiselect-header-enter-active,\\n.multiselect-header-leave-active,\\n.list-enter-active,\\n.list-leave-active {\\n\\ttransition: all var(--animation-slow);\\n}\\n\\n.multiselect-header-enter,\\n.multiselect-header-leave-to,\\n.list-enter,\\n.list-leave-to {\\n\\topacity: 0;\\n\\theight: 0px;\\n\\ttransform: scaleY(0);\\n}\\n\\n#action-label {\\n\\tvertical-align: middle;\\n}\\n@media only screen and (min-width: 600px) {\\n\\t#action-label {\\n\\t\\tdisplay: block;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".fade-enter-active[data-v-5dce5c60],.fade-leave-active[data-v-5dce5c60]{transition:opacity .5s}.fade-enter[data-v-5dce5c60],.fade-leave-to[data-v-5dce5c60]{opacity:0}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Loading.vue\"],\"names\":[],\"mappings\":\"AA8CA,wEAEC,sBAAA,CAED,6DAEC,SAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.fade-enter-active,\\n.fade-leave-active {\\n\\ttransition: opacity 0.5s;\\n}\\n.fade-enter,\\n.fade-leave-to {\\n\\topacity: 0;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"#emptycontent[data-v-4512145e]{margin-top:10px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/EmptyMailboxSection.vue\"],\"names\":[],\"mappings\":\"AAYA,+BACC,eAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n#emptycontent {\\n\\tmargin-top: 10px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".nameimportant[data-v-45a02c20]  #load-more-mail-messages,.namestarred[data-v-45a02c20]  #load-more-mail-messages{margin-top:0;margin-bottom:8px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Mailbox.vue\"],\"names\":[],\"mappings\":\"AAkdC,kHACC,YAAA,CACA,iBAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n// Fix vertical space between sections in priority inbox\\n.nameimportant,\\n.namestarred {\\n\\t::v-deep #load-more-mail-messages {\\n\\t\\tmargin-top: 0;\\n\\t\\tmargin-bottom: 8px;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.new-message-attachments li[data-v-44ae67a0] {\\n\\tpadding: 10px;\\n}\\n.new-message-attachments-action[data-v-44ae67a0] {\\n\\tdisplay: inline-block;\\n\\tvertical-align: middle;\\n\\tpadding: 22px;\\n\\topacity: 0.5;\\n}\\n\\n/* attachment filenames */\\n.new-message-attachment-name[data-v-44ae67a0] {\\n\\tdisplay: inline-block;\\n}\\n\\n/* Colour the filename with a different color during attachment upload */\\n.new-message-attachment-name.upload-ongoing[data-v-44ae67a0] {\\n\\tcolor: #0082c9;\\n}\\n\\n/* Colour the filename in red if the attachment upload failed */\\n.new-message-attachment-name.upload-warning[data-v-44ae67a0] {\\n\\tcolor: #d2322d;\\n}\\n\\n/* Red ProgressBar for failed attachment uploads */\\n.new-message-attachment-name.upload-warning .ui-progressbar-value[data-v-44ae67a0] {\\n\\tborder: 1px solid #e9322d;\\n\\tbackground: #e9322d;\\n}\\n.attachments-upload-progress[data-v-44ae67a0] {\\n\\tdisplay: flex;\\n}\\n.attachments-upload-progress > div[data-v-44ae67a0] {\\n\\tpadding-left: 3px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/ComposerAttachments.vue\"],\"names\":[],\"mappings\":\";AAuOA;CACA,aAAA;AACA;AAEA;CACA,qBAAA;CACA,sBAAA;CACA,aAAA;CACA,YAAA;AACA;;AAEA,yBAAA;AACA;CACA,qBAAA;AACA;;AAEA,wEAAA;AACA;CACA,cAAA;AACA;;AAEA,+DAAA;AACA;CACA,cAAA;AACA;;AAEA,kDAAA;AACA;CACA,yBAAA;CACA,mBAAA;AACA;AAEA;CACA,aAAA;AACA;AAEA;CACA,iBAAA;AACA\",\"sourcesContent\":[\"<!--\\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\\n  - @copyright 2020 Gary Kim <gary@garykim.dev>\\n  -\\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\\n  -\\n  - @license GNU AGPL version 3 or any later version\\n  -\\n  - This program is free software: you can redistribute it and/or modify\\n  - it under the terms of the GNU Affero General Public License as\\n  - published by the Free Software Foundation, either version 3 of the\\n  - License, or (at your option) any later version.\\n  -\\n  - This program is distributed in the hope that it will be useful,\\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n  - GNU Affero General Public License for more details.\\n  -\\n  - You should have received a copy of the GNU Affero General Public License\\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\\n  -->\\n\\n<template>\\n\\t<div class=\\\"new-message-attachments\\\">\\n\\t\\t<ul>\\n\\t\\t\\t<li v-for=\\\"attachment in value\\\" :key=\\\"attachment.id\\\">\\n\\t\\t\\t\\t<div class=\\\"new-message-attachment-name\\\">\\n\\t\\t\\t\\t\\t{{ attachment.displayName }}\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"new-message-attachments-action svg icon-delete\\\" @click=\\\"onDelete(attachment)\\\" />\\n\\t\\t\\t</li>\\n\\t\\t\\t<li v-if=\\\"uploading\\\" class=\\\"attachments-upload-progress\\\">\\n\\t\\t\\t\\t<div :class=\\\"{'icon-loading-small': uploading}\\\" />\\n\\t\\t\\t\\t<div>{{ uploading ? t('mail', 'Uploading {percent}% …', {percent: uploadProgress}) : '' }}</div>\\n\\t\\t\\t</li>\\n\\t\\t</ul>\\n\\n\\t\\t<input ref=\\\"localAttachments\\\"\\n\\t\\t\\ttype=\\\"file\\\"\\n\\t\\t\\tmultiple\\n\\t\\t\\tstyle=\\\"display: none;\\\"\\n\\t\\t\\t@change=\\\"onLocalAttachmentSelected\\\">\\n\\t</div>\\n</template>\\n\\n<script>\\nimport map from 'lodash/fp/map'\\nimport trimStart from 'lodash/fp/trimCharsStart'\\nimport { getRequestToken } from '@nextcloud/auth'\\nimport { formatFileSize } from '@nextcloud/files'\\nimport prop from 'lodash/fp/prop'\\nimport { getFilePickerBuilder, showWarning } from '@nextcloud/dialogs'\\nimport sum from 'lodash/fp/sum'\\nimport sumBy from 'lodash/fp/sumBy'\\nimport { translate as t, translatePlural as n } from '@nextcloud/l10n'\\n\\nimport Vue from 'vue'\\n\\nimport logger from '../logger'\\nimport { getFileSize } from '../service/FileService'\\nimport { shareFile } from '../service/FileSharingService'\\nimport { uploadLocalAttachment } from '../service/AttachmentService'\\n\\nexport default {\\n\\tname: 'ComposerAttachments',\\n\\tprops: {\\n\\t\\tvalue: {\\n\\t\\t\\ttype: Array,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tbus: {\\n\\t\\t\\ttype: Object,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tuploadSizeLimit: {\\n\\t\\t\\ttype: Number,\\n\\t\\t\\tdefault: 0,\\n\\t\\t},\\n\\t},\\n\\tdata() {\\n\\t\\treturn {\\n\\t\\t\\tuploading: false,\\n\\t\\t\\tuploads: {},\\n\\t\\t}\\n\\t},\\n\\tcomputed: {\\n\\t\\tuploadProgress() {\\n\\t\\t\\tlet uploaded = 0\\n\\t\\t\\tlet total = 0\\n\\t\\t\\tfor (const id in this.uploads) {\\n\\t\\t\\t\\tuploaded += this.uploads[id].uploaded\\n\\t\\t\\t\\ttotal += this.uploads[id].total\\n\\t\\t\\t}\\n\\t\\t\\treturn ((uploaded / total) * 100).toFixed(1)\\n\\t\\t},\\n\\t},\\n\\tcreated() {\\n\\t\\tthis.bus.$on('onAddLocalAttachment', this.onAddLocalAttachment)\\n\\t\\tthis.bus.$on('onAddCloudAttachment', this.onAddCloudAttachment)\\n\\t\\tthis.bus.$on('onAddCloudAttachmentLink', this.onAddCloudAttachmentLink)\\n\\t},\\n\\tmethods: {\\n\\t\\tonAddLocalAttachment() {\\n\\t\\t\\tthis.$refs.localAttachments.click()\\n\\t\\t},\\n\\t\\temitNewAttachments(attachments) {\\n\\t\\t\\tthis.$emit('input', this.value.concat(attachments))\\n\\t\\t},\\n\\t\\ttotalSizeOfUpload() {\\n\\t\\t\\treturn Object.values(this.value).reduce((acc, upload) => {\\n\\t\\t\\t\\tif (!upload.type === 'local') {\\n\\t\\t\\t\\t\\t// Ignore link shares\\n\\t\\t\\t\\t\\treturn acc\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\treturn acc + upload.size\\n\\t\\t\\t}, 0)\\n\\t\\t},\\n\\t\\tonLocalAttachmentSelected(e) {\\n\\t\\t\\tthis.uploading = true\\n\\n\\t\\t\\tVue.set(this, 'uploads', {})\\n\\n\\t\\t\\tconst toUpload = sumBy(prop('size'), Object.values(e.target.files))\\n\\t\\t\\tconst newTotal = toUpload + this.totalSizeOfUpload()\\n\\t\\t\\tlogger.debug('checking upload size limit', {\\n\\t\\t\\t\\texistingUploads: this.totalSizeOfUpload(),\\n\\t\\t\\t\\ttoUpload,\\n\\t\\t\\t\\tlimit: this.uploadSizeLimit,\\n\\t\\t\\t\\tnewTotal,\\n\\t\\t\\t})\\n\\t\\t\\tif (this.uploadSizeLimit && newTotal > this.uploadSizeLimit) {\\n\\t\\t\\t\\tthis.showAttachmentFileSizeWarning(e.target.files.length)\\n\\n\\t\\t\\t\\tthis.uploading = false\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst progress = (id) => (prog, uploaded) => {\\n\\t\\t\\t\\tthis.uploads[id].uploaded = uploaded\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst promises = map((file) => {\\n\\t\\t\\t\\tVue.set(this.uploads, file.name, {\\n\\t\\t\\t\\t\\ttotal: file.size,\\n\\t\\t\\t\\t\\tuploaded: 0,\\n\\t\\t\\t\\t})\\n\\n\\t\\t\\t\\treturn uploadLocalAttachment(file, progress(file.name)).then(({ file, id }) => {\\n\\t\\t\\t\\t\\tlogger.info('uploaded')\\n\\t\\t\\t\\t\\tthis.emitNewAttachments([{\\n\\t\\t\\t\\t\\t\\tfileName: file.name,\\n\\t\\t\\t\\t\\t\\tdisplayName: trimStart('/', file.name),\\n\\t\\t\\t\\t\\t\\tid,\\n\\t\\t\\t\\t\\t\\tsize: file.size,\\n\\t\\t\\t\\t\\t\\ttype: 'local',\\n\\t\\t\\t\\t\\t}])\\n\\t\\t\\t\\t})\\n\\n\\t\\t\\t}, e.target.files)\\n\\n\\t\\t\\tconst done = Promise.all(promises)\\n\\t\\t\\t\\t.catch((error) => logger.error('could not upload all attachments', { error }))\\n\\t\\t\\t\\t.then(() => (this.uploading = false))\\n\\n\\t\\t\\tthis.$emit('upload', done)\\n\\n\\t\\t\\treturn done\\n\\t\\t},\\n\\t\\tasync onAddCloudAttachment() {\\n\\t\\t\\tconst picker = getFilePickerBuilder(t('mail', 'Choose a file to add as attachment')).setMultiSelect(true).build()\\n\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tconst paths = await picker.pick(t('mail', 'Choose a file to add as attachment'))\\n\\t\\t\\t\\tconst fileSizes = await Promise.all(paths.map(getFileSize))\\n\\t\\t\\t\\tconst newTotal = sum(fileSizes) + this.totalSizeOfUpload()\\n\\n\\t\\t\\t\\tif (this.uploadSizeLimit && newTotal > this.uploadSizeLimit) {\\n\\t\\t\\t\\t\\tthis.showAttachmentFileSizeWarning(paths.length)\\n\\n\\t\\t\\t\\t\\treturn\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tthis.emitNewAttachments(paths.map(function(name) {\\n\\t\\t\\t\\t\\treturn {\\n\\t\\t\\t\\t\\t\\tfileName: name,\\n\\t\\t\\t\\t\\t\\tdisplayName: trimStart('/', name),\\n\\t\\t\\t\\t\\t\\ttype: 'cloud',\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}))\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tlogger.error('could not choose a file as attachment', { error })\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tasync onAddCloudAttachmentLink() {\\n\\t\\t\\tconst picker = getFilePickerBuilder(t('mail', 'Choose a file to share as a link')).build()\\n\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tconst path = await picker.pick(t('mail', 'Choose a file to share as a link'))\\n\\t\\t\\t\\tconst url = await shareFile(path, getRequestToken())\\n\\n\\t\\t\\t\\tthis.appendToBodyAtCursor(`<a href=\\\"${url}\\\">${url}</a>`)\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tlogger.error('could not choose a file as attachment link', { error })\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tshowAttachmentFileSizeWarning(num) {\\n\\t\\t\\tshowWarning(n(\\n\\t\\t\\t\\t'mail',\\n\\t\\t\\t\\t'The attachment exceed the allowed attachments size of {size}. Please share the file via link instead.',\\n\\t\\t\\t\\t'The attachments exceed the allowed attachments size of {size}. Please share the files via link instead.',\\n\\t\\t\\t\\tnum,\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\tsize: formatFileSize(this.uploadSizeLimit),\\n\\t\\t\\t\\t}\\n\\t\\t\\t))\\n\\t\\t},\\n\\t\\tonDelete(attachment) {\\n\\t\\t\\tthis.$emit(\\n\\t\\t\\t\\t'input',\\n\\t\\t\\t\\tthis.value.filter((a) => a !== attachment)\\n\\t\\t\\t)\\n\\t\\t},\\n\\t\\tappendToBodyAtCursor(toAppend) {\\n\\t\\t\\tthis.bus.$emit('appendToBodyAtCursor', toAppend)\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n.new-message-attachments li {\\n\\tpadding: 10px;\\n}\\n\\n.new-message-attachments-action {\\n\\tdisplay: inline-block;\\n\\tvertical-align: middle;\\n\\tpadding: 22px;\\n\\topacity: 0.5;\\n}\\n\\n/* attachment filenames */\\n.new-message-attachment-name {\\n\\tdisplay: inline-block;\\n}\\n\\n/* Colour the filename with a different color during attachment upload */\\n.new-message-attachment-name.upload-ongoing {\\n\\tcolor: #0082c9;\\n}\\n\\n/* Colour the filename in red if the attachment upload failed */\\n.new-message-attachment-name.upload-warning {\\n\\tcolor: #d2322d;\\n}\\n\\n/* Red ProgressBar for failed attachment uploads */\\n.new-message-attachment-name.upload-warning .ui-progressbar-value {\\n\\tborder: 1px solid #e9322d;\\n\\tbackground: #e9322d;\\n}\\n\\n.attachments-upload-progress {\\n\\tdisplay: flex;\\n}\\n\\n.attachments-upload-progress > div {\\n\\tpadding-left: 3px;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n#mailvelope-composer[data-v-1320c887] {\\n\\twidth: 100%;\\n\\theight: 450px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MailvelopeEditor.vue\"],\"names\":[],\"mappings\":\";AA6EA;CACA,WAAA;CACA,aAAA;AACA\",\"sourcesContent\":[\"<!--\\n  - @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\\n  -\\n  - @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\\n  -\\n  - @license GNU AGPL version 3 or any later version\\n  -\\n  - This program is free software: you can redistribute it and/or modify\\n  - it under the terms of the GNU Affero General Public License as\\n  - published by the Free Software Foundation, either version 3 of the\\n  - License, or (at your option) any later version.\\n  -\\n  - This program is distributed in the hope that it will be useful,\\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n  - GNU Affero General Public License for more details.\\n  -\\n  - You should have received a copy of the GNU Affero General Public License\\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\\n  -->\\n\\n<template>\\n\\t<div id=\\\"mailvelope-composer\\\" />\\n</template>\\n\\n<script>\\nimport logger from '../logger'\\nimport { isPgpgMessage } from '../crypto/pgp'\\n\\nexport default {\\n\\tname: 'MailvelopeEditor',\\n\\tprops: {\\n\\t\\tvalue: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\trecipients: {\\n\\t\\t\\ttype: Array,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tquotedText: {\\n\\t\\t\\ttype: Object,\\n\\t\\t\\trequired: false,\\n\\t\\t\\tdefault: () => undefined,\\n\\t\\t},\\n\\t\\tisReplyOrForward: {\\n\\t\\t\\ttype: Boolean,\\n\\t\\t\\tdefault: false,\\n\\t\\t},\\n\\t},\\n\\tdata() {\\n\\t\\treturn {\\n\\t\\t\\teditor: undefined,\\n\\t\\t}\\n\\t},\\n\\tasync mounted() {\\n\\t\\tconst isEncrypted = this.quotedText ? isPgpgMessage(this.quotedText) : false\\n\\t\\tconst quotedMail = this.isReplyOrForward ? this.quotedText?.value : undefined\\n\\n\\t\\tthis.editor = await window.mailvelope.createEditorContainer('#mailvelope-composer', undefined, {\\n\\t\\t\\tquotedMail: isEncrypted ? quotedMail : undefined,\\n\\t\\t})\\n\\t},\\n\\tmethods: {\\n\\t\\tasync pull() {\\n\\t\\t\\tconst recipients = this.recipients.map((r) => r.email)\\n\\t\\t\\tlogger.info('encrypting message', { recipients })\\n\\t\\t\\tconst armored = await this.editor.encrypt(recipients)\\n\\t\\t\\tlogger.info('message encryted', { armored })\\n\\n\\t\\t\\tthis.$emit('input', armored)\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n#mailvelope-composer {\\n\\twidth: 100%;\\n\\theight: 450px;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".message-composer[data-v-2377ac20]{margin:0;z-index:100}.composer-actions[data-v-2377ac20]{display:flex;flex-direction:row;align-items:flex-end;justify-content:space-between;position:sticky;bottom:0;padding:12px;background:linear-gradient(rgba(255, 255, 255, 0), var(--color-main-background-translucent) 50%)}.composer-actions-right[data-v-2377ac20]{display:flex;align-items:center}.composer-fields[data-v-2377ac20]{display:flex;align-items:center;border-top:1px solid var(--color-border)}.composer-fields.mail-account[data-v-2377ac20]{border-top:none}.composer-fields.mail-account>.multiselect[data-v-2377ac20]{max-width:none;min-height:auto}.composer-fields .multiselect[data-v-2377ac20],.composer-fields input[data-v-2377ac20],.composer-fields TextEditor[data-v-2377ac20]{flex-grow:1;max-width:none;border:none;border-radius:0}.composer-fields .multiselect[data-v-2377ac20]{margin-right:12px}.subject[data-v-2377ac20]{font-size:20px;font-weight:bold;margin:0;padding:24px 12px}.warning-box[data-v-2377ac20]{padding:5px 12px;border-radius:0}.message-body[data-v-2377ac20]{min-height:300px;width:100%;margin:0;padding:12px;border:none !important;outline:none !important;box-shadow:none !important}#draft-status[data-v-2377ac20]{padding:5px;opacity:.5;font-size:small}.from-label[data-v-2377ac20],.to-label[data-v-2377ac20],.copy-toggle[data-v-2377ac20],.cc-label[data-v-2377ac20],.bcc-label[data-v-2377ac20]{padding:12px;cursor:text;color:var(--color-text-maxcontrast);width:100px;text-align:right;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.bcc-label[data-v-2377ac20]{top:initial;bottom:0}.copy-toggle[data-v-2377ac20]{cursor:pointer;width:initial}.copy-toggle[data-v-2377ac20]:hover,.copy-toggle[data-v-2377ac20]:focus{color:var(--color-main-text)}.reply[data-v-2377ac20]{min-height:100px}.send[data-v-2377ac20]{padding:12px 18px 13px 36px;background-position:12px center;margin-left:4px}[data-v-2377ac20] .multiselect .multiselect__tags{border:none !important}.submit-message.send.primary.icon-confirm-white[data-v-2377ac20]{color:var(--color-main-background)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Composer.vue\"],\"names\":[],\"mappings\":\"AA0wBA,mCACC,QAAA,CACA,WAAA,CAGD,mCACC,YAAA,CACA,kBAAA,CACA,oBAAA,CACA,6BAAA,CACA,eAAA,CACA,QAAA,CACA,YAAA,CACA,gGAAA,CAGD,yCACC,YAAA,CACA,kBAAA,CAGD,kCACC,YAAA,CACA,kBAAA,CACA,wCAAA,CAEA,+CACC,eAAA,CAEA,4DACC,cAAA,CACA,eAAA,CAIF,oIAGC,WAAA,CACA,cAAA,CACA,WAAA,CACA,eAAA,CAGD,+CACC,iBAAA,CAIF,0BACC,cAAA,CACA,gBAAA,CACA,QAAA,CACA,iBAAA,CAGD,8BACC,gBAAA,CACA,eAAA,CAGD,+BACC,gBAAA,CACA,UAAA,CACA,QAAA,CACA,YAAA,CACA,sBAAA,CACA,uBAAA,CACA,0BAAA,CAGD,+BACC,WAAA,CACA,UAAA,CACA,eAAA,CAGD,6IAKC,YAAA,CACA,WAAA,CACA,mCAAA,CACA,WAAA,CACA,gBAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CAGD,4BACC,WAAA,CACA,QAAA,CAGD,8BACC,cAAA,CACA,aAAA,CAEA,wEAEC,4BAAA,CAIF,wBACC,gBAAA,CAGD,uBACC,2BAAA,CACA,+BAAA,CACA,eAAA,CAED,kDACC,sBAAA,CAED,iEACC,kCAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.message-composer {\\n\\tmargin: 0;\\n\\tz-index: 100;\\n}\\n\\n.composer-actions {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\talign-items: flex-end;\\n\\tjustify-content: space-between;\\n\\tposition: sticky;\\n\\tbottom: 0;\\n\\tpadding: 12px;\\n\\tbackground: linear-gradient(rgba(255, 255, 255, 0), var(--color-main-background-translucent) 50%);\\n}\\n\\n.composer-actions-right {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n}\\n\\n.composer-fields {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tborder-top: 1px solid var(--color-border);\\n\\n\\t&.mail-account {\\n\\t\\tborder-top: none;\\n\\n\\t\\t& > .multiselect {\\n\\t\\t\\tmax-width: none;\\n\\t\\t\\tmin-height: auto;\\n\\t\\t}\\n\\t}\\n\\n\\t.multiselect,\\n\\tinput,\\n\\tTextEditor {\\n\\t\\tflex-grow: 1;\\n\\t\\tmax-width: none;\\n\\t\\tborder: none;\\n\\t\\tborder-radius: 0;\\n\\t}\\n\\n\\t.multiselect {\\n\\t\\tmargin-right: 12px;\\n\\t}\\n}\\n\\n.subject {\\n\\tfont-size: 20px;\\n\\tfont-weight: bold;\\n\\tmargin: 0;\\n\\tpadding: 24px 12px;\\n}\\n\\n.warning-box {\\n\\tpadding: 5px 12px;\\n\\tborder-radius: 0;\\n}\\n\\n.message-body {\\n\\tmin-height: 300px;\\n\\twidth: 100%;\\n\\tmargin: 0;\\n\\tpadding: 12px;\\n\\tborder: none !important;\\n\\toutline: none !important;\\n\\tbox-shadow: none !important;\\n}\\n\\n#draft-status {\\n\\tpadding: 5px;\\n\\topacity: 0.5;\\n\\tfont-size: small;\\n}\\n\\n.from-label,\\n.to-label,\\n.copy-toggle,\\n.cc-label,\\n.bcc-label {\\n\\tpadding: 12px;\\n\\tcursor: text;\\n\\tcolor: var(--color-text-maxcontrast);\\n\\twidth: 100px;\\n\\ttext-align: right;\\n\\twhite-space: nowrap;\\n\\toverflow: hidden;\\n\\ttext-overflow: ellipsis;\\n}\\n\\n.bcc-label {\\n\\ttop: initial;\\n\\tbottom: 0;\\n}\\n\\n.copy-toggle {\\n\\tcursor: pointer;\\n\\twidth: initial;\\n\\n\\t&:hover,\\n\\t&:focus {\\n\\t\\tcolor: var(--color-main-text);\\n\\t}\\n}\\n\\n.reply {\\n\\tmin-height: 100px;\\n}\\n\\n.send {\\n\\tpadding: 12px 18px 13px 36px;\\n\\tbackground-position: 12px center;\\n\\tmargin-left: 4px;\\n}\\n::v-deep .multiselect .multiselect__tags {\\n\\tborder: none !important;\\n}\\n.submit-message.send.primary.icon-confirm-white {\\n\\tcolor: var(--color-main-background);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.app-content-details[data-v-0f812b2d] {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tjustify-content: center;\\n}\\n.icon[data-v-0f812b2d] {\\n\\theight: 64px;\\n\\twidth: 64px;\\n\\tmargin: 0 auto 15px;\\n\\tbackground-size: 64px;\\n\\topacity: 0.4;\\n}\\nh2[data-v-0f812b2d],\\np[data-v-0f812b2d] {\\n\\ttext-align: center;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/NoMessageSelected.vue\"],\"names\":[],\"mappings\":\";AAyCA;CACA,aAAA;CACA,sBAAA;CACA,uBAAA;AACA;AAEA;CACA,YAAA;CACA,WAAA;CACA,mBAAA;CACA,qBAAA;CACA,YAAA;AACA;AAEA;;CAEA,kBAAA;AACA\",\"sourcesContent\":[\"<!--\\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\\n  -\\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\\n  -\\n  - @license GNU AGPL version 3 or any later version\\n  -\\n  - This program is free software: you can redistribute it and/or modify\\n  - it under the terms of the GNU Affero General Public License as\\n  - published by the Free Software Foundation, either version 3 of the\\n  - License, or (at your option) any later version.\\n  -\\n  - This program is distributed in the hope that it will be useful,\\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n  - GNU Affero General Public License for more details.\\n  -\\n  - You should have received a copy of the GNU Affero General Public License\\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\\n  -->\\n\\n<template>\\n\\t<AppContentDetails>\\n\\t\\t<div class=\\\"icon icon-mail\\\" />\\n\\t\\t<h2>{{ t('mail', 'No message selected') }}</h2>\\n\\t\\t<p />\\n\\t</AppContentDetails>\\n</template>\\n\\n<script>\\nimport AppContentDetails from '@nextcloud/vue/dist/Components/AppContentDetails'\\n\\nexport default {\\n\\tname: 'NoMessageSelected',\\n\\tcomponents: {\\n\\t\\tAppContentDetails,\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n.app-content-details {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tjustify-content: center;\\n}\\n\\n.icon {\\n\\theight: 64px;\\n\\twidth: 64px;\\n\\tmargin: 0 auto 15px;\\n\\tbackground-size: 64px;\\n\\topacity: 0.4;\\n}\\n\\nh2,\\np {\\n\\ttext-align: center;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".user-bubble__title[data-v-06e00222]{max-width:30vw}.user-bubble-email[data-v-06e00222]{margin:10px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/RecipientBubble.vue\"],\"names\":[],\"mappings\":\"AA+FA,qCACC,cAAA,CAED,oCACC,WAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.user-bubble__title {\\n\\tmax-width: 30vw;\\n}\\n.user-bubble-email {\\n\\tmargin: 10px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.reservation[data-v-b2f6d4c0] {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tmargin: 30px 38px;\\n\\tborder: 1px solid var(--color-border);\\n\\tborder-radius: var(--border-radius);\\n\\tpadding: 20px;\\n\\talign-items: center;\\n}\\n.event[data-v-b2f6d4c0] {\\n\\tflex-grow: 1;\\n}\\n.event-name[data-v-b2f6d4c0] {\\n\\tfont-size: larger;\\n\\tfont-weight: bold;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/itinerary/EventReservation.vue\"],\"names\":[],\"mappings\":\";AAsJA;CACA,aAAA;CACA,mBAAA;CACA,iBAAA;CACA,qCAAA;CACA,mCAAA;CACA,aAAA;CACA,mBAAA;AACA;AAEA;CACA,YAAA;AACA;AAEA;CACA,iBAAA;CACA,iBAAA;AACA\",\"sourcesContent\":[\"<!--\\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\\n  -\\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\\n  -\\n  - @license GNU AGPL version 3 or any later version\\n  -\\n  - This program is free software: you can redistribute it and/or modify\\n  - it under the terms of the GNU Affero General Public License as\\n  - published by the Free Software Foundation, either version 3 of the\\n  - License, or (at your option) any later version.\\n  -\\n  - This program is distributed in the hope that it will be useful,\\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n  - GNU Affero General Public License for more details.\\n  -\\n  - You should have received a copy of the GNU Affero General Public License\\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\\n  -->\\n\\n<template>\\n\\t<div class=\\\"reservation\\\">\\n\\t\\t<div class=\\\"event\\\">\\n\\t\\t\\t<div class=\\\"event-name\\\">\\n\\t\\t\\t\\t{{ eventName }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"location\\\" class=\\\"venue\\\">\\n\\t\\t\\t\\t{{ location }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"date\\\">\\n\\t\\t\\t\\t{{ date }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"time\\\">\\n\\t\\t\\t\\t{{ time }}\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<CalendarImport v-if=\\\"canImport\\\" :calendars=\\\"calendars\\\" :handler=\\\"handleImport\\\" />\\n\\t</div>\\n</template>\\n\\n<script>\\nimport ical from 'ical.js'\\nimport md5 from 'md5'\\nimport moment from '@nextcloud/moment'\\nimport { showError, showSuccess } from '@nextcloud/dialogs'\\n\\nimport CalendarImport from './CalendarImport'\\nimport { importCalendarEvent } from '../../service/DAVService'\\nimport logger from '../../logger'\\n\\nexport default {\\n\\tname: 'EventReservation',\\n\\tcomponents: { CalendarImport },\\n\\tprops: {\\n\\t\\tdata: {\\n\\t\\t\\ttype: Object,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tcalendars: {\\n\\t\\t\\ttype: Array,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tmessageId: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t},\\n\\tcomputed: {\\n\\t\\teventName() {\\n\\t\\t\\treturn this.data.reservationFor.name\\n\\t\\t},\\n\\t\\ttime() {\\n\\t\\t\\tif (!('startDate' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(this.data.reservationFor.startDate).format('LT')\\n\\t\\t},\\n\\t\\tdate() {\\n\\t\\t\\tif (!('startDate' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(this.data.reservationFor.startDate).format('L')\\n\\t\\t},\\n\\t\\tlocation() {\\n\\t\\t\\tif (!('location' in this.data.reservationFor) || !('name' in this.data.reservationFor.location)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn this.data.reservationFor.location.name\\n\\t\\t},\\n\\t\\tcanImport() {\\n\\t\\t\\treturn 'startDate' in this.data.reservationFor\\n\\t\\t},\\n\\t},\\n\\tmethods: {\\n\\t\\tgetEndDateTime(event) {\\n\\t\\t\\tif ('endDate' in this.data.reservationFor) {\\n\\t\\t\\t\\treturn moment(this.data.reservationFor.endDate).format()\\n\\t\\t\\t} else {\\n\\t\\t\\t\\t// Assume it's 2h and user will adjust if necessary\\n\\t\\t\\t\\t// TODO: handle 'duration' https://schema.org/Event\\n\\t\\t\\t\\treturn moment('2019-10-22T12:00:00Z').add(2, 'hours').format()\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\thandleImport(calendar) {\\n\\t\\t\\tconst event = new ical.Component('VEVENT')\\n\\t\\t\\tevent.updatePropertyWithValue('SUMMARY', this.eventName)\\n\\n\\t\\t\\tconst start = moment(this.data.reservationFor.startDate).format()\\n\\t\\t\\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(start))\\n\\t\\t\\tevent.updatePropertyWithValue(\\n\\t\\t\\t\\t'DTEND',\\n\\t\\t\\t\\tical.Time.fromDateTimeString(this.getEndDateTime(this.data.reservationFor))\\n\\t\\t\\t)\\n\\n\\t\\t\\tif ('location' in this.data.reservationFor) {\\n\\t\\t\\t\\tevent.updatePropertyWithValue('LOCATION', this.data.reservationFor.location.name)\\n\\t\\t\\t\\tif ('geo' in this.data.reservationFor.location) {\\n\\t\\t\\t\\t\\t// https://www.kanzaki.com/docs/ical/geo.html\\n\\t\\t\\t\\t\\tevent.updatePropertyWithValue(\\n\\t\\t\\t\\t\\t\\t'GEO',\\n\\t\\t\\t\\t\\t\\t`${this.data.reservationFor.location.geo.latitude};${this.data.reservationFor.location.geo.longitude}`\\n\\t\\t\\t\\t\\t)\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\n\\t\\t\\t// TODO: read version from package.json\\n\\t\\t\\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\\n\\n\\t\\t\\t// TODO: is this free of collisions? the bug reports will tell us!\\n\\t\\t\\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.eventName))\\n\\n\\t\\t\\tconst cal = new ical.Component('VCALENDAR')\\n\\t\\t\\tcal.addSubcomponent(event)\\n\\t\\t\\tlogger.debug('generated calendar event from event reservation data', { ical: cal.toString() })\\n\\t\\t\\treturn importCalendarEvent(calendar.url)(cal.toString())\\n\\t\\t\\t\\t.then(() => {\\n\\t\\t\\t\\t\\tlogger.debug('event successfully imported')\\n\\t\\t\\t\\t\\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\t.catch((error) => {\\n\\t\\t\\t\\t\\tlogger.error('Could not import event', { error })\\n\\t\\t\\t\\t\\tshowError(t('mail', 'Could not create event'))\\n\\t\\t\\t\\t})\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n.reservation {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tmargin: 30px 38px;\\n\\tborder: 1px solid var(--color-border);\\n\\tborder-radius: var(--border-radius);\\n\\tpadding: 20px;\\n\\talign-items: center;\\n}\\n\\n.event {\\n\\tflex-grow: 1;\\n}\\n\\n.event-name {\\n\\tfont-size: larger;\\n\\tfont-weight: bold;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.reservation[data-v-670645fc] {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tmargin: 30px 38px;\\n\\tborder: 1px solid var(--color-border);\\n\\tborder-radius: var(--border-radius);\\n\\tpadding: 20px;\\n\\talign-items: center;\\n}\\n.departure[data-v-670645fc],\\n.arrival[data-v-670645fc] {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tflex-grow: 1;\\n}\\n.departure[data-v-670645fc],\\n.arrival[data-v-670645fc],\\n.connection[data-v-670645fc] {\\n\\tjustify-content: center;\\n}\\n.iata[data-v-670645fc] {\\n\\tfont-size: larger;\\n\\tfont-weight: bold;\\n}\\n.airport[data-v-670645fc] {\\n\\tfont-size: large;\\n}\\n.departure[data-v-670645fc] {\\n\\ttext-align: right;\\n}\\n.connection[data-v-670645fc] {\\n\\ttext-align: center;\\n\\tpadding: 0 40px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/itinerary/FlightReservation.vue\"],\"names\":[],\"mappings\":\";AA6JA;CACA,aAAA;CACA,mBAAA;CACA,iBAAA;CACA,qCAAA;CACA,mCAAA;CACA,aAAA;CACA,mBAAA;AACA;AAEA;;CAEA,aAAA;CACA,sBAAA;CACA,YAAA;AACA;AAEA;;;CAGA,uBAAA;AACA;AAEA;CACA,iBAAA;CACA,iBAAA;AACA;AAEA;CACA,gBAAA;AACA;AAEA;CACA,iBAAA;AACA;AAEA;CACA,kBAAA;CACA,eAAA;AACA\",\"sourcesContent\":[\"<template>\\n\\t<div class=\\\"reservation\\\">\\n\\t\\t<div class=\\\"departure\\\">\\n\\t\\t\\t<div class=\\\"iata\\\">\\n\\t\\t\\t\\t{{ data.reservationFor.departureAirport.iataCode }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div class=\\\"airport\\\">\\n\\t\\t\\t\\t{{ data.reservationFor.departureAirport.name }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"departureDate\\\">\\n\\t\\t\\t\\t{{ departureDate }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"departureTime\\\">\\n\\t\\t\\t\\t{{ departureTime }}\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<div class=\\\"connection\\\">\\n\\t\\t\\t<div><AirplaneIcon :title=\\\"t('mail', 'Airplane')\\\" /></div>\\n\\t\\t\\t<div>{{ flightNumber }}</div>\\n\\t\\t\\t<div v-if=\\\"reservation\\\">\\n\\t\\t\\t\\t{{ t('mail', 'Reservation {id}', {id: reservation}) }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-else>\\n\\t\\t\\t\\t<ArrowIcon decorative />\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<div class=\\\"arrival\\\">\\n\\t\\t\\t<div class=\\\"iata\\\">\\n\\t\\t\\t\\t{{ data.reservationFor.arrivalAirport.iataCode }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div class=\\\"airport\\\">\\n\\t\\t\\t\\t{{ data.reservationFor.arrivalAirport.name }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"arrivalDate\\\">\\n\\t\\t\\t\\t{{ arrivalDate }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"arrivalTime\\\">\\n\\t\\t\\t\\t{{ arrivalTime }}\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<CalendarImport :calendars=\\\"calendars\\\" :handler=\\\"handleImport\\\" />\\n\\t</div>\\n</template>\\n\\n<script>\\nimport AirplaneIcon from 'vue-material-design-icons/Airplane'\\nimport ArrowIcon from 'vue-material-design-icons/ArrowRight'\\nimport ical from 'ical.js'\\nimport md5 from 'md5'\\nimport moment from '@nextcloud/moment'\\nimport { showError, showSuccess } from '@nextcloud/dialogs'\\n\\nimport CalendarImport from './CalendarImport'\\nimport { importCalendarEvent } from '../../service/DAVService'\\nimport logger from '../../logger'\\n\\nexport default {\\n\\tname: 'FlightReservation',\\n\\tcomponents: {\\n\\t\\tAirplaneIcon,\\n\\t\\tArrowIcon,\\n\\t\\tCalendarImport,\\n\\t},\\n\\tprops: {\\n\\t\\tdata: {\\n\\t\\t\\ttype: Object,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tcalendars: {\\n\\t\\t\\ttype: Array,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tmessageId: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t},\\n\\tcomputed: {\\n\\t\\tdepartureTime() {\\n\\t\\t\\tif (!('departureTime' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(this.data.reservationFor.departureTime['@value']).format('LT')\\n\\t\\t},\\n\\t\\tdepartureDate() {\\n\\t\\t\\tif (!('departureTime' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(this.data.reservationFor.departureTime['@value']).format('L')\\n\\t\\t},\\n\\t\\tarrivalTime() {\\n\\t\\t\\tif (!('arrivalTime' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(this.data.reservationFor.arrivalTime['@value']).format('LT')\\n\\t\\t},\\n\\t\\tarrivalDate() {\\n\\t\\t\\tif (!('arrivalTime' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(this.data.reservationFor.arrivalTime['@value']).format('L')\\n\\t\\t},\\n\\t\\tflightNumber() {\\n\\t\\t\\treturn this.data.reservationFor.airline.iataCode + this.data.reservationFor.flightNumber\\n\\t\\t},\\n\\t\\treservation() {\\n\\t\\t\\tif (!('reservationNumber' in this.data)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn this.data.reservationNumber\\n\\t\\t},\\n\\t\\tcanImport() {\\n\\t\\t\\treturn 'departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor\\n\\t\\t},\\n\\t},\\n\\tmethods: {\\n\\t\\thandleImport(calendar) {\\n\\t\\t\\tconst event = new ical.Component('VEVENT')\\n\\t\\t\\tevent.updatePropertyWithValue(\\n\\t\\t\\t\\t'SUMMARY',\\n\\t\\t\\t\\tt('mail', 'Flight {flightNr} from {depAirport} to {arrAirport}', {\\n\\t\\t\\t\\t\\tflightNr: this.flightNumber,\\n\\t\\t\\t\\t\\tdepAirport: this.data.reservationFor.departureAirport.iataCode,\\n\\t\\t\\t\\t\\tarrAirport: this.data.reservationFor.arrivalAirport.iataCode,\\n\\t\\t\\t\\t})\\n\\t\\t\\t)\\n\\n\\t\\t\\tconst depart = moment(this.data.reservationFor.departureTime['@value']).format()\\n\\t\\t\\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(depart))\\n\\t\\t\\tconst arrive = moment(this.data.reservationFor.arrivalTime['@value']).format()\\n\\t\\t\\tevent.updatePropertyWithValue('DTEND', ical.Time.fromDateTimeString(arrive))\\n\\n\\t\\t\\t// TODO: read version from package.json\\n\\t\\t\\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\\n\\n\\t\\t\\t// TODO: is this free of collisions? the bug reports will tell us!\\n\\t\\t\\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.flightNumber))\\n\\n\\t\\t\\tconst cal = new ical.Component('VCALENDAR')\\n\\t\\t\\tcal.addSubcomponent(event)\\n\\t\\t\\tlogger.debug('generated calendar event from flight reservation data', { ical: cal.toString() })\\n\\n\\t\\t\\treturn importCalendarEvent(calendar.url)(cal.toString())\\n\\t\\t\\t\\t.then(() => {\\n\\t\\t\\t\\t\\tlogger.debug('event successfully imported')\\n\\t\\t\\t\\t\\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\t.catch((error) => {\\n\\t\\t\\t\\t\\tlogger.error('Could not import event', { error })\\n\\t\\t\\t\\t\\tshowError(t('mail', 'Could not create event'))\\n\\t\\t\\t\\t})\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n.reservation {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tmargin: 30px 38px;\\n\\tborder: 1px solid var(--color-border);\\n\\tborder-radius: var(--border-radius);\\n\\tpadding: 20px;\\n\\talign-items: center;\\n}\\n\\n.departure,\\n.arrival {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tflex-grow: 1;\\n}\\n\\n.departure,\\n.arrival,\\n.connection {\\n\\tjustify-content: center;\\n}\\n\\n.iata {\\n\\tfont-size: larger;\\n\\tfont-weight: bold;\\n}\\n\\n.airport {\\n\\tfont-size: large;\\n}\\n\\n.departure {\\n\\ttext-align: right;\\n}\\n\\n.connection {\\n\\ttext-align: center;\\n\\tpadding: 0 40px;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.reservation[data-v-1eebd676] {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tmargin: 30px 38px;\\n\\tborder: 1px solid var(--color-border);\\n\\tborder-radius: var(--border-radius);\\n\\tpadding: 20px;\\n\\talign-items: center;\\n}\\n.departure[data-v-1eebd676],\\n.arrival[data-v-1eebd676] {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tflex-grow: 1;\\n}\\n.departure[data-v-1eebd676],\\n.arrival[data-v-1eebd676],\\n.connection[data-v-1eebd676] {\\n\\tjustify-content: center;\\n}\\n.station[data-v-1eebd676] {\\n\\tfont-size: larger;\\n\\tfont-weight: bold;\\n}\\n.departure[data-v-1eebd676] {\\n\\ttext-align: right;\\n}\\n.connection[data-v-1eebd676] {\\n\\ttext-align: center;\\n\\tpadding: 0 40px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/itinerary/TrainReservation.vue\"],\"names\":[],\"mappings\":\";AAiKA;CACA,aAAA;CACA,mBAAA;CACA,iBAAA;CACA,qCAAA;CACA,mCAAA;CACA,aAAA;CACA,mBAAA;AACA;AAEA;;CAEA,aAAA;CACA,sBAAA;CACA,YAAA;AACA;AAEA;;;CAGA,uBAAA;AACA;AAEA;CACA,iBAAA;CACA,iBAAA;AACA;AAEA;CACA,iBAAA;AACA;AAEA;CACA,kBAAA;CACA,eAAA;AACA\",\"sourcesContent\":[\"<template>\\n\\t<div class=\\\"reservation\\\">\\n\\t\\t<div class=\\\"departure\\\">\\n\\t\\t\\t<div class=\\\"station\\\">\\n\\t\\t\\t\\t{{ data.reservationFor.departureStation.name }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"departureDate\\\">\\n\\t\\t\\t\\t{{ departureDate }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"departureTime\\\">\\n\\t\\t\\t\\t{{ departureTime }}\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<div class=\\\"connection\\\">\\n\\t\\t\\t<div><TrainIcon :title=\\\"t('mail', 'Train')\\\" /></div>\\n\\t\\t\\t<div>{{ trainNumber }}</div>\\n\\t\\t\\t<div><ArrowIcon decorative /></div>\\n\\t\\t</div>\\n\\t\\t<div class=\\\"arrival\\\">\\n\\t\\t\\t<div class=\\\"station\\\">\\n\\t\\t\\t\\t{{ data.reservationFor.arrivalStation.name }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"arrivalDate\\\">\\n\\t\\t\\t\\t{{ arrivalDate }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"arrivalTime\\\">\\n\\t\\t\\t\\t{{ arrivalTime }}\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<CalendarImport v-if=\\\"canImport\\\" :calendars=\\\"calendars\\\" :handler=\\\"handleImport\\\" />\\n\\t</div>\\n</template>\\n\\n<script>\\nimport ArrowIcon from 'vue-material-design-icons/ArrowRight'\\nimport ical from 'ical.js'\\nimport md5 from 'md5'\\nimport moment from '@nextcloud/moment'\\nimport { showError, showSuccess } from '@nextcloud/dialogs'\\nimport TrainIcon from 'vue-material-design-icons/Train'\\n\\nimport CalendarImport from './CalendarImport'\\nimport { importCalendarEvent } from '../../service/DAVService'\\nimport logger from '../../logger'\\n\\nexport default {\\n\\tname: 'TrainReservation',\\n\\tcomponents: {\\n\\t\\tArrowIcon,\\n\\t\\tCalendarImport,\\n\\t\\tTrainIcon,\\n\\t},\\n\\tprops: {\\n\\t\\tdata: {\\n\\t\\t\\ttype: Object,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tcalendars: {\\n\\t\\t\\ttype: Array,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tmessageId: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t},\\n\\tcomputed: {\\n\\t\\tdepartureTime() {\\n\\t\\t\\tif (!('departureTime' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(this.data.reservationFor.departureTime).format('LT')\\n\\t\\t},\\n\\t\\tdepartureDate() {\\n\\t\\t\\tif ('departureTime' in this.data.reservationFor) {\\n\\t\\t\\t\\treturn moment(this.data.reservationFor.departureTime).format('L')\\n\\t\\t\\t}\\n\\t\\t\\tif ('departureDay' in this.data.reservationFor) {\\n\\t\\t\\t\\treturn moment(this.data.reservationFor.departureDay).format('L')\\n\\t\\t\\t}\\n\\t\\t\\treturn undefined\\n\\t\\t},\\n\\t\\tarrivalTime() {\\n\\t\\t\\tif (!('arrivalTime' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(this.data.reservationFor.arrivalTime).format('LT')\\n\\t\\t},\\n\\t\\tarrivalDate() {\\n\\t\\t\\tif (!('arrivalTime' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(this.data.reservationFor.arrivalTime).format('L')\\n\\t\\t},\\n\\t\\ttrainNumber() {\\n\\t\\t\\treturn this.data.reservationFor.trainNumber\\n\\t\\t},\\n\\t\\tcanImport() {\\n\\t\\t\\treturn (\\n\\t\\t\\t\\t('departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor)\\n\\t\\t\\t\\t|| 'departureDay' in this.data.reservationFor\\n\\t\\t\\t)\\n\\t\\t},\\n\\t},\\n\\tmethods: {\\n\\t\\thandleImport(calendar) {\\n\\t\\t\\tconst event = new ical.Component('VEVENT')\\n\\t\\t\\tif ('trainNumber' in this.data.reservationFor) {\\n\\t\\t\\t\\tevent.updatePropertyWithValue(\\n\\t\\t\\t\\t\\t'SUMMARY',\\n\\t\\t\\t\\t\\tt('mail', '{trainNr} from {depStation} to {arrStation}', {\\n\\t\\t\\t\\t\\t\\ttrainNr: this.data.reservationFor.trainNumber,\\n\\t\\t\\t\\t\\t\\tdepStation: this.data.reservationFor.departureStation.name,\\n\\t\\t\\t\\t\\t\\tarrStation: this.data.reservationFor.arrivalStation.name,\\n\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t)\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tevent.updatePropertyWithValue(\\n\\t\\t\\t\\t\\t'SUMMARY',\\n\\t\\t\\t\\t\\tt('mail', 'Train from {depStation} to {arrStation}', {\\n\\t\\t\\t\\t\\t\\tdepStation: this.data.reservationFor.departureStation.name,\\n\\t\\t\\t\\t\\t\\tarrStation: this.data.reservationFor.arrivalStation.name,\\n\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t)\\n\\t\\t\\t}\\n\\n\\t\\t\\tif ('departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor) {\\n\\t\\t\\t\\tconst depart = moment(this.data.reservationFor.departureTime).format()\\n\\t\\t\\t\\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(depart))\\n\\t\\t\\t\\tconst arrive = moment(this.data.reservationFor.arrivalTime).format()\\n\\t\\t\\t\\tevent.updatePropertyWithValue('DTEND', ical.Time.fromDateTimeString(arrive))\\n\\t\\t\\t} else if ('departureDay' in this.data.reservationFor) {\\n\\t\\t\\t\\tconst date = moment(this.data.reservationFor.departureDay).format()\\n\\t\\t\\t\\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(date))\\n\\t\\t\\t}\\n\\n\\t\\t\\t// TODO: read version from package.json\\n\\t\\t\\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\\n\\n\\t\\t\\t// TODO: is this free of collisions? the bug reports will tell us!\\n\\t\\t\\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.departureTime))\\n\\n\\t\\t\\tconst cal = new ical.Component('VCALENDAR')\\n\\t\\t\\tcal.addSubcomponent(event)\\n\\t\\t\\tlogger.debug('generated calendar event from train reservation data', { ical: cal.toString() })\\n\\n\\t\\t\\treturn importCalendarEvent(calendar.url)(cal.toString())\\n\\t\\t\\t\\t.then(() => {\\n\\t\\t\\t\\t\\tlogger.debug('event successfully imported')\\n\\t\\t\\t\\t\\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\t.catch((error) => {\\n\\t\\t\\t\\t\\tlogger.error('Could not import event', { error })\\n\\t\\t\\t\\t\\tshowError(t('mail', 'Could not create event'))\\n\\t\\t\\t\\t})\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n.reservation {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tmargin: 30px 38px;\\n\\tborder: 1px solid var(--color-border);\\n\\tborder-radius: var(--border-radius);\\n\\tpadding: 20px;\\n\\talign-items: center;\\n}\\n\\n.departure,\\n.arrival {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tflex-grow: 1;\\n}\\n\\n.departure,\\n.arrival,\\n.connection {\\n\\tjustify-content: center;\\n}\\n\\n.station {\\n\\tfont-size: larger;\\n\\tfont-weight: bold;\\n}\\n\\n.departure {\\n\\ttext-align: right;\\n}\\n\\n.connection {\\n\\ttext-align: center;\\n\\tpadding: 0 40px;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".attachment[data-v-473b0a1e]{position:relative;display:inline-block;width:calc(100% - 32px);padding:16px}.attachment[data-v-473b0a1e]:hover,.attachment span[data-v-473b0a1e]:hover{background-color:var(--color-background-hover);cursor:pointer}.mail-attached-image[data-v-473b0a1e]{display:block;max-width:100%;border-radius:var(--border-radius);cursor:pointer}.mail-attached-image[data-v-473b0a1e]:hover{opacity:.8}.attachment-save-to-cloud[data-v-473b0a1e],.attachment-download[data-v-473b0a1e],.attachment-import[data-v-473b0a1e]{position:absolute;padding:21px;margin:0;bottom:6px;background-color:transparent;border-color:transparent}.attachment-save-to-cloud[data-v-473b0a1e]{right:0}.attachment-download[data-v-473b0a1e]{right:32px;opacity:.6}.attachment-import[data-v-473b0a1e]{right:64px}.attachment-import-popover[data-v-473b0a1e]{right:32px;top:42px}.attachment-import-popover[data-v-473b0a1e]::after{right:32px}.attachment-name[data-v-473b0a1e]{display:inline-block;width:calc(100% - 72px);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;vertical-align:middle}.attachment-size[data-v-473b0a1e]{-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)\\\";opacity:.5}.attachment-icon[data-v-473b0a1e]{vertical-align:middle;text-align:left}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MessageAttachment.vue\"],\"names\":[],\"mappings\":\"AAgMA,6BACC,iBAAA,CACA,oBAAA,CACA,uBAAA,CACA,YAAA,CAGD,2EAEC,8CAAA,CACA,cAAA,CAGD,sCACC,aAAA,CACA,cAAA,CACA,kCAAA,CACA,cAAA,CAED,4CACC,UAAA,CAGD,qHAGC,iBAAA,CACA,YAAA,CACA,QAAA,CACA,UAAA,CACA,4BAAA,CACA,wBAAA,CAGD,2CACC,OAAA,CAGD,sCACC,UAAA,CACA,UAAA,CAGD,oCACC,UAAA,CAGD,4CACC,UAAA,CACA,QAAA,CAGD,mDACC,UAAA,CAGD,kCACC,oBAAA,CACA,uBAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,qBAAA,CAID,kCACC,gEAAA,CACA,UAAA,CAGD,kCACC,qBAAA,CACA,eAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.attachment {\\n\\tposition: relative;\\n\\tdisplay: inline-block;\\n\\twidth: calc(100% - 32px);\\n\\tpadding: 16px;\\n}\\n\\n.attachment:hover,\\n.attachment span:hover {\\n\\tbackground-color: var(--color-background-hover);\\n\\tcursor: pointer;\\n}\\n\\n.mail-attached-image {\\n\\tdisplay: block;\\n\\tmax-width: 100%;\\n\\tborder-radius: var(--border-radius);\\n\\tcursor: pointer;\\n}\\n.mail-attached-image:hover {\\n\\topacity: 0.8;\\n}\\n\\n.attachment-save-to-cloud,\\n.attachment-download,\\n.attachment-import {\\n\\tposition: absolute;\\n\\tpadding: 21px;\\n\\tmargin: 0;\\n\\tbottom: 6px;\\n\\tbackground-color: transparent;\\n\\tborder-color: transparent;\\n}\\n\\n.attachment-save-to-cloud {\\n\\tright: 0;\\n}\\n\\n.attachment-download {\\n\\tright: 32px;\\n\\topacity: 0.6;\\n}\\n\\n.attachment-import {\\n\\tright: 64px;\\n}\\n\\n.attachment-import-popover {\\n\\tright: 32px;\\n\\ttop: 42px;\\n}\\n\\n.attachment-import-popover::after {\\n\\tright: 32px;\\n}\\n\\n.attachment-name {\\n\\tdisplay: inline-block;\\n\\twidth: calc(100% - 72px);\\n\\twhite-space: nowrap;\\n\\toverflow: hidden;\\n\\ttext-overflow: ellipsis;\\n\\tvertical-align: middle;\\n}\\n\\n/* show attachment size less prominent */\\n.attachment-size {\\n\\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=50)';\\n\\topacity: 0.5;\\n}\\n\\n.attachment-icon {\\n\\tvertical-align: middle;\\n\\ttext-align: left;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".attachments{width:300px}.attachments-button-wrapper{text-align:center}.attachments-save-to-cloud{display:inline-block;margin:16px;background-position:16px center;padding:12px;padding-left:44px}.oc-dialog{z-index:10000000}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MessageAttachments.vue\"],\"names\":[],\"mappings\":\"AA+HA,aACC,WAAA,CAKD,4BACC,iBAAA,CAED,2BACC,oBAAA,CACA,WAAA,CACA,+BAAA,CACA,YAAA,CACA,iBAAA,CAED,WACC,gBAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.attachments {\\n\\twidth: 300px;\\n}\\n\\n/* show icon + text for Download all button\\n\\t\\tas well as when there is only one attachment */\\n.attachments-button-wrapper {\\n\\ttext-align: center;\\n}\\n.attachments-save-to-cloud {\\n\\tdisplay: inline-block;\\n\\tmargin: 16px;\\n\\tbackground-position: 16px center;\\n\\tpadding: 12px;\\n\\tpadding-left: 44px;\\n}\\n.oc-dialog {\\n\\tz-index: 10000000;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".mail-message-has-mdn-request[data-v-3bf60f28]{white-space:normal}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MdnRequest.vue\"],\"names\":[],\"mappings\":\"AA4DA,+CACC,kBAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.mail-message-has-mdn-request {\\n\\twhite-space: normal;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n#mail-content[data-v-812ccd96] {\\n\\theight: 450px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MessageEncryptedBody.vue\"],\"names\":[],\"mappings\":\";AA8CA;CACA,aAAA;AACA\",\"sourcesContent\":[\"<template>\\n\\t<div>\\n\\t\\t<div v-if=\\\"mailvelope\\\" id=\\\"mail-content\\\">\\n\\t\\t\\t<MdnRequest :message=\\\"message\\\" />\\n\\t\\t</div>\\n\\t\\t<span v-else>{{ t('mail', 'This message is encrypted with PGP. Install Mailvelope to decrypt it.') }}</span>\\n\\t</div>\\n</template>\\n\\n<script>\\nimport { getMailvelope } from '../crypto/mailvelope'\\nimport MdnRequest from './MdnRequest'\\n\\nexport default {\\n\\tname: 'MessageEncryptedBody',\\n\\tcomponents: { MdnRequest },\\n\\tprops: {\\n\\t\\tbody: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tfrom: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\trequired: false,\\n\\t\\t\\tdefault: undefined,\\n\\t\\t},\\n\\t\\tmessage: {\\n\\t\\t\\trequired: true,\\n\\t\\t\\ttype: Object,\\n\\t\\t},\\n\\t},\\n\\tdata() {\\n\\t\\treturn {\\n\\t\\t\\tmailvelope: false,\\n\\t\\t}\\n\\t},\\n\\tasync mounted() {\\n\\t\\tthis.mailvelope = await getMailvelope()\\n\\t\\tthis.mailvelope.createDisplayContainer('#mail-content', this.body, undefined, {\\n\\t\\t\\tsenderAddress: this.from,\\n\\t\\t})\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n#mail-content {\\n\\theight: 450px;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"#mail-content[data-v-0970d385]{margin-left:48px;margin-top:2px;display:flex;flex-direction:column;height:100%;background-color:#fff}#mail-message-has-blocked-content[data-v-0970d385]{margin-left:8px}#message-container[data-v-0970d385]{flex:1;display:flex;background-color:#fff}#message-container.scroll[data-v-0970d385]{max-height:50vh;overflow-y:auto}[data-v-0970d385] .icon-toggle{background-image:var(--icon-toggle-000) !important}[data-v-0970d385] .action-item__menutoggle--with-title{background-color:var(--color-background-hover) !important}.message-frame[data-v-0970d385]{width:100%}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MessageHTMLBody.vue\"],\"names\":[],\"mappings\":\"AAoIA,+BACC,gBAAA,CACA,cAAA,CACA,YAAA,CACA,qBAAA,CACA,WAAA,CACA,qBAAA,CAED,mDACC,eAAA,CAGD,oCACC,MAAA,CACA,YAAA,CACA,qBAAA,CAGA,2CACC,eAAA,CACA,eAAA,CAGF,+BACC,kDAAA,CAED,uDACC,yDAAA,CAED,gCACC,UAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n// account for 8px margin on iframe body\\n#mail-content {\\n\\tmargin-left: 48px;\\n\\tmargin-top: 2px;\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\theight: 100%;\\n\\tbackground-color: #FFFFFF;\\n}\\n#mail-message-has-blocked-content {\\n\\tmargin-left: 8px;\\n}\\n\\n#message-container {\\n\\tflex: 1;\\n\\tdisplay: flex;\\n\\tbackground-color: #FFFFFF;\\n\\n\\t// TODO: collapse quoted text and remove inner scrollbar\\n\\t&.scroll {\\n\\t\\tmax-height: 50vh;\\n\\t\\toverflow-y: auto;\\n\\t}\\n}\\n::v-deep .icon-toggle {\\n\\tbackground-image: var(--icon-toggle-000) !important;\\n}\\n::v-deep .action-item__menutoggle--with-title {\\n\\tbackground-color: var(--color-background-hover) !important;\\n}\\n.message-frame {\\n\\twidth: 100%;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".quoted-text{color:var(--color-text-maxcontrast)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MessagePlainTextBody.vue\"],\"names\":[],\"mappings\":\"AAqEA,aACC,mCAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.quoted-text {\\n\\tcolor: var(--color-text-maxcontrast)\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"#mail-content[data-v-6bd2c088],.mail-signature[data-v-6bd2c088]{white-space:pre-wrap}.mail-signature[data-v-6bd2c088],.quoted[data-v-6bd2c088]{color:var(--color-text-maxcontrast)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MessagePlainTextBody.vue\"],\"names\":[],\"mappings\":\"AA0EA,gEACC,oBAAA,CAED,0DACC,mCAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n#mail-content, .mail-signature {\\n\\twhite-space: pre-wrap;\\n}\\n.mail-signature, .quoted {\\n\\tcolor: var(--color-text-maxcontrast)\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".v-popover>.trigger>.action-item[data-v-106a4f26]{border-radius:22px;background-color:var(--color-background-darker)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Message.vue\"],\"names\":[],\"mappings\":\"AA8GA,kDACC,kBAAA,CACA,+CAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.v-popover > .trigger > .action-item {\\n\\tborder-radius: 22px;\\n\\tbackground-color: var(--color-background-darker);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".sender[data-v-e711eb92]{margin-left:8px}.right[data-v-e711eb92]{display:flex;flex-direction:row;align-items:center;justify-content:flex-end;margin-left:10px;margin-right:22px;height:44px}.right .app-content-list-item-menu[data-v-e711eb92]{margin-left:4px}.right .timestamp[data-v-e711eb92]{margin-right:10px;font-size:small;white-space:nowrap;margin-bottom:0}.button[data-v-e711eb92]{color:var(--color-main-background)}.button[data-v-e711eb92]:not(.active):not(.primary){display:none}.button:not(.active):not(.primary).primary[data-v-e711eb92]{background-color:var(--color-primary);opacity:1;margin-bottom:0}.avatardiv[data-v-e711eb92]{display:inline-block;margin-bottom:-23px}.subject[data-v-e711eb92]{margin-left:8px;cursor:default}.envelope[data-v-e711eb92]{display:flex;flex-direction:column}.envelope--header[data-v-e711eb92]{display:flex;padding:10px;margin-bottom:3px;border-radius:var(--border-radius)}.envelope--header[data-v-e711eb92]:hover{background-color:var(--color-background-hover)}.left[data-v-e711eb92]{flex-grow:1}.icon-important[data-v-e711eb92]  path{fill:#fc0;stroke:var(--color-main-background);cursor:pointer}.icon-important.app-content-list-item-star[data-v-e711eb92]{background-image:none;position:absolute;opacity:1;width:16px;height:16px;margin-left:-1px;display:flex}.icon-important.app-content-list-item-star[data-v-e711eb92]:hover,.icon-important.app-content-list-item-star[data-v-e711eb92]:focus{opacity:.5}.app-content-list-item-star.icon-starred[data-v-e711eb92]{display:inline-block;position:absolute;margin-top:-2px;margin-left:27px;cursor:pointer}.left[data-v-e711eb92]:not(.seen){font-weight:bold}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/ThreadEnvelope.vue\"],\"names\":[],\"mappings\":\"AAgQA,yBACC,eAAA,CAGD,wBACC,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,wBAAA,CACA,gBAAA,CACA,iBAAA,CACA,WAAA,CAEA,oDACC,eAAA,CAGD,mCACC,iBAAA,CACA,eAAA,CACA,kBAAA,CACA,eAAA,CAGF,yBACC,kCAAA,CACA,oDACC,YAAA,CAEA,4DACC,qCAAA,CACA,SAAA,CACA,eAAA,CAKH,4BACC,oBAAA,CACA,mBAAA,CAED,0BACC,eAAA,CACA,cAAA,CAGD,2BACC,YAAA,CACA,qBAAA,CAGD,mCACC,YAAA,CACA,YAAA,CACA,iBAAA,CACA,kCAAA,CAEA,yCACC,8CAAA,CAGF,uBACC,WAAA,CAGA,uCACC,SAAA,CACA,mCAAA,CACA,cAAA,CAGD,4DACC,qBAAA,CACA,iBAAA,CACA,SAAA,CACA,UAAA,CACA,WAAA,CACA,gBAAA,CACA,YAAA,CAEA,oIAEC,UAAA,CAIH,0DACC,oBAAA,CACA,iBAAA,CACA,eAAA,CACA,gBAAA,CACA,cAAA,CAED,kCACC,gBAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.sender {\\n\\tmargin-left: 8px;\\n}\\n\\n.right {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\talign-items: center;\\n\\tjustify-content: flex-end;\\n\\tmargin-left: 10px;\\n\\tmargin-right: 22px;\\n\\theight: 44px;\\n\\n\\t.app-content-list-item-menu {\\n\\t\\tmargin-left: 4px;\\n\\t}\\n\\n\\t.timestamp {\\n\\t\\tmargin-right: 10px;\\n\\t\\tfont-size: small;\\n\\t\\twhite-space: nowrap;\\n\\t\\tmargin-bottom: 0;\\n\\t}\\n}\\n.button {\\n\\tcolor: var(--color-main-background);\\n\\t&:not(.active):not(.primary) {\\n\\t\\tdisplay: none;\\n\\n\\t\\t&.primary {\\n\\t\\t\\tbackground-color: var(--color-primary);\\n\\t\\t\\topacity: 1;\\n\\t\\t\\tmargin-bottom: 0;\\n\\n\\t\\t}\\n\\t}\\n}\\n.avatardiv {\\n\\tdisplay: inline-block;\\n\\tmargin-bottom: -23px;\\n}\\n.subject {\\n\\tmargin-left: 8px;\\n\\tcursor: default;\\n}\\n\\n.envelope {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n}\\n\\n.envelope--header {\\n\\tdisplay: flex;\\n\\tpadding: 10px;\\n\\tmargin-bottom: 3px;\\n\\tborder-radius: var(--border-radius);\\n\\n\\t&:hover {\\n\\t\\tbackground-color: var(--color-background-hover);\\n\\t}\\n}\\n.left {\\n\\tflex-grow: 1;\\n}\\n.icon-important {\\n\\t::v-deep path {\\n\\t\\tfill: #ffcc00;\\n\\t\\tstroke: var(--color-main-background);\\n\\t\\tcursor: pointer;\\n\\t}\\n\\n\\t&.app-content-list-item-star {\\n\\t\\tbackground-image: none;\\n\\t\\tposition: absolute;\\n\\t\\topacity: 1;\\n\\t\\twidth: 16px;\\n\\t\\theight: 16px;\\n\\t\\tmargin-left: -1px;\\n\\t\\tdisplay: flex;\\n\\n\\t\\t&:hover,\\n\\t\\t&:focus {\\n\\t\\t\\topacity: 0.5;\\n\\t\\t}\\n\\t}\\n}\\n.app-content-list-item-star.icon-starred {\\n\\tdisplay: inline-block;\\n\\tposition: absolute;\\n\\tmargin-top: -2px;\\n\\tmargin-left: 27px;\\n\\tcursor: pointer;\\n}\\n.left:not(.seen) {\\n\\tfont-weight: bold;\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"#mail-message{flex-grow:1}.mail-message-body{flex:1;margin-bottom:60px;position:relative}#mail-thread-header{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:30px 0;box-sizing:content-box !important;height:44px;width:100%;z-index:100;position:fixed;position:-webkit-sticky;position:sticky;top:var(--header-height);background:-webkit-linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255, 255, 255, 0));background:-o-linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255, 255, 255, 0));background:-moz-linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255, 255, 255, 0));background:linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255, 255, 255, 0))}#mail-thread-header-fields{width:0;padding-left:60px;flex:1 1 auto}#mail-thread-header-fields h2,#mail-thread-header-fields p{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-bottom:7px;margin-bottom:0}#mail-thread-header-fields .transparency{opacity:.6}#mail-thread-header-fields .transparency a{font-weight:bold}.attachment-popover{position:sticky;bottom:12px;text-align:center}.tooltip-inner{text-align:left}#mail-content,.mail-signature{margin:10px 38px 50px 60px}.mail-message-body-html #mail-content,.mail-message-body-html .mail-signature{margin-bottom:-44px}#mail-content iframe{width:100%}#show-images-text{display:none}#mail-content a,.mail-signature a{color:#07d;border-bottom:1px dotted #07d;text-decoration:none;word-wrap:break-word}.icon-reply-white,.icon-reply-all-white{height:44px;min-width:44px;margin:0;padding:9px 18px 10px 32px}@media only screen and (max-width: 600px){.action-label{display:none}}@media only screen and (min-width: 600px){.icon-reply-white,.icon-reply-all-white{background-position:12px center}}@media print{#mail-thread-header-fields{position:relative}#header,.app-navigation,#reply-composer,#forward-button,#mail-message-has-blocked-content,.app-content-list,.message-composer,.mail-message-attachments{display:none !important}.app-content{margin-left:0 !important}.mail-message-body{margin-bottom:0 !important}}.message-source{font-family:monospace;white-space:pre-wrap;user-select:text}.avatar-header{max-height:24px;overflow:hidden}.avatar-more{display:inline;background-color:var(--color-background-dark);padding:0px 0px 1px 1px;border-radius:10px;cursor:pointer}.avatar-hidden{visibility:hidden}.popover__wrapper{max-width:500px}.app-content-list-item-star.icon-starred{display:none}.user-bubble__wrapper{margin-right:4px}.user-bubble__title{cursor:pointer}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Thread.vue\"],\"names\":[],\"mappings\":\"AA4OA,cACC,WAAA,CAGD,mBACC,MAAA,CACA,kBAAA,CACA,iBAAA,CAGD,oBACC,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,kBAAA,CACA,cAAA,CAIA,iCAAA,CACA,WAAA,CACA,UAAA,CAEA,WAAA,CACA,cAAA,CACA,uBAAA,CACA,eAAA,CACA,wBAAA,CACA,0HAAA,CACA,qHAAA,CACA,uHAAA,CACA,kHAAA,CAGD,2BAEC,OAAA,CACA,iBAAA,CAEA,aAAA,CACA,2DAEC,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,kBAAA,CACA,eAAA,CAGD,yCACC,UAAA,CACA,2CACC,gBAAA,CAKH,oBACC,eAAA,CACA,WAAA,CACA,iBAAA,CAGD,eACC,eAAA,CAGD,8BACC,0BAAA,CAEA,8EACC,mBAAA,CAIF,qBACC,UAAA,CAGD,kBACC,YAAA,CAGD,kCAEC,UAAA,CACA,6BAAA,CACA,oBAAA,CACA,oBAAA,CAGD,wCAEC,WAAA,CACA,cAAA,CACA,QAAA,CACA,0BAAA,CAKD,0CACC,cACC,YAAA,CAAA,CAGF,0CACC,wCAEC,+BAAA,CAAA,CAIF,aACC,2BACC,iBAAA,CAGD,wJAQC,uBAAA,CAED,aACC,wBAAA,CAED,mBACC,0BAAA,CAAA,CAIF,gBACC,qBAAA,CACA,oBAAA,CACA,gBAAA,CAGD,eACC,eAAA,CACA,eAAA,CAED,aACC,cAAA,CACA,6CAAA,CACA,uBAAA,CACA,kBAAA,CACA,cAAA,CAED,eACC,iBAAA,CAED,kBACC,eAAA,CAGD,yCACC,YAAA,CAED,sBACC,gBAAA,CAED,oBACC,cAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n#mail-message {\\n\\tflex-grow: 1;\\n}\\n\\n.mail-message-body {\\n\\tflex: 1;\\n\\tmargin-bottom: 60px;\\n\\tposition: relative;\\n}\\n\\n#mail-thread-header {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tjustify-content: space-between;\\n\\talign-items: center;\\n\\tpadding: 30px 0;\\n\\t// somehow ios doesn't care about this !important rule\\n\\t// so we have to manually set left/right padding to chidren\\n\\t// for 100% to be used\\n\\tbox-sizing: content-box !important;\\n\\theight: 44px;\\n\\twidth: 100%;\\n\\n\\tz-index: 100;\\n\\tposition: fixed; // ie fallback\\n\\tposition: -webkit-sticky; // ios/safari fallback\\n\\tposition: sticky;\\n\\ttop: var(--header-height);\\n\\tbackground: -webkit-linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255,255,255,0));\\n\\tbackground: -o-linear-gradient(var(--color-main-background), var(--color-main-background)  80%, rgba(255,255,255,0));\\n\\tbackground: -moz-linear-gradient(var(--color-main-background), var(--color-main-background)  80%, rgba(255,255,255,0));\\n\\tbackground: linear-gradient(var(--color-main-background), var(--color-main-background)  80%, rgba(255,255,255,0));\\n}\\n\\n#mail-thread-header-fields {\\n\\t// initial width\\n\\twidth: 0;\\n\\tpadding-left: 60px;\\n\\t// grow and try to fill 100%\\n\\tflex: 1 1 auto;\\n\\th2,\\n\\tp {\\n\\t\\twhite-space: nowrap;\\n\\t\\toverflow: hidden;\\n\\t\\ttext-overflow: ellipsis;\\n\\t\\tpadding-bottom: 7px;\\n\\t\\tmargin-bottom: 0;\\n\\t}\\n\\n\\t.transparency {\\n\\t\\topacity: 0.6;\\n\\t\\ta {\\n\\t\\t\\tfont-weight: bold;\\n\\t\\t}\\n\\t}\\n}\\n\\n.attachment-popover {\\n\\tposition: sticky;\\n\\tbottom: 12px;\\n\\ttext-align: center;\\n}\\n\\n.tooltip-inner {\\n\\ttext-align: left;\\n}\\n\\n#mail-content, .mail-signature {\\n\\tmargin: 10px 38px 50px 60px;\\n\\n\\t.mail-message-body-html & {\\n\\t\\tmargin-bottom: -44px; // accounting for the sticky attachment button\\n\\t}\\n}\\n\\n#mail-content iframe {\\n\\twidth: 100%;\\n}\\n\\n#show-images-text {\\n\\tdisplay: none;\\n}\\n\\n#mail-content a,\\n.mail-signature a {\\n\\tcolor: #07d;\\n\\tborder-bottom: 1px dotted #07d;\\n\\ttext-decoration: none;\\n\\tword-wrap: break-word;\\n}\\n\\n.icon-reply-white,\\n.icon-reply-all-white {\\n\\theight: 44px;\\n\\tmin-width: 44px;\\n\\tmargin: 0;\\n\\tpadding: 9px 18px 10px 32px;\\n}\\n\\n/* Show action button label and move icon to the left\\n   on screens larger than 600px */\\n@media only screen and (max-width: 600px) {\\n\\t.action-label {\\n\\t\\tdisplay: none;\\n\\t}\\n}\\n@media only screen and (min-width: 600px) {\\n\\t.icon-reply-white,\\n\\t.icon-reply-all-white {\\n\\t\\tbackground-position: 12px center;\\n\\t}\\n}\\n\\n@media print {\\n\\t#mail-thread-header-fields {\\n\\t\\tposition: relative;\\n\\t}\\n\\n\\t#header,\\n\\t.app-navigation,\\n\\t#reply-composer,\\n\\t#forward-button,\\n\\t#mail-message-has-blocked-content,\\n\\t.app-content-list,\\n\\t.message-composer,\\n\\t.mail-message-attachments {\\n\\t\\tdisplay: none !important;\\n\\t}\\n\\t.app-content {\\n\\t\\tmargin-left: 0 !important;\\n\\t}\\n\\t.mail-message-body {\\n\\t\\tmargin-bottom: 0 !important;\\n\\t}\\n}\\n\\n.message-source {\\n\\tfont-family: monospace;\\n\\twhite-space: pre-wrap;\\n\\tuser-select: text;\\n}\\n\\n.avatar-header {\\n\\tmax-height: 24px;\\n\\toverflow: hidden;\\n}\\n.avatar-more {\\n\\tdisplay: inline;\\n\\tbackground-color: var(--color-background-dark);\\n\\tpadding: 0px 0px 1px 1px;\\n\\tborder-radius: 10px;\\n\\tcursor: pointer;\\n}\\n.avatar-hidden {\\n\\tvisibility: hidden;\\n}\\n.popover__wrapper {\\n\\tmax-width: 500px;\\n}\\n\\n.app-content-list-item-star.icon-starred {\\n\\tdisplay: none;\\n}\\n.user-bubble__wrapper {\\n\\tmargin-right: 4px;\\n}\\n.user-bubble__title {\\n\\tcursor: pointer;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".v-popover>.trigger[data-v-04cb845c]>{z-index:1}.icon-info[data-v-04cb845c]{background-image:var(--icon-info-000)}.important-info[data-v-04cb845c]{max-width:230px;padding:16px}.app-content-list-item[data-v-04cb845c]:hover{background:transparent}.button[data-v-04cb845c]{background-color:var(--color-main-background);width:44px;height:44px;border:0;margin-bottom:17px}.button[data-v-04cb845c]:hover,.button[data-v-04cb845c]:focus{background-color:var(--color-background-dark)}#app-content-wrapper[data-v-04cb845c]{display:flex}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MailboxThread.vue\"],\"names\":[],\"mappings\":\"AAmLA,sCACC,SAAA,CAGD,4BACC,qCAAA,CAGD,iCACC,eAAA,CACA,YAAA,CAGD,8CACC,sBAAA,CAGD,yBACC,6CAAA,CACA,UAAA,CACA,WAAA,CACA,QAAA,CACA,kBAAA,CAEA,8DAEC,6CAAA,CAIF,sCACC,YAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.v-popover > .trigger > {\\n\\tz-index: 1;\\n}\\n\\n.icon-info {\\n\\tbackground-image: var(--icon-info-000);\\n}\\n\\n.important-info {\\n\\tmax-width: 230px;\\n\\tpadding: 16px;\\n}\\n\\n.app-content-list-item:hover {\\n\\tbackground: transparent;\\n}\\n\\n.button {\\n\\tbackground-color: var(--color-main-background);\\n\\twidth: 44px;\\n\\theight: 44px;\\n\\tborder: 0;\\n\\tmargin-bottom: 17px;\\n\\n\\t&:hover,\\n\\t&:focus {\\n\\t\\tbackground-color: var(--color-background-dark);\\n\\t}\\n}\\n\\n#app-content-wrapper {\\n\\tdisplay: flex;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"[data-v-7d3f4b94] .app-content #app-content-wrapper .app-content-details{margin:0 auto;max-width:900px;display:flex;flex-direction:column;flex:1 1 100%;min-width:0}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/views/Home.vue\"],\"names\":[],\"mappings\":\"AAsHA,yEACC,aAAA,CACA,eAAA,CACA,YAAA,CACA,qBAAA,CACA,aAAA,CACA,WAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n::v-deep .app-content #app-content-wrapper .app-content-details {\\n\\tmargin: 0 auto;\\n\\tmax-width: 900px;\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tflex: 1 1 100%;\\n\\tmin-width: 0;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Content',{directives:[{name:\"shortkey\",rawName:\"v-shortkey.once\",value:(['c']),expression:\"['c']\",modifiers:{\"once\":true}}],attrs:{\"app-name\":\"mail\"},nativeOn:{\"shortkey\":function($event){return _vm.onNewMessage($event)}}},[(_vm.isMobile && _vm.isThreadShown)?_c('AppDetailsToggle',{on:{\"close\":_vm.hideMessage}}):_vm._e(),_vm._v(\" \"),_c('Navigation'),_vm._v(\" \"),(_vm.activeAccount)?_c('MailboxThread',{attrs:{\"account\":_vm.activeAccount,\"mailbox\":_vm.activeMailbox}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppDetailsToggle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppDetailsToggle.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div v-if=\"isMobile\"\n\t\tclass=\"toggle icon-confirm\"\n\t\ttabindex=\"0\"\n\t\t@click=\"$emit('close')\" />\n</template>\n\n<script>\nimport isMobile from '@nextcloud/vue/dist/Mixins/isMobile'\n\nexport default {\n\tname: 'AppDetailsToggle',\n\tmixins: [isMobile],\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.toggle {\n\tposition: fixed;\n\twidth: 44px;\n\theight: 44px;\n\tpadding: 14px;\n\tcursor: pointer;\n\topacity: .6;\n\tfont-size: 16px;\n\tline-height: 17px;\n\ttransform: rotate(180deg);\n\tbackground-color: var(--color-main-background);\n\tz-index: 1100; // needs to be above the main content(1000) and below the navigation(1800)\n\n\t&:active,\n\t&:hover,\n\t&:focus {\n\t\topacity: 1;\n\t}\n\n\t// Hide app navigation toggle in case we are on mobile and have the back arrow visible\n\t&::v-deep + .app-navigation--close .app-navigation-toggle {\n\t\tdisplay: none;\n\t}\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppDetailsToggle.vue?vue&type=style&index=0&id=46075dda&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./AppDetailsToggle.vue?vue&type=template&id=46075dda&scoped=true&\"\nimport script from \"./AppDetailsToggle.vue?vue&type=script&lang=js&\"\nexport * from \"./AppDetailsToggle.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AppDetailsToggle.vue?vue&type=style&index=0&id=46075dda&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"46075dda\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.isMobile)?_c('div',{staticClass:\"toggle icon-confirm\",attrs:{\"tabindex\":\"0\"},on:{\"click\":function($event){return _vm.$emit('close')}}}):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SectionTitle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SectionTitle.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2020 Greta Doçi <gretadoci@gmail.com>\n  -\n  - @author 2020 Greta Doçi <gretadoci@gmail.com>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div id=\"priority\">\n\t\t<div class=\"app-content-list-item\">\n\t\t\t<h2>{{ name }}</h2>\n\t\t</div>\n\t</div>\n</template>\n<script>\nexport default {\n\tname: 'SectionTitle',\n\tprops: {\n\t\tname: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n#priority {\n\tdisplay: inline-block;\n}\n.app-content-list-item:hover {\n\tbackground-color: transparent;\n\topacity: 0.8;\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SectionTitle.vue?vue&type=style&index=0&id=95f06344&scoped=true&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./SectionTitle.vue?vue&type=template&id=95f06344&scoped=true&\"\nimport script from \"./SectionTitle.vue?vue&type=script&lang=js&\"\nexport * from \"./SectionTitle.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SectionTitle.vue?vue&type=style&index=0&id=95f06344&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"95f06344\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"priority\"}},[_c('div',{staticClass:\"app-content-list-item\"},[_c('h2',[_vm._v(_vm._s(_vm.name))])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmptyMailbox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmptyMailbox.vue?vue&type=script&lang=js&\"","<template>\n\t<div id=\"emptycontent\">\n\t\t<div class=\"icon-mail\" />\n\t\t<h2>{{ t('mail', 'No messages in this mailbox') }}</h2>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tname: 'EmptyMailbox',\n}\n</script>\n","import { render, staticRenderFns } from \"./EmptyMailbox.vue?vue&type=template&id=c9ba26fa&\"\nimport script from \"./EmptyMailbox.vue?vue&type=script&lang=js&\"\nexport * from \"./EmptyMailbox.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"emptycontent\"}},[_c('div',{staticClass:\"icon-mail\"}),_vm._v(\" \"),_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'No messages in this mailbox')))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport moment from '@nextcloud/moment'\nimport negate from 'lodash/fp/negate'\n\nimport { html } from './util/text'\n\n/**\n * @param {Text} original original\n * @param {object} from from\n * @param {Number} date date\n * @param {boolean} replyOnTop put reply on top?\n * @returns {Text}\n */\nexport const buildReplyBody = (original, from, date, replyOnTop = true) => {\n\tconst startEnd = '<p></p><p></p>'\n\tconst plainBody = '<br>&gt; ' + original.value.replace(/\\n/g, '<br>&gt; ')\n\tconst htmlBody = `<blockquote>${original.value}</blockquote>`\n\n\tswitch (original.format) {\n\tcase 'plain':\n\t\tif (from) {\n\t\t\tconst dateString = moment.unix(date).format('LLL')\n\t\t\treturn replyOnTop\n\t\t\t\t? html(`${startEnd}\"${from.label}\" ${from.email} – ${dateString}` + plainBody)\n\t\t\t\t: html(`\"${from.label}\" ${from.email} – ${dateString}` + plainBody + startEnd)\n\t\t} else {\n\t\t\treturn replyOnTop\n\t\t\t\t? html(`${startEnd}${plainBody}`)\n\t\t\t\t: html(`${plainBody}${startEnd}`)\n\t\t}\n\tcase 'html':\n\t\tif (from) {\n\t\t\tconst dateString = moment.unix(date).format('LLL')\n\t\t\treturn replyOnTop\n\t\t\t\t? html(`${startEnd}\"${from.label}\" ${from.email} – ${dateString}<br>${htmlBody}`)\n\t\t\t\t: html(`\"${from.label}\" ${from.email} – ${dateString}<br>${htmlBody}${startEnd}`)\n\t\t} else {\n\t\t\treturn replyOnTop\n\t\t\t\t? html(`${startEnd}${htmlBody}`)\n\t\t\t\t: html(`${htmlBody}${startEnd}`)\n\t\t}\n\t}\n\n\tthrow new Error(`can't build a reply for the format ${original.format}`)\n}\n\nconst RecipientType = Object.seal({\n\tNone: 0,\n\tTo: 1,\n\tCc: 2,\n})\n\nexport const buildRecipients = (envelope, ownAddress) => {\n\tlet recipientType = RecipientType.None\n\tconst isOwnAddress = (a) => a.email === ownAddress.email\n\tconst isNotOwnAddress = negate(isOwnAddress)\n\n\t// Locate why we received this envelope\n\t// Can be in 'to', 'cc' or unknown\n\tlet replyingAddress = envelope.to.find(isOwnAddress)\n\tif (replyingAddress !== undefined) {\n\t\trecipientType = RecipientType.To\n\t} else {\n\t\treplyingAddress = envelope.cc.find(isOwnAddress)\n\t\tif (replyingAddress !== undefined) {\n\t\t\trecipientType = RecipientType.Cc\n\t\t} else {\n\t\t\treplyingAddress = ownAddress\n\t\t}\n\t}\n\n\tlet to = []\n\tlet cc = []\n\tif (recipientType === RecipientType.To) {\n\t\t// Send to everyone except yourself, plus the original sender if not ourself\n\t\tto = envelope.to.filter(isNotOwnAddress)\n\t\tto = to.concat(envelope.from.filter(isNotOwnAddress))\n\n\t\t// CC remains the same\n\t\tcc = envelope.cc\n\t} else if (recipientType === RecipientType.Cc) {\n\t\t// Send to the same people, plus the sender if not ourself\n\t\tto = envelope.to.concat(envelope.from.filter(isNotOwnAddress))\n\n\t\t// All CC values are being kept except the replying address\n\t\tcc = envelope.cc.filter(isNotOwnAddress)\n\t} else {\n\t\t// Send to the same recipient and the sender (if not ourself) -> answer all\n\t\tto = envelope.to\n\t\tto = to.concat(envelope.from.filter(isNotOwnAddress))\n\n\t\t// Keep CC values\n\t\tcc = envelope.cc\n\t}\n\n\t// edge case: pure self-sent email\n\tif (to.length === 0) {\n\t\tto = envelope.from\n\t}\n\n\treturn {\n\t\tto,\n\t\tfrom: replyingAddress ? [replyingAddress] : [],\n\t\tcc,\n\t}\n}\n\nconst replyPrepends = [\n\t'antw',\n\t'atb',\n\t'aw',\n\t'bls',\n\t'odp',\n\t'r',\n\t're',\n\t'ref',\n\t'res',\n\t'rif',\n\t'sv',\n\t'vá',\n\t'vs',\n\t'ynt',\n\t'απ',\n\t'σχετ',\n\t'השב',\n\t'回复',\n\t'回覆',\n]\n\n/*\n * Ref https://tools.ietf.org/html/rfc5322#section-3.6.5\n */\nexport const buildReplySubject = (original) => {\n\tif (replyPrepends.some((prepend) => original.toLowerCase().startsWith(`${prepend}:`))) {\n\t\treturn original\n\t}\n\n\treturn `Re: ${original}`\n}\n\n// TODO: https://en.wikipedia.org/wiki/List_of_email_subject_abbreviations#Abbreviations_in_other_languages\nconst forwardPrepends = [\n\t'doorst',\n\t'enc',\n\t'fs',\n\t'fw',\n\t'fwd',\n\t'i',\n\t'i̇lt',\n\t'pd',\n\t'rv',\n\t'továbbítás',\n\t'tr',\n\t'trs',\n\t'vb',\n\t'vl',\n\t'vs',\n\t'wg',\n\t'yml',\n\t'ΠΡΘ',\n\t'הועבר',\n\t'إعادة توجيه',\n\t'رد',\n\t'轉寄',\n\t'转发',\n]\n\nexport const buildForwardSubject = (original) => {\n\tif (forwardPrepends.some((prepend) => original.toLowerCase().startsWith(`${prepend}:`))) {\n\t\treturn original\n\t}\n\n\treturn `Fwd: ${original}`\n}\n","<template>\n\t<MailboxPicker :account=\"account\"\n\t\t:selected.sync=\"destMailboxId\"\n\t\t:loading=\"moving\"\n\t\t:label-select=\"t('mail', 'Move')\"\n\t\t:label-select-loading=\"t('mail', 'Moving')\"\n\t\t@select=\"onMove\"\n\t\t@close=\"onClose\" />\n</template>\n\n<script>\nimport logger from '../logger'\nimport MailboxPicker from './MailboxPicker'\n\nexport default {\n\tname: 'MoveModal',\n\tcomponents: {\n\t\tMailboxPicker,\n\t},\n\tprops: {\n\t\taccount: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tenvelopes: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tmoving: false,\n\t\t\tdestMailboxId: undefined,\n\t\t}\n\t},\n\tmethods: {\n\t\tonClose() {\n\t\t\tthis.$emit('close')\n\t\t},\n\t\tasync onMove() {\n\t\t\tthis.moving = true\n\n\t\t\ttry {\n\t\t\t\tconst envelopeIds = this.envelopes\n\t\t\t\t\t.filter((envelope) => envelope.mailboxId !== this.destMailboxId)\n\t\t\t\t\t.map((envelope) => envelope.databaseId)\n\n\t\t\t\tif (envelopeIds.length === 0) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tawait Promise.all(envelopeIds.map((id) => this.$store.dispatch('moveMessage', {\n\t\t\t\t\tid,\n\t\t\t\t\tdestMailboxId: this.destMailboxId,\n\t\t\t\t})))\n\n\t\t\t\tawait this.$store.dispatch('syncEnvelopes', { mailboxId: this.destMailboxId })\n\t\t\t\tthis.$emit('move')\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not move messages', {\n\t\t\t\t\terror,\n\t\t\t\t})\n\t\t\t} finally {\n\t\t\t\tthis.moving = false\n\t\t\t\tthis.$emit('close')\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MoveModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MoveModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MoveModal.vue?vue&type=template&id=1f14177d&\"\nimport script from \"./MoveModal.vue?vue&type=script&lang=js&\"\nexport * from \"./MoveModal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('MailboxPicker',{attrs:{\"account\":_vm.account,\"selected\":_vm.destMailboxId,\"loading\":_vm.moving,\"label-select\":_vm.t('mail', 'Move'),\"label-select-loading\":_vm.t('mail', 'Moving')},on:{\"update:selected\":function($event){_vm.destMailboxId=$event},\"select\":_vm.onMove,\"close\":_vm.onClose}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- Standard Actions menu for Envelopes -->\n<template>\n\t<div>\n\t\t<Actions\n\t\t\tmenu-align=\"right\"\n\t\t\tevent=\"\"\n\t\t\t@click.native.prevent>\n\t\t\t<ActionRouter v-if=\"withReply\"\n\t\t\t\t:icon=\"hasMultipleRecipients ? 'icon-reply-all' : 'icon-reply'\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t:to=\"hasMultipleRecipients ? replyAllLink : replyOneLink\">\n\t\t\t\t{{ t('mail', 'Reply') }}\n\t\t\t</ActionRouter>\n\t\t\t<ActionRouter v-if=\"hasMultipleRecipients\"\n\t\t\t\ticon=\"icon-reply\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t:to=\"replyOneLink\">\n\t\t\t\t{{ t('mail', 'Reply to sender only') }}\n\t\t\t</ActionRouter>\n\t\t\t<ActionRouter icon=\"icon-forward\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t:to=\"forwardLink\">\n\t\t\t\t{{ t('mail', 'Forward') }}\n\t\t\t</ActionRouter>\n\t\t\t<ActionRouter icon=\"icon-add\"\n\t\t\t\t:to=\"{\n\t\t\t\t\tname: 'message',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tmailboxId: $route.params.mailboxId,\n\t\t\t\t\t\tthreadId: 'asNew',\n\t\t\t\t\t\tfilter: $route.params.filter,\n\t\t\t\t\t},\n\t\t\t\t\tquery: {\n\t\t\t\t\t\tmessageId: envelope.databaseId,\n\t\t\t\t\t},\n\t\t\t\t}\">\n\t\t\t\t{{ t('mail', 'Edit as new message') }}\n\t\t\t</ActionRouter>\n\t\t\t<ActionButton icon=\"icon-important\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t@click.prevent=\"onToggleImportant\">\n\t\t\t\t{{\n\t\t\t\t\tenvelope.flags.important ? t('mail', 'Mark unimportant') : t('mail', 'Mark important')\n\t\t\t\t}}\n\t\t\t</ActionButton>\n\t\t\t<ActionButton :icon=\"iconFavorite\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t@click.prevent=\"onToggleFlagged\">\n\t\t\t\t{{\n\t\t\t\t\tenvelope.flags.flagged ? t('mail', 'Mark unfavorite') : t('mail', 'Mark favorite')\n\t\t\t\t}}\n\t\t\t</ActionButton>\n\t\t\t<ActionButton icon=\"icon-mail\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t@click.prevent=\"onToggleSeen\">\n\t\t\t\t{{\n\t\t\t\t\tenvelope.flags.seen ? t('mail', 'Mark unread') : t('mail', 'Mark read')\n\t\t\t\t}}\n\t\t\t</ActionButton>\n\t\t\t<ActionButton icon=\"icon-junk\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t@click.prevent=\"onToggleJunk\">\n\t\t\t\t{{\n\t\t\t\t\tenvelope.flags.junk ? t('mail', 'Mark not spam') : t('mail', 'Mark as spam')\n\t\t\t\t}}\n\t\t\t</ActionButton>\n\t\t\t<ActionButton v-if=\"withSelect\"\n\t\t\t\ticon=\"icon-checkmark\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t@click.prevent=\"toggleSelected\">\n\t\t\t\t{{\n\t\t\t\t\tisSelected ? t('mail', 'Unselect') : t('mail', 'Select')\n\t\t\t\t}}\n\t\t\t</ActionButton>\n\t\t\t<ActionButton icon=\"icon-external\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t@click.prevent=\"onOpenMoveModal\">\n\t\t\t\t{{ t('mail', 'Move') }}\n\t\t\t</ActionButton>\n\t\t\t<ActionButton v-if=\"withShowSource\"\n\t\t\t\t:icon=\"sourceLoading ? 'icon-loading-small' : 'icon-details'\"\n\t\t\t\t:disabled=\"sourceLoading\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t@click.prevent=\"onShowSourceModal\">\n\t\t\t\t{{ t('mail', 'View source') }}\n\t\t\t</ActionButton>\n\t\t\t<ActionLink v-if=\"debug\"\n\t\t\t\ticon=\"icon-download\"\n\t\t\t\t:download=\"threadingFileName\"\n\t\t\t\t:href=\"threadingFile\"\n\t\t\t\t:close-after-click=\"true\">\n\t\t\t\t{{ t('mail', 'Download thread data for debugging') }}\n\t\t\t</ActionLink>\n\t\t\t<ActionButton icon=\"icon-delete\"\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t@click.prevent=\"onDelete\">\n\t\t\t\t{{ t('mail', 'Delete') }}\n\t\t\t</ActionButton>\n\t\t</Actions>\n\t\t<Modal v-if=\"showSourceModal\" class=\"source-modal\" @close=\"onCloseSourceModal\">\n\t\t\t<div class=\"source-modal-content\">\n\t\t\t\t<div class=\"section\">\n\t\t\t\t\t<h2>{{ t('mail', 'Message source') }}</h2>\n\t\t\t\t\t<pre class=\"message-source\">{{ rawMessage }}</pre>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Modal>\n\t\t<MoveModal v-if=\"showMoveModal\"\n\t\t\t:account=\"account\"\n\t\t\t:envelopes=\"[envelope]\"\n\t\t\t@move=\"onMove\"\n\t\t\t@close=\"onCloseMoveModal\" />\n\t</div>\n</template>\n\n<script>\nimport axios from '@nextcloud/axios'\nimport Actions from '@nextcloud/vue/dist/Components/Actions'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\nimport ActionLink from '@nextcloud/vue/dist/Components/ActionLink'\nimport ActionRouter from '@nextcloud/vue/dist/Components/ActionRouter'\nimport { Base64 } from 'js-base64'\nimport { buildRecipients as buildReplyRecipients } from '../ReplyBuilder'\nimport { generateUrl } from '@nextcloud/router'\nimport logger from '../logger'\nimport { matchError } from '../errors/match'\nimport Modal from '@nextcloud/vue/dist/Components/Modal'\nimport MoveModal from './MoveModal'\nimport NoTrashMailboxConfiguredError from '../errors/NoTrashMailboxConfiguredError'\nimport { showError } from '@nextcloud/dialogs'\n\nexport default {\n\tname: 'MenuEnvelope',\n\tcomponents: {\n\t\tActions,\n\t\tActionButton,\n\t\tActionLink,\n\t\tActionRouter,\n\t\tModal,\n\t\tMoveModal,\n\t},\n\tprops: {\n\t\tenvelope: {\n\t\t\t// The envelope on which this menu will act\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tmailbox: {\n\t\t\t// It is just used to get the accountId when envelope doesn't have it\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: undefined,\n\t\t},\n\t\tisSelected: {\n\t\t\t// Indicates if the envelope is currently selected\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\twithReply: {\n\t\t\t// \"Reply\" action should only appear in envelopes from the envelope list\n\t\t\t// (Because in thread envelopes, this action is already set as primary button of this menu)\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithSelect: {\n\t\t\t// \"Select\" action should only appear in envelopes from the envelope list\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithShowSource: {\n\t\t\t// \"Show source\" action should only appear in thread envelopes\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tdebug: window?.OC?.debug || false,\n\t\t\trawMessage: '', // Will hold the raw source of the message when requested\n\t\t\tsourceLoading: false,\n\t\t\tshowSourceModal: false,\n\t\t\tshowMoveModal: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\taccount() {\n\t\t\tconst accountId = this.envelope.accountId ?? this.mailbox.accountId\n\t\t\treturn this.$store.getters.getAccount(accountId)\n\t\t},\n\t\thasMultipleRecipients() {\n\t\t\tif (!this.account) {\n\t\t\t\tconsole.error('account is undefined', {\n\t\t\t\t\taccountId: this.envelope.accountId,\n\t\t\t\t})\n\t\t\t}\n\t\t\tconst recipients = buildReplyRecipients(this.envelope, {\n\t\t\t\tlabel: this.account.name,\n\t\t\t\temail: this.account.emailAddress,\n\t\t\t})\n\t\t\treturn recipients.to.concat(recipients.cc).length > 1\n\t\t},\n\t\treplyOneLink() {\n\t\t\treturn {\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\tthreadId: 'reply',\n\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t},\n\t\t\t\tquery: {\n\t\t\t\t\tmessageId: this.envelope.databaseId,\n\t\t\t\t},\n\t\t\t}\n\t\t},\n\t\treplyAllLink() {\n\t\t\treturn {\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\tthreadId: 'replyAll',\n\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t},\n\t\t\t\tquery: {\n\t\t\t\t\tmessageId: this.envelope.databaseId,\n\t\t\t\t},\n\t\t\t}\n\t\t},\n\t\tforwardLink() {\n\t\t\treturn {\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\tthreadId: 'new',\n\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t},\n\t\t\t\tquery: {\n\t\t\t\t\tmessageId: this.envelope.databaseId,\n\t\t\t\t},\n\t\t\t}\n\t\t},\n\t\tthreadingFile() {\n\t\t\treturn `data:text/plain;base64,${Base64.encode(JSON.stringify({\n\t\t\t\tsubject: this.envelope.subject,\n\t\t\t\tmessageId: this.envelope.messageId,\n\t\t\t\tinReplyTo: this.envelope.inReplyTo,\n\t\t\t\treferences: this.envelope.references,\n\t\t\t\tthreadRootId: this.envelope.threadRootId,\n\t\t\t}, null, 2))}`\n\t\t},\n\t\tthreadingFileName() {\n\t\t\treturn `${this.envelope.databaseId}.json`\n\t\t},\n\t\ticonFavorite() {\n\t\t\treturn this.envelope.flags.flagged ? 'icon-favorite' : 'icon-starred'\n\t\t},\n\t},\n\tmethods: {\n\t\tonToggleFlagged() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeFlagged', this.envelope)\n\t\t},\n\t\tonToggleImportant() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeImportant', this.envelope)\n\t\t},\n\t\tonToggleSeen() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeSeen', { envelope: this.envelope })\n\t\t},\n\t\tonToggleJunk() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeJunk', this.envelope)\n\t\t},\n\t\ttoggleSelected() {\n\t\t\tthis.$emit('update:selected')\n\t\t},\n\t\tasync onDelete() {\n\t\t\t// Remove from selection first\n\t\t\tif (this.withSelect) {\n\t\t\t\tthis.$emit('unselect')\n\t\t\t}\n\n\t\t\t// Delete\n\t\t\tthis.$emit('delete', this.envelope.databaseId)\n\t\t\ttry {\n\t\t\t\tawait this.$store.dispatch('deleteMessage', {\n\t\t\t\t\tid: this.envelope.databaseId,\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tshowError(await matchError(error, {\n\t\t\t\t\t[NoTrashMailboxConfiguredError.getName()]() {\n\t\t\t\t\t\treturn t('mail', 'No trash mailbox configured')\n\t\t\t\t\t},\n\t\t\t\t\tdefault(error) {\n\t\t\t\t\t\tlogger.error('could not delete message', error)\n\t\t\t\t\t\treturn t('mail', 'Could not delete message')\n\t\t\t\t\t},\n\t\t\t\t}))\n\t\t\t}\n\t\t},\n\t\tasync onShowSourceModal() {\n\t\t\tthis.sourceLoading = true\n\n\t\t\ttry {\n\t\t\t\tconst resp = await axios.get(\n\t\t\t\t\tgenerateUrl('/apps/mail/api/messages/{id}/source', {\n\t\t\t\t\t\tid: this.envelope.databaseId,\n\t\t\t\t\t})\n\t\t\t\t)\n\n\t\t\t\tthis.rawMessage = resp.data.source\n\t\t\t\tthis.showSourceModal = true\n\t\t\t} finally {\n\t\t\t\tthis.sourceLoading = false\n\t\t\t}\n\t\t},\n\t\tonCloseSourceModal() {\n\t\t\tthis.showSourceModal = false\n\t\t},\n\t\tonMove() {\n\t\t\tthis.$emit('move')\n\t\t},\n\t\tonOpenMoveModal() {\n\t\t\tthis.showMoveModal = true\n\t\t},\n\t\tonCloseMoveModal() {\n\t\t\tthis.showMoveModal = false\n\t\t},\n\t},\n}\n</script>\n<style lang=\"scss\" scoped>\n\t.source-modal {\n\t\t::v-deep .modal-container {\n\t\t\theight: 800px;\n\t\t}\n\n\t\t.source-modal-content {\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\toverflow-y: scroll !important;\n\t\t}\n\t}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuEnvelope.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuEnvelope.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuEnvelope.vue?vue&type=style&index=0&id=6279924e&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./MenuEnvelope.vue?vue&type=template&id=6279924e&scoped=true&\"\nimport script from \"./MenuEnvelope.vue?vue&type=script&lang=js&\"\nexport * from \"./MenuEnvelope.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MenuEnvelope.vue?vue&type=style&index=0&id=6279924e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6279924e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Actions',{attrs:{\"menu-align\":\"right\",\"event\":\"\"},nativeOn:{\"click\":function($event){$event.preventDefault();}}},[(_vm.withReply)?_c('ActionRouter',{attrs:{\"icon\":_vm.hasMultipleRecipients ? 'icon-reply-all' : 'icon-reply',\"close-after-click\":true,\"to\":_vm.hasMultipleRecipients ? _vm.replyAllLink : _vm.replyOneLink}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Reply'))+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.hasMultipleRecipients)?_c('ActionRouter',{attrs:{\"icon\":\"icon-reply\",\"close-after-click\":true,\"to\":_vm.replyOneLink}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Reply to sender only'))+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('ActionRouter',{attrs:{\"icon\":\"icon-forward\",\"close-after-click\":true,\"to\":_vm.forwardLink}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Forward'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('ActionRouter',{attrs:{\"icon\":\"icon-add\",\"to\":{\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: _vm.$route.params.mailboxId,\n\t\t\t\t\tthreadId: 'asNew',\n\t\t\t\t\tfilter: _vm.$route.params.filter,\n\t\t\t\t},\n\t\t\t\tquery: {\n\t\t\t\t\tmessageId: _vm.envelope.databaseId,\n\t\t\t\t},\n\t\t\t}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Edit as new message'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-important\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleImportant($event)}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.envelope.flags.important ? _vm.t('mail', 'Mark unimportant') : _vm.t('mail', 'Mark important'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":_vm.iconFavorite,\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleFlagged($event)}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.envelope.flags.flagged ? _vm.t('mail', 'Mark unfavorite') : _vm.t('mail', 'Mark favorite'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-mail\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleSeen($event)}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.envelope.flags.seen ? _vm.t('mail', 'Mark unread') : _vm.t('mail', 'Mark read'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-junk\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleJunk($event)}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.envelope.flags.junk ? _vm.t('mail', 'Mark not spam') : _vm.t('mail', 'Mark as spam'))+\"\\n\\t\\t\")]),_vm._v(\" \"),(_vm.withSelect)?_c('ActionButton',{attrs:{\"icon\":\"icon-checkmark\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.toggleSelected($event)}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.isSelected ? _vm.t('mail', 'Unselect') : _vm.t('mail', 'Select'))+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-external\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onOpenMoveModal($event)}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Move'))+\"\\n\\t\\t\")]),_vm._v(\" \"),(_vm.withShowSource)?_c('ActionButton',{attrs:{\"icon\":_vm.sourceLoading ? 'icon-loading-small' : 'icon-details',\"disabled\":_vm.sourceLoading,\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onShowSourceModal($event)}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'View source'))+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.debug)?_c('ActionLink',{attrs:{\"icon\":\"icon-download\",\"download\":_vm.threadingFileName,\"href\":_vm.threadingFile,\"close-after-click\":true}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Download thread data for debugging'))+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-delete\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onDelete($event)}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Delete'))+\"\\n\\t\\t\")])],1),_vm._v(\" \"),(_vm.showSourceModal)?_c('Modal',{staticClass:\"source-modal\",on:{\"close\":_vm.onCloseSourceModal}},[_c('div',{staticClass:\"source-modal-content\"},[_c('div',{staticClass:\"section\"},[_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'Message source')))]),_vm._v(\" \"),_c('pre',{staticClass:\"message-source\"},[_vm._v(_vm._s(_vm.rawMessage))])])])]):_vm._e(),_vm._v(\" \"),(_vm.showMoveModal)?_c('MoveModal',{attrs:{\"account\":_vm.account,\"envelopes\":[_vm.envelope]},on:{\"move\":_vm.onMove,\"close\":_vm.onCloseMoveModal}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Moment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Moment.vue?vue&type=script&lang=js&\"","<template>\n\t<span class=\"live-relative-timestamp\" :data-timestamp=\"timestamp * 1000\" :title=\"title\">{{ formatted }}</span>\n</template>\n\n<script>\nimport moment from '@nextcloud/moment'\n\nexport default {\n\tname: 'Moment',\n\tprops: {\n\t\ttimestamp: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tformat: {\n\t\t\ttype: String,\n\t\t\tdefault: 'LLL',\n\t\t},\n\t},\n\tcomputed: {\n\t\ttitle() {\n\t\t\treturn moment.unix(this.timestamp).format(this.format)\n\t\t},\n\t\tformatted() {\n\t\t\treturn moment.unix(this.timestamp).fromNow()\n\t\t},\n\t},\n}\n</script>\n","import { render, staticRenderFns } from \"./Moment.vue?vue&type=template&id=4e73ee46&\"\nimport script from \"./Moment.vue?vue&type=script&lang=js&\"\nexport * from \"./Moment.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"live-relative-timestamp\",attrs:{\"data-timestamp\":_vm.timestamp * 1000,\"title\":_vm.title}},[_vm._v(_vm._s(_vm.formatted))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import dragEventBus from '../util/dragEventBus'\nimport defer from 'lodash/defer'\n\nexport class DraggableEnvelope {\n\n\tconstructor(el, componentInstance, options) {\n\t\tthis.el = el\n\t\tthis.options = options\n\t\tthis.registerListeners.bind(this)(el)\n\t\tthis.setInitialAttributes()\n\t}\n\n\tsetInitialAttributes() {\n\t\tthis.el.setAttribute('draggable', 'true')\n\t\tthis.el.classList.add('draggable-envelope')\n\t}\n\n\tupdate(el, instance) {\n\t\tthis.options = instance.options\n\t}\n\n\tregisterListeners(el) {\n\t\tel.addEventListener('dragstart', this.onDragStart.bind(this))\n\t\tel.addEventListener('dragend', this.onDragEnd.bind(this))\n\t}\n\n\tremoveListeners(el) {\n\t\tel.removeEventListener('dragstart', this.onDragStart)\n\t\tel.removeEventListener('dragend', this.onDragEnd)\n\t}\n\n\tonDragStart(event) {\n\t\tconst { accountId, mailboxId, selectedEnvelopes } = this.options\n\n\t\tevent.dataTransfer.clearData()\n\t\tevent.dataTransfer.effectAllowed = 'move'\n\n\t\tconst envelopes = []\n\t\tif (selectedEnvelopes.length) {\n\t\t\t// handle dragged selection mode items\n\t\t\tselectedEnvelopes.forEach((envelope, index) => {\n\t\t\t\tenvelopes.push({\n\t\t\t\t\taccountId,\n\t\t\t\t\tmailboxId,\n\t\t\t\t\tenvelopeId: envelope.databaseId,\n\t\t\t\t\tdraggableLabel: `${envelope.subject} (${envelope.from[0].label})`,\n\t\t\t\t})\n\t\t\t})\n\t\t} else {\n\t\t\t// handle single dragged item\n\t\t\tconst { envelopeId, draggableLabel } = this.options\n\t\t\tenvelopes.push({ accountId, mailboxId, envelopeId, draggableLabel })\n\t\t}\n\n\t\tevent.dataTransfer.setData('text/plain', JSON.stringify(envelopes))\n\t\tthis.attachGhost({ event, envelopes })\n\n\t\tdragEventBus.$emit('dragStart', {\n\t\t\taccountId,\n\t\t\tmailboxId,\n\t\t\titemCount: envelopes.length,\n\t\t})\n\t}\n\n\tonDragEnd(event) {\n\t\tdragEventBus.$emit('dragEnd', { accountId: this.options.accountId })\n\t}\n\n\tattachGhost({ event, envelopes }) {\n\t\tconst baseClass = 'draggable-envelope-ghost'\n\t\tconst dragNode = document.createElement('div')\n\t\tdragNode.classList.add(baseClass)\n\n\t\tconst counterNode = document.createElement('span')\n\t\tcounterNode.classList.add(`${baseClass}--counter`)\n\t\tconst textCountNode = document.createTextNode(envelopes.length)\n\t\tcounterNode.appendChild(textCountNode)\n\t\tdragNode.appendChild(counterNode)\n\n\t\tconst labelWrapperNode = document.createElement('div')\n\t\tlabelWrapperNode.classList.add(`${baseClass}--label-wrapper`)\n\n\t\tenvelopes.forEach(envelope => {\n\t\t\tconst labelNode = document.createElement('div')\n\t\t\tlabelNode.classList.add(`${baseClass}--label-wrapper--label`)\n\t\t\tconst textLabelNode = document.createTextNode(envelope.draggableLabel)\n\t\t\tlabelNode.appendChild(textLabelNode)\n\t\t\tlabelWrapperNode.appendChild(labelNode)\n\t\t})\n\n\t\tdragNode.appendChild(labelWrapperNode)\n\t\tdocument.body.appendChild(dragNode)\n\n\t\tevent.dataTransfer.setDragImage(dragNode, 0, 15)\n\n\t\t// the item can be removed immediately, because the\n\t\t// browser will take a \"screenshot\" of the dragImage\n\t\t// upon initialization to be used while dragging\n\t\tdefer(() => {\n\t\t\tdocument.body.removeChild(dragNode)\n\t\t})\n\t}\n\n}\n","import { DraggableEnvelope } from './draggable-envelope'\n\nlet instances = []\n\nexport const DraggableEnvelopeDirective = {\n\tbind(el, binding, vnode) {\n\t\tconst instance = new DraggableEnvelope(el, vnode.context, binding.value)\n\t\tinstances.push(instance)\n\t},\n\tcomponentUpdated(el, binding) {\n\t\tconst options = binding.value\n\t\tsetTimeout(() => {\n\t\t\tinstances.forEach(instance => {\n\t\t\t\tinstance.options.selectedEnvelopes = options.selectedEnvelopes\n\t\t\t\tinstance.update(el, instance)\n\t\t\t})\n\t\t})\n\t},\n\tunbind(el) {\n\t\tinstances = instances.filter((instance) => instance.el !== el)\n\t},\n}\n\nexport default DraggableEnvelope\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Envelope.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Envelope.vue?vue&type=script&lang=js&\"","<template>\n\t<router-link\n\t\tv-draggable-envelope=\"{\n\t\t\taccountId: data.accountId ? data.accountId : mailbox.accountId,\n\t\t\tmailboxId: data.mailboxId,\n\t\t\tenvelopeId: data.databaseId,\n\t\t\tdraggableLabel: `${data.subject} (${data.from[0].label})`,\n\t\t\tselectedEnvelopes,\n\t\t}\"\n\t\tclass=\"app-content-list-item\"\n\t\t:class=\"{seen: data.flags.seen, draft, selected: selected}\"\n\t\t:to=\"link\"\n\t\t:data-envelope-id=\"data.databaseId\">\n\t\t<div\n\t\t\tv-if=\"mailbox.isUnified\"\n\t\t\tclass=\"mail-message-account-color\"\n\t\t\t:style=\"{'background-color': accountColor}\" />\n\t\t<div\n\t\t\tv-if=\"data.flags.flagged\"\n\t\t\tclass=\"app-content-list-item-star icon-starred\"\n\t\t\t:data-starred=\"data.flags.flagged ? 'true' : 'false'\"\n\t\t\t@click.prevent=\"onToggleFlagged\" />\n\t\t<div\n\t\t\tv-if=\"data.flags.important\"\n\t\t\tclass=\"app-content-list-item-star icon-important\"\n\t\t\t:data-starred=\"data.flags.important ? 'true' : 'false'\"\n\t\t\t@click.prevent=\"onToggleImportant\"\n\t\t\tv-html=\"importantSvg\" />\n\t\t<div\n\t\t\tv-if=\"data.flags.junk\"\n\t\t\tclass=\"app-content-list-item-star icon-junk\"\n\t\t\t:data-starred=\"data.flags.junk ? 'true' : 'false'\"\n\t\t\t@click.prevent=\"onToggleJunk\" />\n\t\t<div class=\"app-content-list-item-icon\">\n\t\t\t<Avatar :display-name=\"addresses\" :email=\"avatarEmail\" />\n\t\t\t<p v-if=\"selectMode\" class=\"app-content-list-item-select-checkbox\">\n\t\t\t\t<input :id=\"`select-checkbox-${data.uid}`\"\n\t\t\t\t\tclass=\"checkbox\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t:checked=\"selected\">\n\t\t\t\t<label\n\t\t\t\t\t:for=\"`select-checkbox-${data.uid}`\"\n\t\t\t\t\t@click.exact.prevent=\"toggleSelected\"\n\t\t\t\t\t@click.shift.prevent=\"onSelectMultiple\" />\n\t\t\t</p>\n\t\t</div>\n\t\t<div class=\"app-content-list-item-line-one\"\n\t\t\t:title=\"addresses\">\n\t\t\t{{ addresses }}\n\t\t</div>\n\t\t<div class=\"app-content-list-item-line-two\"\n\t\t\t:title=\"data.subject\">\n\t\t\t<span v-if=\"data.flags.answered\" class=\"icon-reply\" />\n\t\t\t<span v-if=\"data.flags.hasAttachments === true\" class=\"icon-public icon-attachment\" />\n\t\t\t<span v-if=\"draft\" class=\"draft\">\n\t\t\t\t<em>{{ t('mail', 'Draft: ') }}</em>\n\t\t\t</span>\n\t\t\t{{ data.subject }}\n\t\t</div>\n\t\t<div class=\"app-content-list-item-details date\">\n\t\t\t<Moment :timestamp=\"data.dateInt\" />\n\t\t</div>\n\t\t<MenuEnvelope class=\"app-content-list-item-menu\"\n\t\t\t:envelope=\"data\"\n\t\t\t:mailbox=\"mailbox\"\n\t\t\t:is-selected=\"selected\"\n\t\t\t:with-select=\"true\"\n\t\t\t:with-show-source=\"false\"\n\t\t\t@unselect=\"unselect\"\n\t\t\t@update:selected=\"toggleSelected\" />\n\t</router-link>\n</template>\n\n<script>\nimport MenuEnvelope from './MenuEnvelope'\nimport Moment from './Moment'\nimport importantSvg from '../../img/important.svg'\n\nimport Avatar from './Avatar'\nimport { calculateAccountColor } from '../util/AccountColor'\nimport { DraggableEnvelopeDirective } from '../directives/drag-and-drop/draggable-envelope'\n\nexport default {\n\tname: 'Envelope',\n\tcomponents: {\n\t\tAvatar,\n\t\tMenuEnvelope,\n\t\tMoment,\n\t},\n\tdirectives: {\n\t\tdraggableEnvelope: DraggableEnvelopeDirective,\n\t},\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tmailbox: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tselectMode: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tselected: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tselectedEnvelopes: {\n\t\t\ttype: Array,\n\t\t\trequired: false,\n\t\t\tdefault: () => [],\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\timportantSvg,\n\t\t}\n\t},\n\tcomputed: {\n\t\taccountColor() {\n\t\t\tconst account = this.$store.getters.getAccount(this.data.accountId)\n\t\t\treturn calculateAccountColor(account?.emailAddress ?? '')\n\t\t},\n\t\tdraft() {\n\t\t\treturn this.data.flags.draft\n\t\t},\n\t\tlink() {\n\t\t\tif (this.draft) {\n\t\t\t\t// TODO: does not work with a unified drafts mailbox\n\t\t\t\t//       the query should also contain the account and mailbox\n\t\t\t\t//       id for that to work\n\t\t\t\treturn {\n\t\t\t\t\tname: 'message',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t\t\tthreadId: 'new',\n\t\t\t\t\t\tdraftId: this.data.databaseId,\n\t\t\t\t\t},\n\t\t\t\t\texact: true,\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\tname: 'message',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t\t\tthreadId: this.data.databaseId,\n\t\t\t\t\t},\n\t\t\t\t\texact: true,\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\taddresses() {\n\t\t\t// Show recipients' label/address in a sent mailbox\n\t\t\tif (this.mailbox.specialRole === 'sent') {\n\t\t\t\tconst recipients = [this.data.to, this.data.cc].flat().map(function(recipient) {\n\t\t\t\t\treturn recipient.label ? recipient.label : recipient.email\n\t\t\t\t})\n\t\t\t\treturn recipients.length > 0 ? recipients.join(', ') : t('mail', 'Blind copy recipients only')\n\t\t\t}\n\t\t\t// Show sender label/address in other mailbox types\n\t\t\treturn this.data.from.length === 0 ? '?' : this.data.from[0].label || this.data.from[0].email\n\t\t},\n\t\tavatarEmail() {\n\t\t\t// Show first recipients' avatar in a sent mailbox (or undefined when sent to Bcc only)\n\t\t\tif (this.mailbox.specialRole === 'sent') {\n\t\t\t\tconst recipients = [this.data.to, this.data.cc].flat().map(function(recipient) {\n\t\t\t\t\treturn recipient.email\n\t\t\t\t})\n\t\t\t\treturn recipients.length > 0 ? recipients[0] : undefined\n\t\t\t}\n\n\t\t\t// Show sender avatar in other mailbox types\n\t\t\tif (this.data.from.length > 0) {\n\t\t\t\treturn this.data.from[0].email\n\t\t\t} else {\n\t\t\t\treturn undefined\n\t\t\t}\n\t\t},\n\t},\n\tmethods: {\n\t\tunselect() {\n\t\t\tif (this.selected) {\n\t\t\t\tthis.$emit('updated:selected', false)\n\t\t\t}\n\t\t},\n\t\ttoggleSelected() {\n\t\t\tthis.$emit('update:selected', !this.selected)\n\t\t},\n\t\tonSelectMultiple() {\n\t\t\tthis.$emit('select-multiple')\n\t\t},\n\t\tonToggleImportant() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeImportant', this.data)\n\t\t},\n\t\tonToggleFlagged() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeFlagged', this.data)\n\t\t},\n\t\tonToggleJunk() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeJunk', this.data)\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.mail-message-account-color {\n\tposition: absolute;\n\tleft: 0px;\n\twidth: 2px;\n\theight: 69px;\n\tz-index: 1;\n}\n\n.icon-important {\n\t::v-deep path {\n\t\tfill: #ffcc00;\n\t\tstroke: var(--color-main-background);\n\t}\n\t.app-content-list-item:hover &,\n\t.app-content-list-item:focus &,\n\t.app-content-list-item.active & {\n\t\t::v-deep path {\n\t\t\tstroke: var(--color-background-dark);\n\t\t}\n\t}\n\n\t// In message list, but not the one in the action menu\n\t&.app-content-list-item-star {\n\t\tbackground-image: none;\n\t\tleft: 7px;\n\t\ttop: 13px;\n\t\topacity: 1;\n\n\t\t&:hover,\n\t\t&:focus {\n\t\t\topacity: 0.5;\n\t\t}\n\t}\n}\n\n.app-content-list-item .app-content-list-item-select-checkbox {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tposition: absolute;\n\tleft: 22px;\n\ttop: 20px;\n\tz-index: 50; // same as icon-starred\n}\n\n.app-content-list-item:not(.seen) {\n\tfont-weight: bold;\n}\n.app-content-list-item.selected {\n\tbackground-color: var(--color-background-dark);\n\tfont-weight: bold;\n}\n.app-content-list-item-star.junk {\n\tbackground-image: var(--icon-junk-000);\n\topacity: 1;\n}\n.app-content-list-item.draft .app-content-list-item-line-two {\n\tfont-style: italic;\n}\n.app-content-list-item.active {\n\tbackground-color: var(--color-primary-light);\n}\n\n.icon-reply,\n.icon-attachment {\n\tdisplay: inline-block;\n\tvertical-align: text-top;\n}\n\n.icon-reply {\n\tbackground-image: url('../../img/reply.svg');\n\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=50)';\n\topacity: 0.5;\n}\n\n.icon-attachment {\n\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=25)';\n\topacity: 0.25;\n}\n\n// Fix layout of messages in list until we move to component\n\n.app-content-list .app-content-list-item {\n\tpadding-right: 0;\n\n\t.app-content-list-item-line-two {\n\t\tpadding-right: 0;\n\t\tmargin-top: -8px;\n\t}\n\n\t.app-content-list-item-menu {\n\t\tmargin-right: -2px;\n\t\tmargin-top: -8px;\n\n\t\t::v-deep .action-item__menu {\n\t\t\tright: 7px !important;\n\n\t\t\t.action-item__menu_arrow {\n\t\t\t\tright: 6px !important;\n\t\t\t}\n\t\t}\n\t}\n\n\t.app-content-list-item-details {\n\t\tpadding-right: 7px;\n\t}\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Envelope.vue?vue&type=style&index=0&id=5b5c7240&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./Envelope.vue?vue&type=template&id=5b5c7240&scoped=true&\"\nimport script from \"./Envelope.vue?vue&type=script&lang=js&\"\nexport * from \"./Envelope.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Envelope.vue?vue&type=style&index=0&id=5b5c7240&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5b5c7240\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('router-link',{directives:[{name:\"draggable-envelope\",rawName:\"v-draggable-envelope\",value:({\n\t\taccountId: _vm.data.accountId ? _vm.data.accountId : _vm.mailbox.accountId,\n\t\tmailboxId: _vm.data.mailboxId,\n\t\tenvelopeId: _vm.data.databaseId,\n\t\tdraggableLabel: ((_vm.data.subject) + \" (\" + (_vm.data.from[0].label) + \")\"),\n\t\tselectedEnvelopes: _vm.selectedEnvelopes,\n\t}),expression:\"{\\n\\t\\taccountId: data.accountId ? data.accountId : mailbox.accountId,\\n\\t\\tmailboxId: data.mailboxId,\\n\\t\\tenvelopeId: data.databaseId,\\n\\t\\tdraggableLabel: `${data.subject} (${data.from[0].label})`,\\n\\t\\tselectedEnvelopes,\\n\\t}\"}],staticClass:\"app-content-list-item\",class:{seen: _vm.data.flags.seen, draft: _vm.draft, selected: _vm.selected},attrs:{\"to\":_vm.link,\"data-envelope-id\":_vm.data.databaseId}},[(_vm.mailbox.isUnified)?_c('div',{staticClass:\"mail-message-account-color\",style:({'background-color': _vm.accountColor})}):_vm._e(),_vm._v(\" \"),(_vm.data.flags.flagged)?_c('div',{staticClass:\"app-content-list-item-star icon-starred\",attrs:{\"data-starred\":_vm.data.flags.flagged ? 'true' : 'false'},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleFlagged($event)}}}):_vm._e(),_vm._v(\" \"),(_vm.data.flags.important)?_c('div',{staticClass:\"app-content-list-item-star icon-important\",attrs:{\"data-starred\":_vm.data.flags.important ? 'true' : 'false'},domProps:{\"innerHTML\":_vm._s(_vm.importantSvg)},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleImportant($event)}}}):_vm._e(),_vm._v(\" \"),(_vm.data.flags.junk)?_c('div',{staticClass:\"app-content-list-item-star icon-junk\",attrs:{\"data-starred\":_vm.data.flags.junk ? 'true' : 'false'},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleJunk($event)}}}):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"app-content-list-item-icon\"},[_c('Avatar',{attrs:{\"display-name\":_vm.addresses,\"email\":_vm.avatarEmail}}),_vm._v(\" \"),(_vm.selectMode)?_c('p',{staticClass:\"app-content-list-item-select-checkbox\"},[_c('input',{staticClass:\"checkbox\",attrs:{\"id\":(\"select-checkbox-\" + (_vm.data.uid)),\"type\":\"checkbox\"},domProps:{\"checked\":_vm.selected}}),_vm._v(\" \"),_c('label',{attrs:{\"for\":(\"select-checkbox-\" + (_vm.data.uid))},on:{\"click\":[function($event){if($event.ctrlKey||$event.shiftKey||$event.altKey||$event.metaKey){ return null; }$event.preventDefault();return _vm.toggleSelected($event)},function($event){if(!$event.shiftKey){ return null; }$event.preventDefault();return _vm.onSelectMultiple($event)}]}})]):_vm._e()],1),_vm._v(\" \"),_c('div',{staticClass:\"app-content-list-item-line-one\",attrs:{\"title\":_vm.addresses}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.addresses)+\"\\n\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"app-content-list-item-line-two\",attrs:{\"title\":_vm.data.subject}},[(_vm.data.flags.answered)?_c('span',{staticClass:\"icon-reply\"}):_vm._e(),_vm._v(\" \"),(_vm.data.flags.hasAttachments === true)?_c('span',{staticClass:\"icon-public icon-attachment\"}):_vm._e(),_vm._v(\" \"),(_vm.draft)?_c('span',{staticClass:\"draft\"},[_c('em',[_vm._v(_vm._s(_vm.t('mail', 'Draft: ')))])]):_vm._e(),_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.data.subject)+\"\\n\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"app-content-list-item-details date\"},[_c('Moment',{attrs:{\"timestamp\":_vm.data.dateInt}})],1),_vm._v(\" \"),_c('MenuEnvelope',{staticClass:\"app-content-list-item-menu\",attrs:{\"envelope\":_vm.data,\"mailbox\":_vm.mailbox,\"is-selected\":_vm.selected,\"with-select\":true,\"with-show-source\":false},on:{\"unselect\":_vm.unselect,\"update:selected\":_vm.toggleSelected}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div>\n\t\t<transition name=\"multiselect-header\">\n\t\t\t<div v-if=\"selectMode\" key=\"multiselect-header\" class=\"multiselect-header\">\n\t\t\t\t<div class=\"button primary\" @click.prevent=\"markSelectedSeenOrUnseen\">\n\t\t\t\t\t<span id=\"action-label\">{{\n\t\t\t\t\t\tareAllSelectedRead\n\t\t\t\t\t\t\t? n(\n\t\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t\t'Mark {number} unread',\n\t\t\t\t\t\t\t\t'Mark {number} unread',\n\t\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: n(\n\t\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t\t'Mark {number} read',\n\t\t\t\t\t\t\t\t'Mark {number} read',\n\t\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t}}</span>\n\t\t\t\t</div>\n\t\t\t\t<Actions class=\"app-content-list-item-menu\" menu-align=\"right\">\n\t\t\t\t\t<ActionButton icon=\"icon-starred\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click.prevent=\"favoriteOrUnfavoriteAll\">\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\tareAllSelectedFavorite\n\t\t\t\t\t\t\t\t? n(\n\t\t\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t\t\t'Unfavorite {number}',\n\t\t\t\t\t\t\t\t\t'Unfavorite {number}',\n\t\t\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t: n(\n\t\t\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t\t\t'Favorite {number}',\n\t\t\t\t\t\t\t\t\t'Favorite {number}',\n\t\t\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton icon=\"icon-close\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click.prevent=\"unselectAll\">\n\t\t\t\t\t\t{{ n(\n\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t'Unselect {number}',\n\t\t\t\t\t\t\t'Unselect {number}',\n\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) }}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton\n\t\t\t\t\t\tv-if=\"!account.isUnified\"\n\t\t\t\t\t\ticon=\"icon-external\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click.prevent=\"onOpenMoveModal\">\n\t\t\t\t\t\t{{ n(\n\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t'Move {number}',\n\t\t\t\t\t\t\t'Move {number}',\n\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) }}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton\n\t\t\t\t\t\ticon=\"icon-forward\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click.prevent=\"forwardSelectedAsAttachment\">\n\t\t\t\t\t\t{{ n(\n\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t'Forward {number} as attachment',\n\t\t\t\t\t\t\t'Forward {number} as attachment',\n\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) }}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton icon=\"icon-delete\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click.prevent=\"deleteAllSelected\">\n\t\t\t\t\t\t{{ n(\n\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t'Delete {number}',\n\t\t\t\t\t\t\t'Delete {number}',\n\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) }}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t</Actions>\n\t\t\t\t<MoveModal\n\t\t\t\t\tv-if=\"showMoveModal\"\n\t\t\t\t\t:account=\"account\"\n\t\t\t\t\t:envelopes=\"selectedEnvelopes\"\n\t\t\t\t\t@close=\"onCloseMoveModal\" />\n\t\t\t</div>\n\t\t</transition>\n\t\t<transition-group name=\"list\">\n\t\t\t<div id=\"list-refreshing\"\n\t\t\t\tkey=\"loading\"\n\t\t\t\tclass=\"icon-loading-small\"\n\t\t\t\t:class=\"{refreshing: refreshing}\" />\n\t\t\t<Envelope\n\t\t\t\tv-for=\"(env, index) in envelopes\"\n\t\t\t\t:key=\"env.databaseId\"\n\t\t\t\t:data=\"env\"\n\t\t\t\t:mailbox=\"mailbox\"\n\t\t\t\t:selected=\"selection.includes(env.databaseId)\"\n\t\t\t\t:select-mode=\"selectMode\"\n\t\t\t\t:selected-envelopes=\"selectedEnvelopes\"\n\t\t\t\t@delete=\"$emit('delete', env.databaseId)\"\n\t\t\t\t@update:selected=\"onEnvelopeSelectToggle(env, index, ...$event)\"\n\t\t\t\t@select-multiple=\"onEnvelopeSelectMultiple(env, index)\" />\n\t\t\t<div\n\t\t\t\tv-if=\"loadMoreButton && !loadingMore\"\n\t\t\t\t:key=\"'list-collapse-' + searchQuery\"\n\t\t\t\tclass=\"load-more\"\n\t\t\t\t@click=\"$emit('loadMore')\">\n\t\t\t\t{{ t('mail', 'Load more') }}\n\t\t\t</div>\n\t\t\t<div id=\"load-more-mail-messages\" key=\"loadingMore\" :class=\"{'icon-loading-small': loadingMore}\" />\n\t\t</transition-group>\n\t</div>\n</template>\n\n<script>\nimport Actions from '@nextcloud/vue/dist/Components/Actions'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\nimport { showError } from '@nextcloud/dialogs'\n\nimport Envelope from './Envelope'\nimport logger from '../logger'\nimport MoveModal from './MoveModal'\nimport { matchError } from '../errors/match'\nimport NoTrashMailboxConfiguredError\n\tfrom '../errors/NoTrashMailboxConfiguredError'\nimport { differenceWith } from 'ramda'\nimport dragEventBus from '../directives/drag-and-drop/util/dragEventBus'\n\nexport default {\n\tname: 'EnvelopeList',\n\tcomponents: {\n\t\tActions,\n\t\tActionButton,\n\t\tEnvelope,\n\t\tMoveModal,\n\t},\n\tprops: {\n\t\taccount: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tmailbox: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tenvelopes: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tsearchQuery: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: undefined,\n\t\t},\n\t\trefreshing: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t\tdefault: true,\n\t\t},\n\t\tloadingMore: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tloadMoreButton: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tselection: [],\n\t\t\tshowMoveModal: false,\n\t\t\tlastToggledIndex: undefined,\n\t\t}\n\t},\n\tcomputed: {\n\t\tselectMode() {\n\t\t\t// returns true when in selection mode (where the user selects several emails at once)\n\t\t\treturn this.selection.length > 0\n\t\t},\n\t\tareAllSelectedRead() {\n\t\t\t// returns false if at least one selected message has not been read yet\n\t\t\treturn this.selectedEnvelopes.every((env) => env.flags.seen === true)\n\t\t},\n\t\tareAllSelectedFavorite() {\n\t\t\t// returns false if at least one selected message has not been favorited yet\n\t\t\treturn this.selectedEnvelopes.every((env) => env.flags.flagged === true)\n\t\t},\n\t\tselectedEnvelopes() {\n\t\t\treturn this.envelopes.filter((env) => this.selection.includes(env.databaseId))\n\t\t},\n\t},\n\twatch: {\n\t\tenvelopes(newVal, oldVal) {\n\t\t\t// Unselect vanished envelopes\n\t\t\tconst newIds = newVal.map((env) => env.databaseId)\n\t\t\tthis.selection = this.selection.filter((id) => newIds.includes(id))\n\t\t\tdifferenceWith((a, b) => a.databaseId === b.databaseId, oldVal, newVal)\n\t\t\t\t.forEach((env) => {\n\t\t\t\t\tenv.flags.selected = false\n\t\t\t\t})\n\t\t},\n\t},\n\tmounted() {\n\t\tdragEventBus.$on('envelopesDropped', this.unselectAll)\n\t},\n\tbeforeDestroy() {\n\t\tdragEventBus.$off('envelopesDropped', this.unselectAll)\n\t},\n\tmethods: {\n\t\tisEnvelopeSelected(idx) {\n\t\t\tif (this.selection.length === 0) {\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\treturn this.selection.includes(idx)\n\t\t},\n\t\tmarkSelectedSeenOrUnseen() {\n\t\t\tconst seen = !this.areAllSelectedRead\n\t\t\tthis.selectedEnvelopes.forEach((envelope) => {\n\t\t\t\tthis.$store.dispatch('toggleEnvelopeSeen', {\n\t\t\t\t\tenvelope,\n\t\t\t\t\tseen,\n\t\t\t\t})\n\t\t\t})\n\t\t\tthis.unselectAll()\n\t\t},\n\t\tfavoriteOrUnfavoriteAll() {\n\t\t\tconst favFlag = !this.areAllSelectedFavorite\n\t\t\tthis.selectedEnvelopes.forEach((envelope) => {\n\t\t\t\tthis.$store.dispatch('markEnvelopeFavoriteOrUnfavorite', {\n\t\t\t\t\tenvelope,\n\t\t\t\t\tfavFlag,\n\t\t\t\t})\n\t\t\t})\n\t\t\tthis.unselectAll()\n\t\t},\n\t\tdeleteAllSelected() {\n\t\t\tthis.selectedEnvelopes.forEach(async(envelope) => {\n\t\t\t\t// Navigate if the message being deleted is the one currently viewed\n\t\t\t\tif (envelope.databaseId === this.$route.params.threadId) {\n\t\t\t\t\tconst index = this.envelopes.indexOf(envelope)\n\t\t\t\t\tlet next\n\t\t\t\t\tif (index === 0) {\n\t\t\t\t\t\tnext = this.envelopes[index + 1]\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnext = this.envelopes[index - 1]\n\t\t\t\t\t}\n\n\t\t\t\t\tif (next) {\n\t\t\t\t\t\tthis.$router.push({\n\t\t\t\t\t\t\tname: 'message',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t\t\t\tthreadId: next.databaseId,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlogger.info(`deleting message ${envelope.databaseId}`)\n\t\t\t\ttry {\n\t\t\t\t\tawait this.$store.dispatch('deleteMessage', {\n\t\t\t\t\t\tid: envelope.databaseId,\n\t\t\t\t\t})\n\t\t\t\t} catch (error) {\n\t\t\t\t\tshowError(await matchError(error, {\n\t\t\t\t\t\t[NoTrashMailboxConfiguredError.getName()]() {\n\t\t\t\t\t\t\treturn t('mail', 'No trash mailbox configured')\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault(error) {\n\t\t\t\t\t\t\tlogger.error('could not delete message', error)\n\t\t\t\t\t\t\treturn t('mail', 'Could not delete message')\n\t\t\t\t\t\t},\n\t\t\t\t\t}))\n\t\t\t\t}\n\t\t\t})\n\t\t\tthis.unselectAll()\n\t\t},\n\t\tsetEnvelopeSelected(envelope, selected) {\n\t\t\tconst alreadySelected = this.selection.includes(envelope.databaseId)\n\t\t\tif (selected && !alreadySelected) {\n\t\t\t\tenvelope.flags.selected = true\n\t\t\t\tthis.selection.push(envelope.databaseId)\n\t\t\t} else if (!selected && alreadySelected) {\n\t\t\t\tenvelope.flags.selected = false\n\t\t\t\tthis.selection.splice(this.selection.indexOf(envelope.databaseId), 1)\n\t\t\t}\n\t\t},\n\t\tonEnvelopeSelectToggle(envelope, index, selected) {\n\t\t\tthis.lastToggledIndex = index\n\t\t\tthis.setEnvelopeSelected(envelope, selected)\n\t\t},\n\t\tonEnvelopeSelectMultiple(envelope, index) {\n\t\t\tif (this.lastToggledIndex === undefined) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst start = Math.min(this.lastToggledIndex, index)\n\t\t\tconst end = Math.max(this.lastToggledIndex, index)\n\t\t\tconst selected = this.selection.includes(envelope.databaseId)\n\t\t\tfor (let i = start; i <= end; i++) {\n\t\t\t\tthis.setEnvelopeSelected(this.envelopes[i], !selected)\n\t\t\t}\n\t\t\tthis.lastToggledIndex = index\n\t\t},\n\t\tunselectAll() {\n\t\t\tthis.envelopes.forEach((env) => {\n\t\t\t\tenv.flags.selected = false\n\t\t\t})\n\t\t\tthis.selection = []\n\t\t},\n\t\tonOpenMoveModal() {\n\t\t\tthis.showMoveModal = true\n\t\t},\n\t\tasync forwardSelectedAsAttachment() {\n\t\t\tconst selected = this.selection\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\tthreadId: 'new',\n\t\t\t\t},\n\t\t\t\tquery: {\n\t\t\t\t\tforwardedMessages: selected,\n\t\t\t\t},\n\t\t\t})\n\t\t\tthis.unselectAll()\n\t\t},\n\t\tonCloseMoveModal() {\n\t\t\tthis.showMoveModal = false\n\t\t\tthis.unselectAll()\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\ndiv {\n\t// So we can align the loading spinner in the Priority inbox\n\tposition: relative;\n}\n\n.load-more {\n\ttext-align: center;\n\tmargin-top: 10px;\n\tcursor: pointer;\n\tcolor: var(--color-text-maxcontrast);\n}\n\n.multiselect-header {\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\tjustify-content: center;\n\tbackground-color: var(--color-main-background-translucent);\n\tposition: sticky;\n\ttop: 0px;\n\theight: 48px;\n\tz-index: 100;\n}\n\n#load-more-mail-messages {\n\tmargin: 10px auto;\n\tpadding: 10px;\n\tmargin-top: 50px;\n\tmargin-bottom: 50px;\n}\n\n/* TODO: put this in core icons.css as general rule for buttons with icons */\n#load-more-mail-messages.icon-loading-small {\n\tpadding-left: 32px;\n\tbackground-position: 9px center;\n}\n\n#list-refreshing {\n\tposition: absolute;\n\tleft: calc(50% - 8px);\n\toverflow: hidden;\n\tpadding: 12px;\n\tbackground-color: var(--color-main-background);\n\tz-index: 1;\n\tborder-radius: var(--border-radius-pill);\n\tborder: 1px solid var(--color-border);\n\ttop: -24px;\n\topacity: 0;\n\ttransition-property: top, opacity;\n\ttransition-duration: 0.5s;\n\ttransition-timing-function: ease-in-out;\n\n\t&.refreshing {\n\t\ttop: 4px;\n\t\topacity: 1;\n\t}\n}\n\n.multiselect-header-enter-active,\n.multiselect-header-leave-active,\n.list-enter-active,\n.list-leave-active {\n\ttransition: all var(--animation-slow);\n}\n\n.multiselect-header-enter,\n.multiselect-header-leave-to,\n.list-enter,\n.list-leave-to {\n\topacity: 0;\n\theight: 0px;\n\ttransform: scaleY(0);\n}\n\n#action-label {\n\tvertical-align: middle;\n}\n@media only screen and (min-width: 600px) {\n\t#action-label {\n\t\tdisplay: block;\n\t}\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnvelopeList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnvelopeList.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnvelopeList.vue?vue&type=style&index=0&id=74567ca5&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./EnvelopeList.vue?vue&type=template&id=74567ca5&scoped=true&\"\nimport script from \"./EnvelopeList.vue?vue&type=script&lang=js&\"\nexport * from \"./EnvelopeList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EnvelopeList.vue?vue&type=style&index=0&id=74567ca5&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"74567ca5\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('transition',{attrs:{\"name\":\"multiselect-header\"}},[(_vm.selectMode)?_c('div',{key:\"multiselect-header\",staticClass:\"multiselect-header\"},[_c('div',{staticClass:\"button primary\",on:{\"click\":function($event){$event.preventDefault();return _vm.markSelectedSeenOrUnseen($event)}}},[_c('span',{attrs:{\"id\":\"action-label\"}},[_vm._v(_vm._s(_vm.areAllSelectedRead\n\t\t\t\t\t\t? _vm.n(\n\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t'Mark {number} unread',\n\t\t\t\t\t\t\t'Mark {number} unread',\n\t\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)\n\t\t\t\t\t\t: _vm.n(\n\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t'Mark {number} read',\n\t\t\t\t\t\t\t'Mark {number} read',\n\t\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)))])]),_vm._v(\" \"),_c('Actions',{staticClass:\"app-content-list-item-menu\",attrs:{\"menu-align\":\"right\"}},[_c('ActionButton',{attrs:{\"icon\":\"icon-starred\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.favoriteOrUnfavoriteAll($event)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.areAllSelectedFavorite\n\t\t\t\t\t\t\t? _vm.n(\n\t\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t\t'Unfavorite {number}',\n\t\t\t\t\t\t\t\t'Unfavorite {number}',\n\t\t\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: _vm.n(\n\t\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t\t'Favorite {number}',\n\t\t\t\t\t\t\t\t'Favorite {number}',\n\t\t\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-close\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.unselectAll($event)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.n(\n\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t'Unselect {number}',\n\t\t\t\t\t\t'Unselect {number}',\n\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t}\n\t\t\t\t\t))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),(!_vm.account.isUnified)?_c('ActionButton',{attrs:{\"icon\":\"icon-external\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onOpenMoveModal($event)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.n(\n\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t'Move {number}',\n\t\t\t\t\t\t'Move {number}',\n\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t}\n\t\t\t\t\t))+\"\\n\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-forward\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.forwardSelectedAsAttachment($event)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.n(\n\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t'Forward {number} as attachment',\n\t\t\t\t\t\t'Forward {number} as attachment',\n\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t}\n\t\t\t\t\t))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-delete\",\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.deleteAllSelected($event)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.n(\n\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t'Delete {number}',\n\t\t\t\t\t\t'Delete {number}',\n\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t}\n\t\t\t\t\t))+\"\\n\\t\\t\\t\\t\")])],1),_vm._v(\" \"),(_vm.showMoveModal)?_c('MoveModal',{attrs:{\"account\":_vm.account,\"envelopes\":_vm.selectedEnvelopes},on:{\"close\":_vm.onCloseMoveModal}}):_vm._e()],1):_vm._e()]),_vm._v(\" \"),_c('transition-group',{attrs:{\"name\":\"list\"}},[_c('div',{key:\"loading\",staticClass:\"icon-loading-small\",class:{refreshing: _vm.refreshing},attrs:{\"id\":\"list-refreshing\"}}),_vm._v(\" \"),_vm._l((_vm.envelopes),function(env,index){return _c('Envelope',{key:env.databaseId,attrs:{\"data\":env,\"mailbox\":_vm.mailbox,\"selected\":_vm.selection.includes(env.databaseId),\"select-mode\":_vm.selectMode,\"selected-envelopes\":_vm.selectedEnvelopes},on:{\"delete\":function($event){return _vm.$emit('delete', env.databaseId)},\"update:selected\":function($event){return _vm.onEnvelopeSelectToggle.apply(void 0, [ env, index ].concat( $event ))},\"select-multiple\":function($event){return _vm.onEnvelopeSelectMultiple(env, index)}}})}),_vm._v(\" \"),(_vm.loadMoreButton && !_vm.loadingMore)?_c('div',{key:'list-collapse-' + _vm.searchQuery,staticClass:\"load-more\",on:{\"click\":function($event){return _vm.$emit('loadMore')}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Load more'))+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('div',{key:\"loadingMore\",class:{'icon-loading-small': _vm.loadingMore},attrs:{\"id\":\"load-more-mail-messages\"}})],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport IssueTemplateBuilder from 'nextcloud_issuetemplate_builder'\n\nconst flattenError = (error) => {\n\tlet text = ''\n\tif (error.type) {\n\t\ttext += error.type + ': '\n\t}\n\ttext += error.message\n\ttext += '\\n'\n\tif (error.trace) {\n\t\ttext += flattenTrace(error.trace)\n\t}\n\tif (error.stack) {\n\t\ttext += error.stack\n\t}\n\treturn text\n}\n\nconst flattenTrace = (trace) => {\n\treturn trace.reduce(function(acc, entry) {\n\t\tlet text = ''\n\t\tif (entry.class) {\n\t\t\ttext += '  at ' + entry.class + '::' + entry.function\n\t\t} else {\n\t\t\ttext += '  at ' + entry.function\n\t\t}\n\t\tif (entry.file) {\n\t\t\ttext += '\\n     ' + entry.file + ', line ' + entry.line\n\t\t}\n\t\treturn acc + text + '\\n'\n\t}, '')\n}\n\nexport const getReportUrl = (error) => {\n\tconsole.error(error)\n\tlet message = error.message || 'An unkown error occurred.'\n\tif (!message.endsWith('.')) {\n\t\tmessage += '.'\n\t}\n\tconst builder = new IssueTemplateBuilder()\n\tconst template = builder\n\t\t.addEmptyStepsToReproduce()\n\t\t.addExpectedActualBehaviour()\n\t\t.addLogs('Error', flattenError(error))\n\t\t.render()\n\n\treturn (\n\t\t'https://github.com/nextcloud/mail/issues/new'\n\t\t+ '?title='\n\t\t+ encodeURIComponent(message)\n\t\t+ '&body='\n\t\t+ encodeURIComponent(template)\n\t)\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Error.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Error.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"emptycontent\">\n\t\t<h2>{{ error }}</h2>\n\t\t<p>{{ message }}</p>\n\t\t<p v-if=\"data && data.debug\">\n\t\t\t<a class=\"button\"\n\t\t\t\t:href=\"reportUrl\"\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\trel=\"noopener\">{{ t('mail', 'Report this bug') }}</a>\n\t\t</p>\n\t</div>\n</template>\n\n<script>\nimport { getReportUrl } from '../util/CrashReport'\n\nexport default {\n\tname: 'Error',\n\tprops: {\n\t\terror: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t},\n\tcomputed: {\n\t\treportUrl() {\n\t\t\treturn getReportUrl(this.data)\n\t\t},\n\t},\n}\n</script>\n","import { render, staticRenderFns } from \"./Error.vue?vue&type=template&id=e2d62ba4&\"\nimport script from \"./Error.vue?vue&type=script&lang=js&\"\nexport * from \"./Error.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"emptycontent\"},[_c('h2',[_vm._v(_vm._s(_vm.error))]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.message))]),_vm._v(\" \"),(_vm.data && _vm.data.debug)?_c('p',[_c('a',{staticClass:\"button\",attrs:{\"href\":_vm.reportUrl,\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(_vm._s(_vm.t('mail', 'Report this bug')))])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loading.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loading.vue?vue&type=script&lang=js&\"","<template>\n\t<div v-if=\"hint\" class=\"emptycontent\">\n\t\t<a class=\"icon-loading\" />\n\t\t<h2>{{ hint }}</h2>\n\t\t<transition name=\"fade\">\n\t\t\t<em v-if=\"slowHint && slow\">{{ slowHint }}</em>\n\t\t</transition>\n\t</div>\n\t<div v-else class=\"container icon-loading\" />\n</template>\n\n<script>\nexport default {\n\tname: 'Loading',\n\tprops: {\n\t\thint: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t\trequired: false,\n\t\t},\n\t\tslowHint: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t\trequired: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tslow: false,\n\t\t\tslowTimer: undefined,\n\t\t}\n\t},\n\tmounted() {\n\t\tclearTimeout(this.slowTimer)\n\n\t\tthis.slowTimer = setTimeout(() => {\n\t\t\tthis.slow = true\n\t\t}, 3500)\n\t},\n\tbeforeDestroy() {\n\t\tclearTimeout(this.slowTimer)\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.fade-enter-active,\n.fade-leave-active {\n\ttransition: opacity 0.5s;\n}\n.fade-enter,\n.fade-leave-to {\n\topacity: 0;\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loading.vue?vue&type=style&index=0&id=5dce5c60&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./Loading.vue?vue&type=template&id=5dce5c60&scoped=true&\"\nimport script from \"./Loading.vue?vue&type=script&lang=js&\"\nexport * from \"./Loading.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Loading.vue?vue&type=style&index=0&id=5dce5c60&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5dce5c60\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.hint)?_c('div',{staticClass:\"emptycontent\"},[_c('a',{staticClass:\"icon-loading\"}),_vm._v(\" \"),_c('h2',[_vm._v(_vm._s(_vm.hint))]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.slowHint && _vm.slow)?_c('em',[_vm._v(_vm._s(_vm.slowHint))]):_vm._e()])],1):_c('div',{staticClass:\"container icon-loading\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmptyMailboxSection.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmptyMailboxSection.vue?vue&type=script&lang=js&\"","<template>\n\t<div id=\"emptycontent\">\n\t\t<slot> {{ t('mail', 'No messages') }}</slot>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tname: 'EmptyMailboxSection',\n}\n</script>\n<style scoped lang=\"scss\">\n#emptycontent {\n\tmargin-top: 10px;\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmptyMailboxSection.vue?vue&type=style&index=0&id=4512145e&scoped=true&lang=scss&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","<!--\n  - @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<Error v-if=\"error\"\n\t\t:error=\"t('mail', 'Could not open mailbox')\"\n\t\tmessage=\"\"\n\t\trole=\"alert\" />\n\t<Loading v-else-if=\"loadingEnvelopes\" :hint=\"t('mail', 'Loading messages')\" role=\"alert\" />\n\t<Loading\n\t\tv-else-if=\"loadingCacheInitialization\"\n\t\t:hint=\"t('mail', 'Loading messages')\"\n\t\t:slow-hint=\"t('mail', 'Indexing your messages. This can take a bit longer for larger mailboxes.')\" />\n\t<EmptyMailboxSection v-else-if=\"isPriorityInbox && !hasMessages\" key=\"empty\" />\n\t<EmptyMailbox v-else-if=\"!hasMessages\" key=\"empty\" />\n\t<EnvelopeList\n\t\tv-else\n\t\t:account=\"account\"\n\t\t:mailbox=\"mailbox\"\n\t\t:search-query=\"searchQuery\"\n\t\t:envelopes=\"envelopesToShow\"\n\t\t:refreshing=\"refreshing\"\n\t\t:loading-more=\"loadingMore\"\n\t\t:load-more-button=\"showLoadMore\"\n\t\t@delete=\"onDelete\"\n\t\t@loadMore=\"loadMore\" />\n</template>\n\n<script>\nimport EmptyMailbox from './EmptyMailbox'\nimport EnvelopeList from './EnvelopeList'\nimport Error from './Error'\nimport { findIndex, propEq } from 'ramda'\nimport isMobile from '@nextcloud/vue/dist/Mixins/isMobile'\nimport Loading from './Loading'\nimport logger from '../logger'\nimport MailboxLockedError from '../errors/MailboxLockedError'\nimport MailboxNotCachedError from '../errors/MailboxNotCachedError'\nimport { matchError } from '../errors/match'\nimport { wait } from '../util/wait'\nimport EmptyMailboxSection from './EmptyMailboxSection'\nimport { showError } from '@nextcloud/dialogs'\nimport NoTrashMailboxConfiguredError\n\tfrom '../errors/NoTrashMailboxConfiguredError'\n\nexport default {\n\tname: 'Mailbox',\n\tcomponents: {\n\t\tEmptyMailboxSection,\n\t\tEmptyMailbox,\n\t\tEnvelopeList,\n\t\tError,\n\t\tLoading,\n\t},\n\tmixins: [isMobile],\n\tprops: {\n\t\taccount: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tmailbox: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tbus: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tpaginate: {\n\t\t\ttype: String,\n\t\t\tdefault: 'scroll',\n\t\t},\n\t\tinitialPageSize: {\n\t\t\ttype: Number,\n\t\t\tdefault: 20,\n\t\t},\n\t\topenFirst: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tsearchQuery: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: undefined,\n\t\t},\n\t\tisPriorityInbox: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\terror: false,\n\t\t\trefreshing: false,\n\t\t\tloadingMore: false,\n\t\t\tloadingEnvelopes: true,\n\t\t\tloadingCacheInitialization: false,\n\t\t\tloadMailboxInterval: undefined,\n\t\t\texpanded: false,\n\t\t\tendReached: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tenvelopes() {\n\t\t\treturn this.$store.getters.getEnvelopes(this.mailbox.databaseId, this.searchQuery)\n\t\t},\n\t\tenvelopesToShow() {\n\t\t\tif (this.paginate === 'manual' && !this.expanded) {\n\t\t\t\treturn this.envelopes.slice(0, 5)\n\t\t\t}\n\t\t\treturn this.envelopes\n\t\t},\n\t\thasMessages() {\n\t\t\treturn this.envelopes.length > 0\n\t\t},\n\t\tshowLoadMore() {\n\t\t\treturn !this.endReached && this.paginate === 'manual'\n\t\t},\n\t},\n\twatch: {\n\t\taccount() {\n\t\t\tthis.loadEnvelopes()\n\t\t},\n\t\tmailbox() {\n\t\t\tthis.loadEnvelopes()\n\t\t\t\t.then(() => {\n\t\t\t\t\tlogger.debug(`syncing mailbox ${this.mailbox.databaseId} (${this.searchQuery}) after mailbox change`)\n\t\t\t\t\tthis.sync(false)\n\t\t\t\t})\n\t\t},\n\t\tsearchQuery() {\n\t\t\tthis.loadEnvelopes()\n\t\t},\n\t},\n\tcreated() {\n\t\tthis.bus.$on('loadMore', this.onScroll)\n\t\tthis.bus.$on('delete', this.onDelete)\n\t\tthis.bus.$on('shortcut', this.handleShortcut)\n\t\tthis.loadMailboxInterval = setInterval(this.loadMailbox, 60000)\n\t},\n\tasync mounted() {\n\t\tthis.loadEnvelopes()\n\t\t\t.then(() => {\n\t\t\t\tlogger.debug(`syncing mailbox ${this.mailbox.databaseId} (${this.searchQuery}) after mount`)\n\t\t\t\tthis.sync(false)\n\t\t\t})\n\t},\n\tdestroyed() {\n\t\tthis.bus.$off('loadMore', this.onScroll)\n\t\tthis.bus.$off('delete', this.onDelete)\n\t\tthis.bus.$off('shortcut', this.handleShortcut)\n\t\tthis.stopInterval()\n\t},\n\tmethods: {\n\t\tinitializeCache() {\n\t\t\tthis.loadingCacheInitialization = true\n\t\t\tthis.error = false\n\n\t\t\tlogger.debug(`syncing mailbox ${this.mailbox.databaseId} (${this.searchQuery}) during cache initalization`)\n\t\t\tthis.sync(true)\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.loadingCacheInitialization = false\n\n\t\t\t\t\treturn this.loadEnvelopes()\n\t\t\t\t})\n\t\t},\n\t\tasync loadEnvelopes() {\n\t\t\tlogger.debug(`Fetching envelopes for mailbox ${this.mailbox.databaseId} (${this.searchQuery})`, this.mailbox)\n\t\t\tthis.loadingEnvelopes = true\n\t\t\tthis.loadingCacheInitialization = false\n\t\t\tthis.error = false\n\n\t\t\ttry {\n\t\t\t\tconst envelopes = await this.$store.dispatch('fetchEnvelopes', {\n\t\t\t\t\tmailboxId: this.mailbox.databaseId,\n\t\t\t\t\tquery: this.searchQuery,\n\t\t\t\t\tlimit: this.initialPageSize,\n\t\t\t\t})\n\n\t\t\t\tlogger.debug(envelopes.length + ' envelopes fetched', { envelopes })\n\n\t\t\t\tthis.loadingEnvelopes = false\n\n\t\t\t\tif (this.openFirst && !this.isMobile && this.$route.name !== 'message' && envelopes.length > 0) {\n\t\t\t\t\t// Show first message\n\t\t\t\t\tconst first = envelopes[0]\n\n\t\t\t\t\t// Keep the selected account-mailbox combination, but navigate to the message\n\t\t\t\t\t// (it's not a bug that we don't use first.accountId and first.mailboxId here)\n\t\t\t\t\tlogger.debug('showing the first message of mailbox ' + this.$route.params.mailboxId)\n\t\t\t\t\tif (first.flags.draft) {\n\t\t\t\t\t\tthis.$router.replace({\n\t\t\t\t\t\t\tname: 'message',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t\t\t\t\tthreadId: 'new',\n\t\t\t\t\t\t\t\tdraftId: first.databaseId,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$router.replace({\n\t\t\t\t\t\t\tname: 'message',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t\t\t\t\tthreadId: first.databaseId,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tawait matchError(error, {\n\t\t\t\t\t[MailboxLockedError.getName()]: async(error) => {\n\t\t\t\t\t\tlogger.info(`Mailbox ${this.mailbox.databaseId} (${this.searchQuery}) is locked`, { error })\n\n\t\t\t\t\t\tawait wait(15 * 1000)\n\t\t\t\t\t\t// Keep trying\n\t\t\t\t\t\tawait this.loadEnvelopes()\n\t\t\t\t\t},\n\t\t\t\t\t[MailboxNotCachedError.getName()]: async(error) => {\n\t\t\t\t\t\tlogger.info(`Mailbox ${this.mailbox.databaseId} (${this.searchQuery}) not cached. Triggering initialization`, { error })\n\t\t\t\t\t\tthis.loadingEnvelopes = false\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait this.initializeCache()\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tlogger.error(`Could not initialize cache of mailbox ${this.mailbox.databaseId} (${this.searchQuery})`, { error })\n\t\t\t\t\t\t\tthis.error = error\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdefault: (error) => {\n\t\t\t\t\t\tlogger.error(`Could not fetch envelopes of mailbox ${this.mailbox.databaseId} (${this.searchQuery})`, { error })\n\t\t\t\t\t\tthis.loadingEnvelopes = false\n\t\t\t\t\t\tthis.error = error\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tasync loadMore() {\n\t\t\tif (!this.expanded) {\n\t\t\t\tlogger.debug('expanding envelope list')\n\t\t\t\tthis.expanded = true\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tlogger.debug('fetching next envelope page')\n\t\t\tthis.loadingMore = true\n\n\t\t\ttry {\n\t\t\t\tconst envelopes = await this.$store.dispatch('fetchNextEnvelopePage', {\n\t\t\t\t\tmailboxId: this.mailbox.databaseId,\n\t\t\t\t\tenvelopes: this.envelopes,\n\t\t\t\t\tquery: this.searchQuery,\n\t\t\t\t})\n\t\t\t\tif (envelopes.length === 0) {\n\t\t\t\t\tlogger.info('envelope list end reached')\n\t\t\t\t\tthis.endReached = true\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not fetch next envelope page', { error })\n\t\t\t} finally {\n\t\t\t\tthis.loadingMore = false\n\t\t\t}\n\t\t},\n\t\tasync handleShortcut(e) {\n\t\t\tconst envelopes = this.envelopes\n\t\t\tconst currentId = parseInt(this.$route.params.threadId, 10)\n\n\t\t\tconst env = envelopes.find((e) => e.databaseId === currentId)\n\t\t\tconst idx = envelopes.indexOf(env)\n\t\t\tlet next\n\n\t\t\tif (e.srcKey !== 'refresh' && !env) {\n\t\t\t\tlogger.debug('envelope is not in the list, ignoring shortcut', {\n\t\t\t\t\tsrcKey: e.srcKey,\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tswitch (e.srcKey) {\n\t\t\tcase 'next':\n\t\t\tcase 'prev':\n\t\t\t\tif (e.srcKey === 'next') {\n\t\t\t\t\tnext = envelopes[idx + 1]\n\t\t\t\t} else {\n\t\t\t\t\tnext = envelopes[idx - 1]\n\t\t\t\t}\n\n\t\t\t\tif (!next) {\n\t\t\t\t\tlogger.debug('ignoring shortcut: head or tail of envelope list reached', {\n\t\t\t\t\t\tenvelopes,\n\t\t\t\t\t\tidx,\n\t\t\t\t\t\tsrcKey: e.srcKey,\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\t// Keep the selected account-mailbox combination, but navigate to a different message\n\t\t\t\t// (it's not a bug that we don't use next.accountId and next.mailboxId here)\n\t\t\t\tthis.$router.push({\n\t\t\t\t\tname: 'message',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t\t\tthreadId: next.databaseId,\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t\tbreak\n\t\t\tcase 'del':\n\t\t\t\tlogger.debug('deleting', { env })\n\t\t\t\tthis.onDelete(env.databaseId)\n\t\t\t\ttry {\n\t\t\t\t\tawait this.$store.dispatch('deleteMessage', {\n\t\t\t\t\t\tid: env.databaseId,\n\t\t\t\t\t})\n\t\t\t\t} catch (error) {\n\t\t\t\t\tlogger.error('could not delete envelope', {\n\t\t\t\t\t\tenv,\n\t\t\t\t\t\terror,\n\t\t\t\t\t})\n\n\t\t\t\t\tshowError(await matchError(error, {\n\t\t\t\t\t\t[NoTrashMailboxConfiguredError.getName()]() {\n\t\t\t\t\t\t\treturn t('mail', 'No trash mailbox configured')\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault() {\n\t\t\t\t\t\t\treturn t('mail', 'Could not delete message')\n\t\t\t\t\t\t},\n\t\t\t\t\t}))\n\t\t\t\t}\n\n\t\t\t\tbreak\n\t\t\tcase 'flag':\n\t\t\t\tlogger.debug('flagging envelope via shortkey', { env })\n\t\t\t\tthis.$store.dispatch('toggleEnvelopeFlagged', env).catch((error) =>\n\t\t\t\t\tlogger.error('could not flag envelope via shortkey', {\n\t\t\t\t\t\tenv,\n\t\t\t\t\t\terror,\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t\tbreak\n\t\t\tcase 'refresh':\n\t\t\t\tlogger.debug(`syncing mailbox ${this.mailbox.databaseId} (${this.searchQuery}) per shortcut`)\n\t\t\t\tthis.sync(false)\n\n\t\t\t\tbreak\n\t\t\tcase 'unseen':\n\t\t\t\tlogger.debug('marking message as seen/unseen via shortkey', { env })\n\t\t\t\tthis.$store.dispatch('toggleEnvelopeSeen', { envelope: env }).catch((error) =>\n\t\t\t\t\tlogger.error('could not mark envelope as seen/unseen via shortkey', {\n\t\t\t\t\t\tenv,\n\t\t\t\t\t\terror,\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\tlogger.warn('shortcut ' + e.srcKey + ' is unknown. ignoring.')\n\t\t\t}\n\t\t},\n\t\tasync sync(init = false) {\n\t\t\tif (this.refreshing) {\n\t\t\t\tlogger.debug(`already sync'ing mailbox ${this.mailbox.databaseId} (${this.searchQuery}), aborting`, { init })\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.refreshing = true\n\t\t\ttry {\n\t\t\t\tawait this.$store.dispatch('syncEnvelopes', {\n\t\t\t\t\tmailboxId: this.mailbox.databaseId,\n\t\t\t\t\tquery: this.searchQuery,\n\t\t\t\t\tinit,\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tmatchError(error, {\n\t\t\t\t\t[MailboxLockedError.getName()](error) {\n\t\t\t\t\t\tlogger.info('Background sync failed because the mailbox is locked', { error, init })\n\t\t\t\t\t},\n\t\t\t\t\tdefault(error) {\n\t\t\t\t\t\tlogger.error('Could not sync envelopes: ' + error.message, { error, init })\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t} finally {\n\t\t\t\tthis.refreshing = false\n\t\t\t\tlogger.debug(`finished sync'ing mailbox ${this.mailbox.databaseId} (${this.searchQuery})`, { init })\n\t\t\t}\n\t\t},\n\t\tonDelete(id) {\n\t\t\tconst idx = findIndex(propEq('databaseId', id), this.envelopes)\n\t\t\tif (idx === -1) {\n\t\t\t\tlogger.debug('envelope to delete does not exist in envelope list')\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.envelopes.splice(idx, 1)\n\t\t\tif (id !== this.$route.params.threadId) {\n\t\t\t\tlogger.debug('other message open, not jumping to the next/previous message')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst next = this.envelopes[idx === 0 ? idx : idx - 1]\n\t\t\tif (!next) {\n\t\t\t\tlogger.debug('no next/previous envelope, not navigating')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// Keep the selected mailbox, but navigate to a different message\n\t\t\t// (it's not a bug that we don't use next.mailboxId here)\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t\tthreadId: next.databaseId,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\tonScroll() {\n\t\t\tif (this.paginate !== 'scroll') {\n\t\t\t\tlogger.debug('ignoring scroll pagination')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.loadMore()\n\t\t},\n\t\tasync loadMailbox() {\n\t\t\t// When the account is unified or inbox, return nothing, else sync the mailbox\n\t\t\tif (this.account.isUnified || this.mailbox.specialRole === 'inbox') {\n\t\t\t\treturn\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tlogger.debug(`syncing mailbox ${this.mailbox.databaseId} (${this.searchQuery}) in background`)\n\t\t\t\tawait this.sync(false)\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('Background sync failed: ' + error.message, { error })\n\t\t\t}\n\t\t},\n\t\tstopInterval() {\n\t\t\tclearInterval(this.loadMailboxInterval)\n\t\t\tthis.loadMailboxInterval = undefined\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n// Fix vertical space between sections in priority inbox\n.nameimportant,\n.namestarred {\n\t::v-deep #load-more-mail-messages {\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 8px;\n\t}\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mailbox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mailbox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EmptyMailboxSection.vue?vue&type=template&id=4512145e&scoped=true&\"\nimport script from \"./EmptyMailboxSection.vue?vue&type=script&lang=js&\"\nexport * from \"./EmptyMailboxSection.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EmptyMailboxSection.vue?vue&type=style&index=0&id=4512145e&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4512145e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"emptycontent\"}},[_vm._t(\"default\",[_vm._v(\" \"+_vm._s(_vm.t('mail', 'No messages')))])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mailbox.vue?vue&type=style&index=0&id=45a02c20&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./Mailbox.vue?vue&type=template&id=45a02c20&scoped=true&\"\nimport script from \"./Mailbox.vue?vue&type=script&lang=js&\"\nexport * from \"./Mailbox.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Mailbox.vue?vue&type=style&index=0&id=45a02c20&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"45a02c20\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.error)?_c('Error',{attrs:{\"error\":_vm.t('mail', 'Could not open mailbox'),\"message\":\"\",\"role\":\"alert\"}}):(_vm.loadingEnvelopes)?_c('Loading',{attrs:{\"hint\":_vm.t('mail', 'Loading messages'),\"role\":\"alert\"}}):(_vm.loadingCacheInitialization)?_c('Loading',{attrs:{\"hint\":_vm.t('mail', 'Loading messages'),\"slow-hint\":_vm.t('mail', 'Indexing your messages. This can take a bit longer for larger mailboxes.')}}):(_vm.isPriorityInbox && !_vm.hasMessages)?_c('EmptyMailboxSection',{key:\"empty\"}):(!_vm.hasMessages)?_c('EmptyMailbox',{key:\"empty\"}):_c('EnvelopeList',{attrs:{\"account\":_vm.account,\"mailbox\":_vm.mailbox,\"search-query\":_vm.searchQuery,\"envelopes\":_vm.envelopesToShow,\"refreshing\":_vm.refreshing,\"loading-more\":_vm.loadingMore,\"load-more-button\":_vm.showLoadMore},on:{\"delete\":_vm.onDelete,\"loadMore\":_vm.loadMore}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\n * @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport axios from '@nextcloud/axios'\nimport { generateRemoteUrl } from '@nextcloud/router'\nimport { getCurrentUser } from '@nextcloud/auth'\nimport memoize from 'lodash/fp/memoize'\nimport * as webdav from 'webdav'\n\nconst getWebDavClient = memoize(() => {\n\t// Add this so the server knows it is an request from the browser\n\taxios.defaults.headers['X-Requested-With'] = 'XMLHttpRequest'\n\n\t// force our axios\n\tconst patcher = webdav.getPatcher()\n\tpatcher.patch('request', axios)\n\n\treturn webdav.createClient(\n\t\tgenerateRemoteUrl(`dav/files/${getCurrentUser().uid}`)\n\t)\n})\n\nexport async function getFileSize(path) {\n\tconst response = await getWebDavClient().stat(path, {\n\t\tdata: `<?xml version=\"1.0\"?>\n\t\t\t<d:propfind  xmlns:d=\"DAV:\"\n\t\t\t\txmlns:oc=\"http://owncloud.org/ns\">\n\t\t\t\t<d:prop>\n\t\t\t\t\t<oc:size />\n\t\t\t\t</d:prop>\n\t\t\t</d:propfind>`,\n\t\tdetails: true,\n\t})\n\n\treturn response?.data?.props?.size\n}\n","/**\n * @copyright Copyright (c) 2019 Marco Ambrosini <marcoambrosini@pm.me>\n * @copyright Copyright (c) 2020 Gary Kim <gary@garykim.dev>\n *\n * @author Marco Ambrosini <marcoambrosini@pm.me>\n * @author Gary Kim <gary@garykim.dev>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\n// File originally from https://github.com/nextcloud/spreed/blob/bc22c21cf70a6243e7df7d838d49018c61468050/src/services/filesSharingServices.js\n// Slightly modified for use in Mail\n\nimport axios from '@nextcloud/axios'\nimport { generateOcsUrl } from '@nextcloud/router'\nimport { showError } from '@nextcloud/dialogs'\n\n/**\n * Makes a share link for a given file or directory.\n * @param {string} path The file path from the user's root directory. e.g. `/myfile.txt`\n * @param {string} token The conversation's token\n * @returns {string} url share link\n */\nconst shareFile = async function(path, token) {\n\ttry {\n\t\tconst res = await axios.post(generateOcsUrl('apps/files_sharing/api/v1', 2) + 'shares', {\n\t\t\tshareType: 3, // OC.Share.SHARE_TYPE_LINK,\n\t\t\tpath,\n\t\t\tshareWith: token,\n\t\t})\n\t\treturn res.data.ocs.data.url\n\t} catch (error) {\n\t\tif (\n\t\t\terror.response\n\t\t\t&& error.response.data\n\t\t\t&& error.response.data.ocs\n\t\t\t&& error.response.data.ocs.meta\n\t\t\t&& error.response.data.ocs.meta.message\n\t\t) {\n\t\t\tconsole.error(`Error while sharing file: ${error.response.data.ocs.meta.message || 'Unknown error'}`)\n\t\t\tshowError(error.response.data.ocs.meta.message)\n\t\t\tthrow error\n\t\t} else {\n\t\t\tconsole.error('Error while sharing file: Unknown error')\n\t\t\tshowError(t('mail', 'Error while sharing file'))\n\t\t\tthrow error\n\t\t}\n\t}\n}\n\nexport { shareFile }\n","/*\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Axios from '@nextcloud/axios'\nimport { generateUrl } from '@nextcloud/router'\n\nexport function saveAttachmentToFiles(id, attachmentId, directory) {\n\tconst url = generateUrl(\n\t\t'/apps/mail/api/messages/{id}/attachment/{attachmentId}',\n\t\t{\n\t\t\tid,\n\t\t\tattachmentId,\n\t\t}\n\t)\n\n\treturn Axios.post(url, {\n\t\ttargetPath: directory,\n\t})\n}\n\nexport function saveAttachmentsToFiles(id, directory) {\n\t// attachmentId = 0 means 'all attachments' (see MessageController.php::saveAttachement)\n\treturn saveAttachmentToFiles(id, 0, directory)\n}\n\nexport function downloadAttachment(url) {\n\treturn Axios.get(url).then((res) => res.data)\n}\n\nexport const uploadLocalAttachment = (file, progress) => {\n\tconst url = generateUrl('/apps/mail/api/attachments')\n\tconst data = new FormData()\n\tconst opts = {\n\t\tonUploadProgress: (prog) => progress(prog, prog.loaded, prog.total),\n\t}\n\tdata.append('attachment', file)\n\n\treturn Axios.post(url, data, opts)\n\t\t.then((resp) => resp.data)\n\t\t.then(({ id }) => {\n\t\t\treturn {\n\t\t\t\tfile,\n\t\t\t\tid,\n\t\t\t}\n\t\t})\n}\n","<!--\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  - @copyright 2020 Gary Kim <gary@garykim.dev>\n  -\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"new-message-attachments\">\n\t\t<ul>\n\t\t\t<li v-for=\"attachment in value\" :key=\"attachment.id\">\n\t\t\t\t<div class=\"new-message-attachment-name\">\n\t\t\t\t\t{{ attachment.displayName }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"new-message-attachments-action svg icon-delete\" @click=\"onDelete(attachment)\" />\n\t\t\t</li>\n\t\t\t<li v-if=\"uploading\" class=\"attachments-upload-progress\">\n\t\t\t\t<div :class=\"{'icon-loading-small': uploading}\" />\n\t\t\t\t<div>{{ uploading ? t('mail', 'Uploading {percent}% …', {percent: uploadProgress}) : '' }}</div>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t<input ref=\"localAttachments\"\n\t\t\ttype=\"file\"\n\t\t\tmultiple\n\t\t\tstyle=\"display: none;\"\n\t\t\t@change=\"onLocalAttachmentSelected\">\n\t</div>\n</template>\n\n<script>\nimport map from 'lodash/fp/map'\nimport trimStart from 'lodash/fp/trimCharsStart'\nimport { getRequestToken } from '@nextcloud/auth'\nimport { formatFileSize } from '@nextcloud/files'\nimport prop from 'lodash/fp/prop'\nimport { getFilePickerBuilder, showWarning } from '@nextcloud/dialogs'\nimport sum from 'lodash/fp/sum'\nimport sumBy from 'lodash/fp/sumBy'\nimport { translate as t, translatePlural as n } from '@nextcloud/l10n'\n\nimport Vue from 'vue'\n\nimport logger from '../logger'\nimport { getFileSize } from '../service/FileService'\nimport { shareFile } from '../service/FileSharingService'\nimport { uploadLocalAttachment } from '../service/AttachmentService'\n\nexport default {\n\tname: 'ComposerAttachments',\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tbus: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tuploadSizeLimit: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tuploading: false,\n\t\t\tuploads: {},\n\t\t}\n\t},\n\tcomputed: {\n\t\tuploadProgress() {\n\t\t\tlet uploaded = 0\n\t\t\tlet total = 0\n\t\t\tfor (const id in this.uploads) {\n\t\t\t\tuploaded += this.uploads[id].uploaded\n\t\t\t\ttotal += this.uploads[id].total\n\t\t\t}\n\t\t\treturn ((uploaded / total) * 100).toFixed(1)\n\t\t},\n\t},\n\tcreated() {\n\t\tthis.bus.$on('onAddLocalAttachment', this.onAddLocalAttachment)\n\t\tthis.bus.$on('onAddCloudAttachment', this.onAddCloudAttachment)\n\t\tthis.bus.$on('onAddCloudAttachmentLink', this.onAddCloudAttachmentLink)\n\t},\n\tmethods: {\n\t\tonAddLocalAttachment() {\n\t\t\tthis.$refs.localAttachments.click()\n\t\t},\n\t\temitNewAttachments(attachments) {\n\t\t\tthis.$emit('input', this.value.concat(attachments))\n\t\t},\n\t\ttotalSizeOfUpload() {\n\t\t\treturn Object.values(this.value).reduce((acc, upload) => {\n\t\t\t\tif (!upload.type === 'local') {\n\t\t\t\t\t// Ignore link shares\n\t\t\t\t\treturn acc\n\t\t\t\t}\n\n\t\t\t\treturn acc + upload.size\n\t\t\t}, 0)\n\t\t},\n\t\tonLocalAttachmentSelected(e) {\n\t\t\tthis.uploading = true\n\n\t\t\tVue.set(this, 'uploads', {})\n\n\t\t\tconst toUpload = sumBy(prop('size'), Object.values(e.target.files))\n\t\t\tconst newTotal = toUpload + this.totalSizeOfUpload()\n\t\t\tlogger.debug('checking upload size limit', {\n\t\t\t\texistingUploads: this.totalSizeOfUpload(),\n\t\t\t\ttoUpload,\n\t\t\t\tlimit: this.uploadSizeLimit,\n\t\t\t\tnewTotal,\n\t\t\t})\n\t\t\tif (this.uploadSizeLimit && newTotal > this.uploadSizeLimit) {\n\t\t\t\tthis.showAttachmentFileSizeWarning(e.target.files.length)\n\n\t\t\t\tthis.uploading = false\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst progress = (id) => (prog, uploaded) => {\n\t\t\t\tthis.uploads[id].uploaded = uploaded\n\t\t\t}\n\n\t\t\tconst promises = map((file) => {\n\t\t\t\tVue.set(this.uploads, file.name, {\n\t\t\t\t\ttotal: file.size,\n\t\t\t\t\tuploaded: 0,\n\t\t\t\t})\n\n\t\t\t\treturn uploadLocalAttachment(file, progress(file.name)).then(({ file, id }) => {\n\t\t\t\t\tlogger.info('uploaded')\n\t\t\t\t\tthis.emitNewAttachments([{\n\t\t\t\t\t\tfileName: file.name,\n\t\t\t\t\t\tdisplayName: trimStart('/', file.name),\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tsize: file.size,\n\t\t\t\t\t\ttype: 'local',\n\t\t\t\t\t}])\n\t\t\t\t})\n\n\t\t\t}, e.target.files)\n\n\t\t\tconst done = Promise.all(promises)\n\t\t\t\t.catch((error) => logger.error('could not upload all attachments', { error }))\n\t\t\t\t.then(() => (this.uploading = false))\n\n\t\t\tthis.$emit('upload', done)\n\n\t\t\treturn done\n\t\t},\n\t\tasync onAddCloudAttachment() {\n\t\t\tconst picker = getFilePickerBuilder(t('mail', 'Choose a file to add as attachment')).setMultiSelect(true).build()\n\n\t\t\ttry {\n\t\t\t\tconst paths = await picker.pick(t('mail', 'Choose a file to add as attachment'))\n\t\t\t\tconst fileSizes = await Promise.all(paths.map(getFileSize))\n\t\t\t\tconst newTotal = sum(fileSizes) + this.totalSizeOfUpload()\n\n\t\t\t\tif (this.uploadSizeLimit && newTotal > this.uploadSizeLimit) {\n\t\t\t\t\tthis.showAttachmentFileSizeWarning(paths.length)\n\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tthis.emitNewAttachments(paths.map(function(name) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tfileName: name,\n\t\t\t\t\t\tdisplayName: trimStart('/', name),\n\t\t\t\t\t\ttype: 'cloud',\n\t\t\t\t\t}\n\t\t\t\t}))\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not choose a file as attachment', { error })\n\t\t\t}\n\t\t},\n\t\tasync onAddCloudAttachmentLink() {\n\t\t\tconst picker = getFilePickerBuilder(t('mail', 'Choose a file to share as a link')).build()\n\n\t\t\ttry {\n\t\t\t\tconst path = await picker.pick(t('mail', 'Choose a file to share as a link'))\n\t\t\t\tconst url = await shareFile(path, getRequestToken())\n\n\t\t\t\tthis.appendToBodyAtCursor(`<a href=\"${url}\">${url}</a>`)\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not choose a file as attachment link', { error })\n\t\t\t}\n\t\t},\n\t\tshowAttachmentFileSizeWarning(num) {\n\t\t\tshowWarning(n(\n\t\t\t\t'mail',\n\t\t\t\t'The attachment exceed the allowed attachments size of {size}. Please share the file via link instead.',\n\t\t\t\t'The attachments exceed the allowed attachments size of {size}. Please share the files via link instead.',\n\t\t\t\tnum,\n\t\t\t\t{\n\t\t\t\t\tsize: formatFileSize(this.uploadSizeLimit),\n\t\t\t\t}\n\t\t\t))\n\t\t},\n\t\tonDelete(attachment) {\n\t\t\tthis.$emit(\n\t\t\t\t'input',\n\t\t\t\tthis.value.filter((a) => a !== attachment)\n\t\t\t)\n\t\t},\n\t\tappendToBodyAtCursor(toAppend) {\n\t\t\tthis.bus.$emit('appendToBodyAtCursor', toAppend)\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.new-message-attachments li {\n\tpadding: 10px;\n}\n\n.new-message-attachments-action {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tpadding: 22px;\n\topacity: 0.5;\n}\n\n/* attachment filenames */\n.new-message-attachment-name {\n\tdisplay: inline-block;\n}\n\n/* Colour the filename with a different color during attachment upload */\n.new-message-attachment-name.upload-ongoing {\n\tcolor: #0082c9;\n}\n\n/* Colour the filename in red if the attachment upload failed */\n.new-message-attachment-name.upload-warning {\n\tcolor: #d2322d;\n}\n\n/* Red ProgressBar for failed attachment uploads */\n.new-message-attachment-name.upload-warning .ui-progressbar-value {\n\tborder: 1px solid #e9322d;\n\tbackground: #e9322d;\n}\n\n.attachments-upload-progress {\n\tdisplay: flex;\n}\n\n.attachments-upload-progress > div {\n\tpadding-left: 3px;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachments.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachments.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachments.vue?vue&type=style&index=0&id=44ae67a0&scoped=true&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./ComposerAttachments.vue?vue&type=template&id=44ae67a0&scoped=true&\"\nimport script from \"./ComposerAttachments.vue?vue&type=script&lang=js&\"\nexport * from \"./ComposerAttachments.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ComposerAttachments.vue?vue&type=style&index=0&id=44ae67a0&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"44ae67a0\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"new-message-attachments\"},[_c('ul',[_vm._l((_vm.value),function(attachment){return _c('li',{key:attachment.id},[_c('div',{staticClass:\"new-message-attachment-name\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(attachment.displayName)+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"new-message-attachments-action svg icon-delete\",on:{\"click\":function($event){return _vm.onDelete(attachment)}}})])}),_vm._v(\" \"),(_vm.uploading)?_c('li',{staticClass:\"attachments-upload-progress\"},[_c('div',{class:{'icon-loading-small': _vm.uploading}}),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.uploading ? _vm.t('mail', 'Uploading {percent}% …', {percent: _vm.uploadProgress}) : ''))])]):_vm._e()],2),_vm._v(\" \"),_c('input',{ref:\"localAttachments\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"multiple\":\"\"},on:{\"change\":_vm.onLocalAttachmentSelected}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @param {Text} message the message\n * @returns {boolean|*}\n */\nexport const isPgpgMessage = (message) =>\n\tmessage.format === 'plain' && message.value.startsWith('-----BEGIN PGP MESSAGE-----')\n","<!--\n  - @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div id=\"mailvelope-composer\" />\n</template>\n\n<script>\nimport logger from '../logger'\nimport { isPgpgMessage } from '../crypto/pgp'\n\nexport default {\n\tname: 'MailvelopeEditor',\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\trecipients: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tquotedText: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t\tisReplyOrForward: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\teditor: undefined,\n\t\t}\n\t},\n\tasync mounted() {\n\t\tconst isEncrypted = this.quotedText ? isPgpgMessage(this.quotedText) : false\n\t\tconst quotedMail = this.isReplyOrForward ? this.quotedText?.value : undefined\n\n\t\tthis.editor = await window.mailvelope.createEditorContainer('#mailvelope-composer', undefined, {\n\t\t\tquotedMail: isEncrypted ? quotedMail : undefined,\n\t\t})\n\t},\n\tmethods: {\n\t\tasync pull() {\n\t\t\tconst recipients = this.recipients.map((r) => r.email)\n\t\t\tlogger.info('encrypting message', { recipients })\n\t\t\tconst armored = await this.editor.encrypt(recipients)\n\t\t\tlogger.info('message encryted', { armored })\n\n\t\t\tthis.$emit('input', armored)\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n#mailvelope-composer {\n\twidth: 100%;\n\theight: 450px;\n}\n</style>\n","/*\n * @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport logger from '../logger'\n\nlet mailvelope\n\nconst loadMailvelopeStatically = () => window.mailvelope\n\nconst loadMailvelopeDynamically = () =>\n\tnew Promise((resolve) => {\n\t\twindow.addEventListener('mailvelope', () => resolve(window.mailvelope), false)\n\t})\n\nexport const getMailvelope = async() => {\n\tif (mailvelope) {\n\t\treturn mailvelope\n\t}\n\n\tmailvelope = loadMailvelopeStatically()\n\tif (mailvelope) {\n\t\tlogger.debug('mailvelope found statically')\n\t\treturn mailvelope\n\t}\n\n\tlogger.debug('loading mailvelope dynamically')\n\tmailvelope = await loadMailvelopeDynamically()\n\tlogger.debug('mailvelope found dynamically')\n\treturn mailvelope\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MailvelopeEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MailvelopeEditor.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MailvelopeEditor.vue?vue&type=style&index=0&id=1320c887&scoped=true&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./MailvelopeEditor.vue?vue&type=template&id=1320c887&scoped=true&\"\nimport script from \"./MailvelopeEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./MailvelopeEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MailvelopeEditor.vue?vue&type=style&index=0&id=1320c887&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1320c887\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"mailvelope-composer\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div v-if=\"state === STATES.EDITING\" class=\"message-composer\">\n\t\t<div class=\"composer-fields mail-account\">\n\t\t\t<label class=\"from-label\" for=\"from\">\n\t\t\t\t{{ t('mail', 'From') }}\n\t\t\t</label>\n\t\t\t<Multiselect\n\t\t\t\tid=\"from\"\n\t\t\t\tv-model=\"selectedAlias\"\n\t\t\t\t:options=\"aliases\"\n\t\t\t\tlabel=\"name\"\n\t\t\t\ttrack-by=\"selectId\"\n\t\t\t\t:searchable=\"false\"\n\t\t\t\t:hide-selected=\"true\"\n\t\t\t\t:custom-label=\"formatAliases\"\n\t\t\t\t:placeholder=\"t('mail', 'Select account')\"\n\t\t\t\t:clear-on-select=\"false\"\n\t\t\t\t@keyup=\"onInputChanged\" />\n\t\t</div>\n\t\t<div class=\"composer-fields\">\n\t\t\t<label class=\"to-label\" for=\"to\">\n\t\t\t\t{{ t('mail', 'To') }}\n\t\t\t</label>\n\t\t\t<Multiselect\n\t\t\t\tid=\"to\"\n\t\t\t\tref=\"toLabel\"\n\t\t\t\tv-model=\"selectTo\"\n\t\t\t\t:options=\"selectableRecipients\"\n\t\t\t\t:taggable=\"true\"\n\t\t\t\tlabel=\"label\"\n\t\t\t\ttrack-by=\"email\"\n\t\t\t\t:multiple=\"true\"\n\t\t\t\t:placeholder=\"t('mail', 'Contact or email address …')\"\n\t\t\t\t:clear-on-select=\"false\"\n\t\t\t\t:show-no-options=\"false\"\n\t\t\t\t:preserve-search=\"true\"\n\t\t\t\t@keyup=\"onInputChanged\"\n\t\t\t\t@tag=\"onNewToAddr\"\n\t\t\t\t@search-change=\"onAutocomplete\" />\n\t\t\t<a v-if=\"!showCC\"\n\t\t\t\tclass=\"copy-toggle\"\n\t\t\t\thref=\"#\"\n\t\t\t\t@click.prevent=\"showCC = true\">\n\t\t\t\t{{ t('mail', '+ Cc/Bcc') }}\n\t\t\t</a>\n\t\t</div>\n\t\t<div v-if=\"showCC\" class=\"composer-fields\">\n\t\t\t<label for=\"cc\" class=\"cc-label\">\n\t\t\t\t{{ t('mail', 'Cc') }}\n\t\t\t</label>\n\t\t\t<Multiselect\n\t\t\t\tid=\"cc\"\n\t\t\t\tv-model=\"selectCc\"\n\t\t\t\t:options=\"selectableRecipients\"\n\t\t\t\t:taggable=\"true\"\n\t\t\t\tlabel=\"label\"\n\t\t\t\ttrack-by=\"email\"\n\t\t\t\t:multiple=\"true\"\n\t\t\t\t:placeholder=\"t('mail', '')\"\n\t\t\t\t:clear-on-select=\"false\"\n\t\t\t\t:show-no-options=\"false\"\n\t\t\t\t:preserve-search=\"true\"\n\t\t\t\t@keyup=\"onInputChanged\"\n\t\t\t\t@tag=\"onNewCcAddr\"\n\t\t\t\t@search-change=\"onAutocomplete\">\n\t\t\t\t<span slot=\"noOptions\">{{ t('mail', 'No contacts found.') }}</span>\n\t\t\t</Multiselect>\n\t\t</div>\n\t\t<div v-if=\"showCC\" class=\"composer-fields\">\n\t\t\t<label for=\"bcc\" class=\"bcc-label\">\n\t\t\t\t{{ t('mail', 'Bcc') }}\n\t\t\t</label>\n\t\t\t<Multiselect\n\t\t\t\tid=\"bcc\"\n\t\t\t\tv-model=\"selectBcc\"\n\t\t\t\t:options=\"selectableRecipients\"\n\t\t\t\t:taggable=\"true\"\n\t\t\t\tlabel=\"label\"\n\t\t\t\ttrack-by=\"email\"\n\t\t\t\t:multiple=\"true\"\n\t\t\t\t:placeholder=\"t('mail', '')\"\n\t\t\t\t:show-no-options=\"false\"\n\t\t\t\t:preserve-search=\"true\"\n\t\t\t\t@keyup=\"onInputChanged\"\n\t\t\t\t@tag=\"onNewBccAddr\"\n\t\t\t\t@search-change=\"onAutocomplete\">\n\t\t\t\t<span slot=\"noOptions\">{{ t('mail', 'No contacts found.') }}</span>\n\t\t\t</Multiselect>\n\t\t</div>\n\t\t<div class=\"composer-fields\">\n\t\t\t<label for=\"subject\" class=\"subject-label hidden-visually\">\n\t\t\t\t{{ t('mail', 'Subject') }}\n\t\t\t</label>\n\t\t\t<input\n\t\t\t\tid=\"subject\"\n\t\t\t\tv-model=\"subjectVal\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tname=\"subject\"\n\t\t\t\tclass=\"subject\"\n\t\t\t\tautocomplete=\"off\"\n\t\t\t\t:placeholder=\"t('mail', 'Subject …')\"\n\t\t\t\t@keyup=\"onInputChanged\">\n\t\t</div>\n\t\t<div v-if=\"noReply\" class=\"warning noreply-warning\">\n\t\t\t{{ t('mail', 'This message came from a noreply address so your reply will probably not be read.') }}\n\t\t</div>\n\t\t<div v-if=\"mailvelope.keysMissing.length\" class=\"warning noreply-warning\">\n\t\t\t{{\n\t\t\t\tt('mail', 'The following recipients do not have a PGP key: {recipients}.', {\n\t\t\t\t\trecipients: mailvelope.keysMissing.join(', '),\n\t\t\t\t})\n\t\t\t}}\n\t\t</div>\n\t\t<div class=\"composer-fields\">\n\t\t\t<!--@keypress=\"onBodyKeyPress\"-->\n\t\t\t<TextEditor\n\t\t\t\tv-if=\"!encrypt && editorPlainText\"\n\t\t\t\tkey=\"editor-plain\"\n\t\t\t\tv-model=\"bodyVal\"\n\t\t\t\tname=\"body\"\n\t\t\t\tclass=\"message-body\"\n\t\t\t\t:placeholder=\"t('mail', 'Write message …')\"\n\t\t\t\t:focus=\"isReply\"\n\t\t\t\t:bus=\"bus\"\n\t\t\t\t@input=\"onInputChanged\" />\n\t\t\t<TextEditor\n\t\t\t\tv-else-if=\"!encrypt && !editorPlainText\"\n\t\t\t\tkey=\"editor-rich\"\n\t\t\t\tv-model=\"bodyVal\"\n\t\t\t\t:html=\"true\"\n\t\t\t\tname=\"body\"\n\t\t\t\tclass=\"message-body\"\n\t\t\t\t:placeholder=\"t('mail', 'Write message …')\"\n\t\t\t\t:focus=\"isReply\"\n\t\t\t\t:bus=\"bus\"\n\t\t\t\t@input=\"onInputChanged\" />\n\t\t\t<MailvelopeEditor\n\t\t\t\tv-else\n\t\t\t\tref=\"mailvelopeEditor\"\n\t\t\t\tv-model=\"bodyVal\"\n\t\t\t\t:recipients=\"allRecipients\"\n\t\t\t\t:quoted-text=\"body\"\n\t\t\t\t:is-reply-or-forward=\"isReply || isForward\" />\n\t\t</div>\n\t\t<div class=\"composer-actions\">\n\t\t\t<ComposerAttachments v-model=\"attachments\"\n\t\t\t\t:bus=\"bus\"\n\t\t\t\t:upload-size-limit=\"attachmentSizeLimit\"\n\t\t\t\t@upload=\"onAttachmentsUploading\" />\n\t\t\t<div class=\"composer-actions-right\">\n\t\t\t\t<p class=\"composer-actions-draft\">\n\t\t\t\t\t<span v-if=\"!canSaveDraft\" id=\"draft-status\">{{ t('mail', 'Can not save draft because this account does not have a drafts mailbox configured.') }}</span>\n\t\t\t\t\t<span v-else-if=\"savingDraft === true\" id=\"draft-status\">{{ t('mail', 'Saving draft …') }}</span>\n\t\t\t\t\t<span v-else-if=\"savingDraft === false\" id=\"draft-status\">{{ t('mail', 'Draft saved') }}</span>\n\t\t\t\t</p>\n\t\t\t\t<Actions>\n\t\t\t\t\t<ActionButton icon=\"icon-upload\" @click=\"onAddLocalAttachment\">\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\tt('mail', 'Upload attachment')\n\t\t\t\t\t\t}}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton icon=\"icon-folder\" @click=\"onAddCloudAttachment\">\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\tt('mail', 'Add attachment from Files')\n\t\t\t\t\t\t}}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton :disabled=\"encrypt\" icon=\"icon-public\" @click=\"onAddCloudAttachmentLink\">\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\taddShareLink\n\t\t\t\t\t\t}}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionCheckbox\n\t\t\t\t\t\t:checked=\"!encrypt && !editorPlainText\"\n\t\t\t\t\t\t:disabled=\"encrypt\"\n\t\t\t\t\t\t@check=\"editorMode = 'html'\"\n\t\t\t\t\t\t@uncheck=\"editorMode = 'plaintext'\">\n\t\t\t\t\t\t{{ t('mail', 'Enable formatting') }}\n\t\t\t\t\t</ActionCheckbox>\n\t\t\t\t\t<ActionCheckbox\n\t\t\t\t\t\t:checked=\"requestMdn\"\n\t\t\t\t\t\t@check=\"requestMdn = true\"\n\t\t\t\t\t\t@uncheck=\"requestMdn = false\">\n\t\t\t\t\t\t{{ t('mail', 'Request a read receipt') }}\n\t\t\t\t\t</ActionCheckbox>\n\t\t\t\t\t<ActionCheckbox\n\t\t\t\t\t\tv-if=\"mailvelope.available\"\n\t\t\t\t\t\t:checked=\"encrypt\"\n\t\t\t\t\t\t@check=\"encrypt = true\"\n\t\t\t\t\t\t@uncheck=\"encrypt = false\">\n\t\t\t\t\t\t{{ t('mail', 'Encrypt message with Mailvelope') }}\n\t\t\t\t\t</ActionCheckbox>\n\t\t\t\t\t<ActionLink v-else\n\t\t\t\t\t\thref=\"https://www.mailvelope.com/\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\ticon=\"icon-password\">\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\tt('mail', 'Looking for a way to encrypt your emails? Install the Mailvelope browser extension!')\n\t\t\t\t\t\t}}\n\t\t\t\t\t</ActionLink>\n\t\t\t\t</Actions>\n\t\t\t\t<div>\n\t\t\t\t\t<input\n\t\t\t\t\t\tclass=\"submit-message send primary icon-confirm-white\"\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t:value=\"submitButtonTitle\"\n\t\t\t\t\t\t:disabled=\"!canSend\"\n\t\t\t\t\t\t@click=\"onSend\">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<Loading v-else-if=\"state === STATES.UPLOADING\" :hint=\"t('mail', 'Uploading attachments …')\" role=\"alert\" />\n\t<Loading v-else-if=\"state === STATES.SENDING\" :hint=\"t('mail', 'Sending …')\" role=\"alert\" />\n\t<div v-else-if=\"state === STATES.ERROR\" class=\"emptycontent\" role=\"alert\">\n\t\t<h2>{{ t('mail', 'Error sending your message') }}</h2>\n\t\t<p v-if=\"errorText\">\n\t\t\t{{ errorText }}\n\t\t</p>\n\t\t<button class=\"button\" @click=\"state = STATES.EDITING\">\n\t\t\t{{ t('mail', 'Go back') }}\n\t\t</button>\n\t\t<button class=\"button primary\" @click=\"onSend\">\n\t\t\t{{ t('mail', 'Retry') }}\n\t\t</button>\n\t</div>\n\t<div v-else class=\"emptycontent\">\n\t\t<h2>{{ t('mail', 'Message sent!') }}</h2>\n\t\t<button v-if=\"!isReply\" class=\"button primary\" @click=\"reset\">\n\t\t\t{{ t('mail', 'Write another message') }}\n\t\t</button>\n\t</div>\n</template>\n\n<script>\nimport debounce from 'lodash/fp/debounce'\nimport uniqBy from 'lodash/fp/uniqBy'\nimport isArray from 'lodash/fp/isArray'\nimport trimStart from 'lodash/fp/trimCharsStart'\nimport Autosize from 'vue-autosize'\nimport debouncePromise from 'debounce-promise'\nimport Actions from '@nextcloud/vue/dist/Components/Actions'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\nimport ActionCheckbox from '@nextcloud/vue/dist/Components/ActionCheckbox'\nimport ActionLink from '@nextcloud/vue/dist/Components/ActionLink'\nimport Multiselect from '@nextcloud/vue/dist/Components/Multiselect'\nimport { showError } from '@nextcloud/dialogs'\nimport { translate as t } from '@nextcloud/l10n'\nimport Vue from 'vue'\n\nimport ComposerAttachments from './ComposerAttachments'\nimport { findRecipient } from '../service/AutocompleteService'\nimport { detect, html, plain, toHtml, toPlain } from '../util/text'\nimport Loading from './Loading'\nimport logger from '../logger'\nimport TextEditor from './TextEditor'\nimport { buildReplyBody } from '../ReplyBuilder'\nimport MailvelopeEditor from './MailvelopeEditor'\nimport { getMailvelope } from '../crypto/mailvelope'\nimport { isPgpgMessage } from '../crypto/pgp'\nimport { matchError } from '../errors/match'\nimport NoSentMailboxConfiguredError\n\tfrom '../errors/NoSentMailboxConfiguredError'\nimport NoDraftsMailboxConfiguredError\n\tfrom '../errors/NoDraftsMailboxConfiguredError'\n\nconst debouncedSearch = debouncePromise(findRecipient, 500)\n\nconst NO_ALIAS_SET = -1\n\nVue.use(Autosize)\n\nconst STATES = Object.seal({\n\tEDITING: 0,\n\tUPLOADING: 1,\n\tSENDING: 2,\n\tERROR: 3,\n\tFINISHED: 4,\n})\n\nexport default {\n\tname: 'Composer',\n\tcomponents: {\n\t\tMailvelopeEditor,\n\t\tActions,\n\t\tActionButton,\n\t\tActionCheckbox,\n\t\tActionLink,\n\t\tComposerAttachments,\n\t\tLoading,\n\t\tMultiselect,\n\t\tTextEditor,\n\t},\n\tprops: {\n\t\tfromAccount: {\n\t\t\ttype: Number,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t\tto: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tcc: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tbcc: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tsubject: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tbody: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => html(''),\n\t\t},\n\t\tdraft: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t\tsend: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t\treplyTo: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t\tforwardFrom: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tshowCC: this.cc.length > 0,\n\t\t\tselectedAlias: NO_ALIAS_SET, // Fixed in `beforeMount`\n\t\t\tautocompleteRecipients: this.to.concat(this.cc).concat(this.bcc),\n\t\t\tnewRecipients: [],\n\t\t\tsubjectVal: this.subject,\n\t\t\tbodyVal: toHtml(this.body).value,\n\t\t\tattachments: [],\n\t\t\tnoReply: this.to.some((to) => to.email.startsWith('noreply@') || to.email.startsWith('no-reply@')),\n\t\t\tdraftsPromise: Promise.resolve(),\n\t\t\tattachmentsPromise: Promise.resolve(),\n\t\t\tcanSaveDraft: true,\n\t\t\tsavingDraft: undefined,\n\t\t\tsaveDraftDebounced: debounce(10 * 1000, this.saveDraft),\n\t\t\tstate: STATES.EDITING,\n\t\t\terrorText: undefined,\n\t\t\tSTATES,\n\t\t\tselectTo: this.to,\n\t\t\tselectCc: this.cc,\n\t\t\tselectBcc: this.bcc,\n\t\t\tbus: new Vue(),\n\t\t\tencrypt: false,\n\t\t\tmailvelope: {\n\t\t\t\tavailable: false,\n\t\t\t\tkeyRing: undefined,\n\t\t\t\tkeysMissing: [],\n\t\t\t},\n\t\t\teditorMode: 'html',\n\t\t\taddShareLink: t('mail', 'Add share link from {productName} Files', { productName: OC?.theme?.name ?? 'Nextcloud' }),\n\t\t\trequestMdn: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\taliases() {\n\t\t\tlet cnt = 0\n\t\t\tconst accounts = this.$store.getters.accounts.filter((a) => !a.isUnified)\n\t\t\tconst aliases = accounts.flatMap((account) => [\n\t\t\t\t{\n\t\t\t\t\tid: account.id,\n\t\t\t\t\taliasId: null,\n\t\t\t\t\tselectId: cnt++,\n\t\t\t\t\teditorMode: account.editorMode,\n\t\t\t\t\tsignature: account.signature,\n\t\t\t\t\tname: account.name,\n\t\t\t\t\temailAddress: account.emailAddress,\n\t\t\t\t},\n\t\t\t\taccount.aliases.map((alias) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: account.id,\n\t\t\t\t\t\taliasId: alias.id,\n\t\t\t\t\t\tselectId: cnt++,\n\t\t\t\t\t\teditorMode: account.editorMode,\n\t\t\t\t\t\tsignature: account.signature,\n\t\t\t\t\t\tname: alias.name,\n\t\t\t\t\t\temailAddress: alias.alias,\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t])\n\t\t\treturn aliases.flat()\n\t\t},\n\t\tallRecipients() {\n\t\t\treturn this.selectTo.concat(this.selectCc).concat(this.selectBcc)\n\t\t},\n\t\tattachmentSizeLimit() {\n\t\t\treturn this.$store.getters.getPreference('attachment-size-limit')\n\t\t},\n\t\tselectableRecipients() {\n\t\t\treturn this.newRecipients\n\t\t\t\t.concat(this.autocompleteRecipients)\n\t\t\t\t.map((recipient) => ({ ...recipient, label: recipient.label || recipient.email }))\n\t\t},\n\t\tisForward() {\n\t\t\treturn this.forwardFrom !== undefined\n\t\t},\n\t\tisReply() {\n\t\t\treturn this.replyTo !== undefined\n\t\t},\n\t\tcanSend() {\n\t\t\tif (this.encrypt && this.mailvelope.keysMissing.length) {\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\treturn this.selectTo.length > 0 || this.selectCc.length > 0 || this.selectBcc.length > 0\n\t\t},\n\t\teditorPlainText() {\n\t\t\treturn this.editorMode === 'plaintext'\n\t\t},\n\t\tsubmitButtonTitle() {\n\t\t\tif (!this.mailvelope.available) {\n\t\t\t\treturn t('mail', 'Send')\n\t\t\t}\n\n\t\t\treturn this.encrypt ? t('mail', 'Encrypt and send') : t('mail', 'Send unencrypted')\n\t\t},\n\t},\n\twatch: {\n\t\t'$route.params.threadId'() {\n\t\t\tthis.reset()\n\t\t},\n\t\tallRecipients() {\n\t\t\tthis.checkRecipientsKeys()\n\t\t},\n\t},\n\tasync beforeMount() {\n\t\tthis.setAlias()\n\t\tthis.initBody()\n\n\t\tawait this.onMailvelopeLoaded(await getMailvelope())\n\t},\n\tmounted() {\n\t\tif (!this.isReply) {\n\t\t\tthis.$refs.toLabel.$el.focus()\n\t\t}\n\n\t\t// event is triggered when user clicks 'new message' in navigation\n\t\tthis.$root.$on('newMessage', () => {\n\t\t\tthis.draftsPromise\n\t\t\t\t.then(() => {\n\t\t\t\t\treturn this.saveDraft(this.getMessageData)\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\t// wait for the draft to be saved before resetting the message content\n\t\t\t\t\tthis.reset()\n\t\t\t\t})\n\t\t})\n\n\t\t// Add attachments in case of forward\n\t\tif (this.forwardFrom?.attachments !== undefined) {\n\t\t\t// We filter attachments with contentDisposition header set to 'inline' as theyr are rendered\n\t\t\t// in the HTML body\n\t\t\tthis.forwardFrom.attachments.filter(att => att.disposition !== 'inline').forEach(att => {\n\t\t\t\tthis.attachments.push({\n\t\t\t\t\tfileName: att.fileName,\n\t\t\t\t\tdisplayName: trimStart('/', att.fileName),\n\t\t\t\t\tid: att.id,\n\t\t\t\t\tmessageId: this.forwardFrom.databaseId,\n\t\t\t\t\ttype: 'message-attachment',\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\n\t\t// Add messages forwarded as attachments\n\t\tlet forwards = []\n\t\tif (this.$route.query.forwardedMessages && !isArray(this.$route.query.forwardedMessages)) {\n\t\t\tforwards = [this.$route.query.forwardedMessages]\n\t\t} else if (this.$route.query.forwardedMessages && isArray(this.$route.query.forwardedMessages)) {\n\t\t\tforwards = this.$route.query.forwardedMessages\n\t\t}\n\t\tforwards.map(id => {\n\t\t\tconst env = this.$store.getters.getEnvelope(id)\n\t\t\tif (!env) {\n\t\t\t\t// TODO: also happens when the composer page is reloaded\n\t\t\t\tshowError(t('mail', 'Message {id} could not be found', {\n\t\t\t\t\tid,\n\t\t\t\t}))\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.attachments.push({\n\t\t\t\tdisplayName: env.subject + '.eml',\n\t\t\t\tid,\n\t\t\t\ttype: 'message',\n\t\t\t})\n\t\t})\n\t},\n\tbeforeDestroy() {\n\t\tthis.$root.$off('newMessage')\n\n\t\twindow.removeEventListener('mailvelope', this.onMailvelopeLoaded)\n\t},\n\tmethods: {\n\t\tsetAlias() {\n\t\t\tconst previous = this.selectedAlias\n\t\t\tif (this.fromAccount) {\n\t\t\t\tthis.selectedAlias = this.aliases.find((alias) => alias.id === this.fromAccount)\n\t\t\t} else {\n\t\t\t\tthis.selectedAlias = this.aliases[0]\n\t\t\t}\n\t\t\tif (previous === NO_ALIAS_SET) {\n\t\t\t\tthis.editorMode = this.selectedAlias.editorMode\n\t\t\t}\n\t\t},\n\t\tasync checkRecipientsKeys() {\n\t\t\tif (!this.encrypt || !this.mailvelope.available) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst recipients = this.allRecipients.map((r) => r.email)\n\t\t\tconst keysValid = await this.mailvelope.keyRing.validKeyForAddress(recipients)\n\t\t\tlogger.debug('recipients keys validated', { recipients, keysValid })\n\t\t\tthis.mailvelope.keysMissing = recipients.filter((r) => keysValid[r] === false)\n\t\t},\n\t\tinitBody() {\n\t\t\tif (this.replyTo) {\n\t\t\t\tthis.bodyVal = this.bodyWithSignature(\n\t\t\t\t\tthis.selectedAlias,\n\t\t\t\t\tbuildReplyBody(\n\t\t\t\t\t\tthis.editorPlainText ? toPlain(this.body) : toHtml(this.body),\n\t\t\t\t\t\tthis.replyTo.from[0],\n\t\t\t\t\t\tthis.replyTo.dateInt,\n\t\t\t\t\t\tthis.$store.getters.getPreference('reply-mode', 'top') === 'top'\n\t\t\t\t\t).value\n\t\t\t\t).value\n\t\t\t} else if (this.forwardFrom) {\n\t\t\t\tthis.bodyVal = this.bodyWithSignature(\n\t\t\t\t\tthis.selectedAlias,\n\t\t\t\t\tbuildReplyBody(\n\t\t\t\t\t\tthis.editorPlainText ? toPlain(this.body) : toHtml(this.body),\n\t\t\t\t\t\tthis.forwardFrom.from[0],\n\t\t\t\t\t\tthis.forwardFrom.dateInt,\n\t\t\t\t\t\tthis.$store.getters.getPreference('reply-mode', 'top') === 'top'\n\t\t\t\t\t).value\n\t\t\t\t).value\n\t\t\t} else {\n\t\t\t\tthis.bodyVal = this.bodyWithSignature(this.selectedAlias, this.bodyVal).value\n\t\t\t}\n\t\t},\n\t\trecipientToRfc822(recipient) {\n\t\t\tif (recipient.email === recipient.label) {\n\t\t\t\t// From mailto or sender without proper label\n\t\t\t\treturn recipient.email\n\t\t\t} else if (recipient.label === '') {\n\t\t\t\t// Invalid label\n\t\t\t\treturn recipient.email\n\t\t\t} else if (recipient.email.search(/^[a-zA-Z]+:/) === 0) {\n\t\t\t\t// Group integration\n\t\t\t\treturn recipient.email\n\t\t\t} else {\n\t\t\t\t// Proper layout with label\n\t\t\t\treturn `\"${recipient.label}\" <${recipient.email}>`\n\t\t\t}\n\t\t},\n\t\tgetMessageData(id) {\n\t\t\treturn {\n\t\t\t\taccount: this.selectedAlias.id,\n\t\t\t\taliasId: this.selectedAlias.aliasId,\n\t\t\t\tto: this.selectTo.map(this.recipientToRfc822).join(', '),\n\t\t\t\tcc: this.selectCc.map(this.recipientToRfc822).join(', '),\n\t\t\t\tbcc: this.selectBcc.map(this.recipientToRfc822).join(', '),\n\t\t\t\tdraftId: id,\n\t\t\t\tsubject: this.subjectVal,\n\t\t\t\tbody: this.encrypt ? plain(this.bodyVal) : html(this.bodyVal),\n\t\t\t\tattachments: this.attachments,\n\t\t\t\tmessageId: this.replyTo ? this.replyTo.databaseId : undefined,\n\t\t\t\tisHtml: !this.editorPlainText,\n\t\t\t\trequestMdn: this.requestMdn,\n\t\t\t}\n\t\t},\n\t\tsaveDraft(data) {\n\t\t\tthis.savingDraft = true\n\t\t\tthis.draftsPromise = this.draftsPromise\n\t\t\t\t.then((id) => {\n\t\t\t\t\tconst draftData = data(id)\n\t\t\t\t\tif (\n\t\t\t\t\t\t!id\n\t\t\t\t\t\t&& !draftData.subject\n\t\t\t\t\t\t&& !draftData.body\n\t\t\t\t\t\t&& !draftData.cc\n\t\t\t\t\t\t&& !draftData.bcc\n\t\t\t\t\t\t&& !draftData.to\n\t\t\t\t\t) {\n\t\t\t\t\t\t// this might happen after a call to reset()\n\t\t\t\t\t\t// where the text input gets reset as well\n\t\t\t\t\t\t// and fires an input event\n\t\t\t\t\t\tlogger.debug('Nothing substantial to save, ignoring draft save')\n\t\t\t\t\t\tthis.savingDraft = false\n\t\t\t\t\t\treturn id\n\t\t\t\t\t}\n\t\t\t\t\treturn this.draft(draftData)\n\t\t\t\t})\n\t\t\t\t.then((uid) => {\n\t\t\t\t\t// It works (again)\n\t\t\t\t\tthis.canSaveDraft = true\n\n\t\t\t\t\treturn uid\n\t\t\t\t})\n\t\t\t\t.catch(async(error) => {\n\t\t\t\t\tconsole.error('could not save draft', error)\n\t\t\t\t\tconst canSave = await matchError(error, {\n\t\t\t\t\t\t[NoDraftsMailboxConfiguredError.getName()]() {\n\t\t\t\t\t\t\treturn false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault() {\n\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t\tif (!canSave) {\n\t\t\t\t\t\tthis.canSaveDraft = false\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then((uid) => {\n\t\t\t\t\tthis.savingDraft = false\n\t\t\t\t\treturn uid\n\t\t\t\t})\n\t\t\treturn this.draftsPromise\n\t\t},\n\t\tonInputChanged() {\n\t\t\tthis.saveDraftDebounced(this.getMessageData)\n\t\t},\n\t\tonAddLocalAttachment() {\n\t\t\tthis.bus.$emit('onAddLocalAttachment')\n\t\t},\n\t\tonAddCloudAttachment() {\n\t\t\tthis.bus.$emit('onAddCloudAttachment')\n\t\t},\n\t\tonAddCloudAttachmentLink() {\n\t\t\tthis.bus.$emit('onAddCloudAttachmentLink')\n\t\t},\n\t\tonAutocomplete(term) {\n\t\t\tif (term === undefined || term === '') {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tdebouncedSearch(term).then((results) => {\n\t\t\t\tthis.autocompleteRecipients = uniqBy('email')(this.autocompleteRecipients.concat(results))\n\t\t\t})\n\t\t},\n\t\tonAttachmentsUploading(uploaded) {\n\t\t\tthis.attachmentsPromise = this.attachmentsPromise\n\t\t\t\t.then(() => uploaded)\n\t\t\t\t.catch((error) => logger.error('could not upload attachments', { error }))\n\t\t\t\t.then(() => logger.debug('attachments uploaded'))\n\t\t},\n\t\tasync onMailvelopeLoaded(mailvelope) {\n\t\t\tthis.encrypt = isPgpgMessage(this.body)\n\t\t\tthis.mailvelope.available = true\n\t\t\tlogger.info('Mailvelope loaded', {\n\t\t\t\tencrypt: this.encrypt,\n\t\t\t\tisPgpgMessage: isPgpgMessage(this.body),\n\t\t\t\tkeyRing: this.mailvelope.keyRing,\n\t\t\t})\n\t\t\tthis.mailvelope.keyRing = await mailvelope.getKeyring()\n\t\t\tawait this.checkRecipientsKeys()\n\t\t},\n\t\tonNewToAddr(addr) {\n\t\t\tthis.onNewAddr(addr, this.selectTo)\n\t\t},\n\t\tonNewCcAddr(addr) {\n\t\t\tthis.onNewAddr(addr, this.selectCc)\n\t\t},\n\t\tonNewBccAddr(addr) {\n\t\t\tthis.onNewAddr(addr, this.selectBcc)\n\t\t},\n\t\tonNewAddr(addr, list) {\n\t\t\tconst res = {\n\t\t\t\tlabel: addr, // TODO: parse if possible\n\t\t\t\temail: addr, // TODO: parse if possible\n\t\t\t}\n\t\t\tthis.newRecipients.push(res)\n\t\t\tlist.push(res)\n\t\t},\n\t\tasync onSend() {\n\t\t\tif (this.encrypt) {\n\t\t\t\tlogger.debug('get encrypted message from mailvelope')\n\t\t\t\tawait this.$refs.mailvelopeEditor.pull()\n\t\t\t}\n\n\t\t\tthis.state = STATES.UPLOADING\n\n\t\t\tawait this.attachmentsPromise\n\t\t\t\t.then(() => (this.state = STATES.SENDING))\n\t\t\t\t.then(() => this.draftsPromise)\n\t\t\t\t.then(this.getMessageData)\n\t\t\t\t.then((data) => this.send(data))\n\t\t\t\t.then(() => logger.info('message sent'))\n\t\t\t\t.then(() => (this.state = STATES.FINISHED))\n\t\t\t\t.catch(async(error) => {\n\t\t\t\t\tlogger.error('could not send message', { error })\n\t\t\t\t\tthis.errorText = await matchError(error, {\n\t\t\t\t\t\t[NoSentMailboxConfiguredError.getName()]() {\n\t\t\t\t\t\t\treturn t('mail', 'No sent mailbox configured. Please pick one in the account settings.')\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault(error) {\n\t\t\t\t\t\t\tif (error && error.toString) {\n\t\t\t\t\t\t\t\treturn error.toString()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t\tthis.state = STATES.ERROR\n\t\t\t\t})\n\n\t\t\t// Sync sent mailbox when it's currently open\n\t\t\tconst account = this.$store.getters.getAccount(this.selectedAlias.id)\n\t\t\tif (parseInt(this.$route.params.mailboxId, 10) === account.sentMailboxId) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.$store.dispatch('syncEnvelopes', {\n\t\t\t\t\t\tmailboxId: account.sentMailboxId,\n\t\t\t\t\t\tquery: '',\n\t\t\t\t\t\tinit: false,\n\t\t\t\t\t})\n\t\t\t\t}, 500)\n\t\t\t}\n\t\t},\n\t\treset() {\n\t\t\tthis.draftsPromise = Promise.resolve() // \"resets\" draft uid as well\n\t\t\tthis.selectTo = []\n\t\t\tthis.selectCc = []\n\t\t\tthis.selectBcc = []\n\t\t\tthis.subjectVal = ''\n\t\t\tthis.bodyVal = ''\n\t\t\tthis.attachments = []\n\t\t\tthis.errorText = undefined\n\t\t\tthis.state = STATES.EDITING\n\t\t\tthis.autocompleteRecipients = []\n\t\t\tthis.newRecipients = []\n\t\t\tthis.requestMdn = false\n\n\t\t\tthis.setAlias()\n\t\t\tthis.initBody()\n\t\t\tVue.nextTick(() => {\n\t\t\t\t// toLabel may not be on the DOM yet\n\t\t\t\t// (because \"Message sent\" is shown)\n\t\t\t\t// so we defer the focus call\n\t\t\t\tthis.$refs.toLabel.$el.focus()\n\t\t\t})\n\t\t},\n\t\t/**\n\t\t * Format aliases for the Multiselect\n\t\t * @param {Object} alias the alias to format\n\t\t * @returns {string}\n\t\t */\n\t\tformatAliases(alias) {\n\t\t\tif (!alias.name) {\n\t\t\t\treturn alias.emailAddress\n\t\t\t}\n\n\t\t\treturn `${alias.name} <${alias.emailAddress}>`\n\t\t},\n\t\tbodyWithSignature(alias, body) {\n\t\t\tif (!alias || !alias.signature) {\n\t\t\t\treturn html(body)\n\t\t\t}\n\n\t\t\treturn html(body)\n\t\t\t\t.append(html('<br>--<br>'))\n\t\t\t\t.append(toHtml(detect(alias.signature)))\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.message-composer {\n\tmargin: 0;\n\tz-index: 100;\n}\n\n.composer-actions {\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: flex-end;\n\tjustify-content: space-between;\n\tposition: sticky;\n\tbottom: 0;\n\tpadding: 12px;\n\tbackground: linear-gradient(rgba(255, 255, 255, 0), var(--color-main-background-translucent) 50%);\n}\n\n.composer-actions-right {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.composer-fields {\n\tdisplay: flex;\n\talign-items: center;\n\tborder-top: 1px solid var(--color-border);\n\n\t&.mail-account {\n\t\tborder-top: none;\n\n\t\t& > .multiselect {\n\t\t\tmax-width: none;\n\t\t\tmin-height: auto;\n\t\t}\n\t}\n\n\t.multiselect,\n\tinput,\n\tTextEditor {\n\t\tflex-grow: 1;\n\t\tmax-width: none;\n\t\tborder: none;\n\t\tborder-radius: 0;\n\t}\n\n\t.multiselect {\n\t\tmargin-right: 12px;\n\t}\n}\n\n.subject {\n\tfont-size: 20px;\n\tfont-weight: bold;\n\tmargin: 0;\n\tpadding: 24px 12px;\n}\n\n.warning-box {\n\tpadding: 5px 12px;\n\tborder-radius: 0;\n}\n\n.message-body {\n\tmin-height: 300px;\n\twidth: 100%;\n\tmargin: 0;\n\tpadding: 12px;\n\tborder: none !important;\n\toutline: none !important;\n\tbox-shadow: none !important;\n}\n\n#draft-status {\n\tpadding: 5px;\n\topacity: 0.5;\n\tfont-size: small;\n}\n\n.from-label,\n.to-label,\n.copy-toggle,\n.cc-label,\n.bcc-label {\n\tpadding: 12px;\n\tcursor: text;\n\tcolor: var(--color-text-maxcontrast);\n\twidth: 100px;\n\ttext-align: right;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}\n\n.bcc-label {\n\ttop: initial;\n\tbottom: 0;\n}\n\n.copy-toggle {\n\tcursor: pointer;\n\twidth: initial;\n\n\t&:hover,\n\t&:focus {\n\t\tcolor: var(--color-main-text);\n\t}\n}\n\n.reply {\n\tmin-height: 100px;\n}\n\n.send {\n\tpadding: 12px 18px 13px 36px;\n\tbackground-position: 12px center;\n\tmargin-left: 4px;\n}\n::v-deep .multiselect .multiselect__tags {\n\tborder: none !important;\n}\n.submit-message.send.primary.icon-confirm-white {\n\tcolor: var(--color-main-background);\n}\n</style>\n","/*\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Axios from '@nextcloud/axios'\nimport { generateUrl } from '@nextcloud/router'\n\nexport const findRecipient = (term) => {\n\tconst url = generateUrl('/apps/mail/api/autoComplete?term={term}', {\n\t\tterm,\n\t})\n\n\treturn Axios.get(url).then((resp) => resp.data)\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=style&index=0&id=2377ac20&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./Composer.vue?vue&type=template&id=2377ac20&scoped=true&\"\nimport script from \"./Composer.vue?vue&type=script&lang=js&\"\nexport * from \"./Composer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Composer.vue?vue&type=style&index=0&id=2377ac20&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2377ac20\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.state === _vm.STATES.EDITING)?_c('div',{staticClass:\"message-composer\"},[_c('div',{staticClass:\"composer-fields mail-account\"},[_c('label',{staticClass:\"from-label\",attrs:{\"for\":\"from\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'From'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('Multiselect',{attrs:{\"id\":\"from\",\"options\":_vm.aliases,\"label\":\"name\",\"track-by\":\"selectId\",\"searchable\":false,\"hide-selected\":true,\"custom-label\":_vm.formatAliases,\"placeholder\":_vm.t('mail', 'Select account'),\"clear-on-select\":false},on:{\"keyup\":_vm.onInputChanged},model:{value:(_vm.selectedAlias),callback:function ($$v) {_vm.selectedAlias=$$v},expression:\"selectedAlias\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields\"},[_c('label',{staticClass:\"to-label\",attrs:{\"for\":\"to\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'To'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('Multiselect',{ref:\"toLabel\",attrs:{\"id\":\"to\",\"options\":_vm.selectableRecipients,\"taggable\":true,\"label\":\"label\",\"track-by\":\"email\",\"multiple\":true,\"placeholder\":_vm.t('mail', 'Contact or email address …'),\"clear-on-select\":false,\"show-no-options\":false,\"preserve-search\":true},on:{\"keyup\":_vm.onInputChanged,\"tag\":_vm.onNewToAddr,\"search-change\":_vm.onAutocomplete},model:{value:(_vm.selectTo),callback:function ($$v) {_vm.selectTo=$$v},expression:\"selectTo\"}}),_vm._v(\" \"),(!_vm.showCC)?_c('a',{staticClass:\"copy-toggle\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.showCC = true}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', '+ Cc/Bcc'))+\"\\n\\t\\t\")]):_vm._e()],1),_vm._v(\" \"),(_vm.showCC)?_c('div',{staticClass:\"composer-fields\"},[_c('label',{staticClass:\"cc-label\",attrs:{\"for\":\"cc\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Cc'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('Multiselect',{attrs:{\"id\":\"cc\",\"options\":_vm.selectableRecipients,\"taggable\":true,\"label\":\"label\",\"track-by\":\"email\",\"multiple\":true,\"placeholder\":_vm.t('mail', ''),\"clear-on-select\":false,\"show-no-options\":false,\"preserve-search\":true},on:{\"keyup\":_vm.onInputChanged,\"tag\":_vm.onNewCcAddr,\"search-change\":_vm.onAutocomplete},model:{value:(_vm.selectCc),callback:function ($$v) {_vm.selectCc=$$v},expression:\"selectCc\"}},[_c('span',{attrs:{\"slot\":\"noOptions\"},slot:\"noOptions\"},[_vm._v(_vm._s(_vm.t('mail', 'No contacts found.')))])])],1):_vm._e(),_vm._v(\" \"),(_vm.showCC)?_c('div',{staticClass:\"composer-fields\"},[_c('label',{staticClass:\"bcc-label\",attrs:{\"for\":\"bcc\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Bcc'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('Multiselect',{attrs:{\"id\":\"bcc\",\"options\":_vm.selectableRecipients,\"taggable\":true,\"label\":\"label\",\"track-by\":\"email\",\"multiple\":true,\"placeholder\":_vm.t('mail', ''),\"show-no-options\":false,\"preserve-search\":true},on:{\"keyup\":_vm.onInputChanged,\"tag\":_vm.onNewBccAddr,\"search-change\":_vm.onAutocomplete},model:{value:(_vm.selectBcc),callback:function ($$v) {_vm.selectBcc=$$v},expression:\"selectBcc\"}},[_c('span',{attrs:{\"slot\":\"noOptions\"},slot:\"noOptions\"},[_vm._v(_vm._s(_vm.t('mail', 'No contacts found.')))])])],1):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields\"},[_c('label',{staticClass:\"subject-label hidden-visually\",attrs:{\"for\":\"subject\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Subject'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.subjectVal),expression:\"subjectVal\"}],staticClass:\"subject\",attrs:{\"id\":\"subject\",\"type\":\"text\",\"name\":\"subject\",\"autocomplete\":\"off\",\"placeholder\":_vm.t('mail', 'Subject …')},domProps:{\"value\":(_vm.subjectVal)},on:{\"keyup\":_vm.onInputChanged,\"input\":function($event){if($event.target.composing){ return; }_vm.subjectVal=$event.target.value}}})]),_vm._v(\" \"),(_vm.noReply)?_c('div',{staticClass:\"warning noreply-warning\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'This message came from a noreply address so your reply will probably not be read.'))+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.mailvelope.keysMissing.length)?_c('div',{staticClass:\"warning noreply-warning\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'The following recipients do not have a PGP key: {recipients}.', {\n\t\t\t\trecipients: _vm.mailvelope.keysMissing.join(', '),\n\t\t\t}))+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields\"},[(!_vm.encrypt && _vm.editorPlainText)?_c('TextEditor',{key:\"editor-plain\",staticClass:\"message-body\",attrs:{\"name\":\"body\",\"placeholder\":_vm.t('mail', 'Write message …'),\"focus\":_vm.isReply,\"bus\":_vm.bus},on:{\"input\":_vm.onInputChanged},model:{value:(_vm.bodyVal),callback:function ($$v) {_vm.bodyVal=$$v},expression:\"bodyVal\"}}):(!_vm.encrypt && !_vm.editorPlainText)?_c('TextEditor',{key:\"editor-rich\",staticClass:\"message-body\",attrs:{\"html\":true,\"name\":\"body\",\"placeholder\":_vm.t('mail', 'Write message …'),\"focus\":_vm.isReply,\"bus\":_vm.bus},on:{\"input\":_vm.onInputChanged},model:{value:(_vm.bodyVal),callback:function ($$v) {_vm.bodyVal=$$v},expression:\"bodyVal\"}}):_c('MailvelopeEditor',{ref:\"mailvelopeEditor\",attrs:{\"recipients\":_vm.allRecipients,\"quoted-text\":_vm.body,\"is-reply-or-forward\":_vm.isReply || _vm.isForward},model:{value:(_vm.bodyVal),callback:function ($$v) {_vm.bodyVal=$$v},expression:\"bodyVal\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"composer-actions\"},[_c('ComposerAttachments',{attrs:{\"bus\":_vm.bus,\"upload-size-limit\":_vm.attachmentSizeLimit},on:{\"upload\":_vm.onAttachmentsUploading},model:{value:(_vm.attachments),callback:function ($$v) {_vm.attachments=$$v},expression:\"attachments\"}}),_vm._v(\" \"),_c('div',{staticClass:\"composer-actions-right\"},[_c('p',{staticClass:\"composer-actions-draft\"},[(!_vm.canSaveDraft)?_c('span',{attrs:{\"id\":\"draft-status\"}},[_vm._v(_vm._s(_vm.t('mail', 'Can not save draft because this account does not have a drafts mailbox configured.')))]):(_vm.savingDraft === true)?_c('span',{attrs:{\"id\":\"draft-status\"}},[_vm._v(_vm._s(_vm.t('mail', 'Saving draft …')))]):(_vm.savingDraft === false)?_c('span',{attrs:{\"id\":\"draft-status\"}},[_vm._v(_vm._s(_vm.t('mail', 'Draft saved')))]):_vm._e()]),_vm._v(\" \"),_c('Actions',[_c('ActionButton',{attrs:{\"icon\":\"icon-upload\"},on:{\"click\":_vm.onAddLocalAttachment}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Upload attachment'))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-folder\"},on:{\"click\":_vm.onAddCloudAttachment}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Add attachment from Files'))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"disabled\":_vm.encrypt,\"icon\":\"icon-public\"},on:{\"click\":_vm.onAddCloudAttachmentLink}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.addShareLink)+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionCheckbox',{attrs:{\"checked\":!_vm.encrypt && !_vm.editorPlainText,\"disabled\":_vm.encrypt},on:{\"check\":function($event){_vm.editorMode = 'html'},\"uncheck\":function($event){_vm.editorMode = 'plaintext'}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Enable formatting'))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionCheckbox',{attrs:{\"checked\":_vm.requestMdn},on:{\"check\":function($event){_vm.requestMdn = true},\"uncheck\":function($event){_vm.requestMdn = false}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Request a read receipt'))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),(_vm.mailvelope.available)?_c('ActionCheckbox',{attrs:{\"checked\":_vm.encrypt},on:{\"check\":function($event){_vm.encrypt = true},\"uncheck\":function($event){_vm.encrypt = false}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Encrypt message with Mailvelope'))+\"\\n\\t\\t\\t\\t\")]):_c('ActionLink',{attrs:{\"href\":\"https://www.mailvelope.com/\",\"target\":\"_blank\",\"icon\":\"icon-password\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Looking for a way to encrypt your emails? Install the Mailvelope browser extension!'))+\"\\n\\t\\t\\t\\t\")])],1),_vm._v(\" \"),_c('div',[_c('input',{staticClass:\"submit-message send primary icon-confirm-white\",attrs:{\"type\":\"submit\",\"disabled\":!_vm.canSend},domProps:{\"value\":_vm.submitButtonTitle},on:{\"click\":_vm.onSend}})])],1)],1)]):(_vm.state === _vm.STATES.UPLOADING)?_c('Loading',{attrs:{\"hint\":_vm.t('mail', 'Uploading attachments …'),\"role\":\"alert\"}}):(_vm.state === _vm.STATES.SENDING)?_c('Loading',{attrs:{\"hint\":_vm.t('mail', 'Sending …'),\"role\":\"alert\"}}):(_vm.state === _vm.STATES.ERROR)?_c('div',{staticClass:\"emptycontent\",attrs:{\"role\":\"alert\"}},[_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'Error sending your message')))]),_vm._v(\" \"),(_vm.errorText)?_c('p',[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.errorText)+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),_c('button',{staticClass:\"button\",on:{\"click\":function($event){_vm.state = _vm.STATES.EDITING}}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'Go back'))+\"\\n\\t\")]),_vm._v(\" \"),_c('button',{staticClass:\"button primary\",on:{\"click\":_vm.onSend}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'Retry'))+\"\\n\\t\")])]):_c('div',{staticClass:\"emptycontent\"},[_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'Message sent!')))]),_vm._v(\" \"),(!_vm.isReply)?_c('button',{staticClass:\"button primary\",on:{\"click\":_vm.reset}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'Write another message'))+\"\\n\\t\")]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * Mail\n *\n * This code is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License, version 3,\n * as published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License, version 3,\n * along with this program.  If not, see <http://www.gnu.org/licenses/>\n *\n */\n\nimport { translate as t } from '@nextcloud/l10n'\n\nconst smileys = [':-(', ':-/', ':-\\\\', ':-|', \":'-(\", \":'-/\", \":'-\\\\\", \":'-|\"]\n\nconst getRandomSmiley = () => {\n\treturn smileys[Math.floor(Math.random() * smileys.length)]\n}\n\n/**\n * @param {Folder} folder a folder\n * @returns {string}\n */\nexport const getRandomFolderErrorMessage = (folder) => {\n\tconst folderName = folder.get('name')\n\tconst rawTexts = [\n\t\tt('mail', 'Could not load {tag}{name}{endtag}', {\n\t\t\tname: folderName,\n\t\t}),\n\t\tt('mail', 'Could not load {tag}{name}{endtag}', {\n\t\t\tname: folderName,\n\t\t}),\n\t\tt('mail', 'There was a problem loading {tag}{name}{endtag}', {\n\t\t\tname: folderName,\n\t\t}),\n\t]\n\tconst texts = rawTexts.map((text) => text.replace('{tag}', '<strong>').replace('{endtag}', '</strong>'))\n\tconst text = texts[Math.floor(Math.random() * texts.length)]\n\treturn text + ' ' + getRandomSmiley()\n}\n\n/**\n * @returns {string}\n */\nexport const getRandomMessageErrorMessage = () => {\n\tconst texts = [\n\t\tt('mail', 'Could not load your message'),\n\t\tt('mail', 'Could not load the desired message'),\n\t\tt('mail', 'Could not load the message'),\n\t]\n\tconst text = texts[Math.floor(Math.random() * texts.length)]\n\treturn text + ' ' + getRandomSmiley()\n}\n","<template>\n\t<AppContentDetails>\n\t\t<Loading v-if=\"loading\" />\n\t\t<Error\n\t\t\tv-else-if=\"error\"\n\t\t\t:error=\"error && error.message ? error.message : t('mail', 'Not found')\"\n\t\t\t:message=\"errorMessage\"\n\t\t\t:data=\"error\"\n\t\t\trole=\"alert\" />\n\t\t<Composer\n\t\t\tv-else\n\t\t\t:from-account=\"composerData.accountId\"\n\t\t\t:to=\"composerData.to\"\n\t\t\t:cc=\"composerData.cc\"\n\t\t\t:bcc=\"composerData.bcc\"\n\t\t\t:subject=\"composerData.subject\"\n\t\t\t:body=\"composerData.body\"\n\t\t\t:draft=\"saveDraft\"\n\t\t\t:send=\"sendMessage\"\n\t\t\t:reply-to=\"composerData.replyTo\"\n\t\t\t:forward-from=\"composerData.forwardFrom\" />\n\t</AppContentDetails>\n</template>\n\n<script>\nimport AppContentDetails from '@nextcloud/vue/dist/Components/AppContentDetails'\nimport Axios from '@nextcloud/axios'\nimport { generateUrl } from '@nextcloud/router'\nimport { showWarning } from '@nextcloud/dialogs'\nimport { translate as t } from '@nextcloud/l10n'\n\nimport { buildForwardSubject, buildReplySubject, buildRecipients as buildReplyRecipients } from '../ReplyBuilder'\nimport Composer from './Composer'\nimport Error from './Error'\nimport { getRandomMessageErrorMessage } from '../util/ErrorMessageFactory'\nimport { detect, html, plain, toPlain } from '../util/text'\nimport Loading from './Loading'\nimport logger from '../logger'\nimport { saveDraft, sendMessage } from '../service/MessageService'\n\nexport default {\n\tname: 'NewMessageDetail',\n\tcomponents: {\n\t\tAppContentDetails,\n\t\tComposer,\n\t\tError,\n\t\tLoading,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading: false,\n\t\t\tdraft: undefined,\n\t\t\toriginal: undefined,\n\t\t\toriginalBody: undefined,\n\t\t\terrorMessage: '',\n\t\t\terror: undefined,\n\t\t\tnewDraftId: undefined,\n\t\t}\n\t},\n\tcomputed: {\n\t\tcomposerData() {\n\t\t\tif (this.draft !== undefined) {\n\t\t\t\tlogger.info('todo: handle draft data', { draft: this.draft })\n\t\t\t\treturn {\n\t\t\t\t\tto: this.draft.to,\n\t\t\t\t\tcc: this.draft.cc,\n\t\t\t\t\tbcc: this.draft.bcc,\n\t\t\t\t\tsubject: this.draft.subject,\n\t\t\t\t\tbody: this.draft.hasHtmlBody ? html(this.draft.body) : plain(this.draft.body),\n\t\t\t\t}\n\t\t\t} else if (this.$route.query.messageId !== undefined) {\n\t\t\t\t// Forward or reply to a message\n\t\t\t\tconst message = this.original\n\t\t\t\tlogger.debug('forwarding or replying to message', { message })\n\n\t\t\t\tif (this.$route.params.threadId === 'reply') {\n\t\t\t\t\tlogger.debug('simple reply', {\n\t\t\t\t\t\tmessage,\n\t\t\t\t\t})\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\taccountId: message.accountId,\n\t\t\t\t\t\tto: message.from,\n\t\t\t\t\t\tcc: [],\n\t\t\t\t\t\tsubject: buildReplySubject(message.subject),\n\t\t\t\t\t\tbody: this.originalBody,\n\t\t\t\t\t\toriginalBody: this.originalBody,\n\t\t\t\t\t\treplyTo: message,\n\t\t\t\t\t}\n\t\t\t\t} else if (this.$route.params.threadId === 'replyAll') {\n\t\t\t\t\tlogger.debug('replying to all', { original: this.original })\n\t\t\t\t\tconst account = this.$store.getters.getAccount(message.accountId)\n\t\t\t\t\tconst recipients = buildReplyRecipients(message, {\n\t\t\t\t\t\temail: account.emailAddress,\n\t\t\t\t\t\tlabel: account.name,\n\t\t\t\t\t})\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\taccountId: message.accountId,\n\t\t\t\t\t\tto: recipients.to,\n\t\t\t\t\t\tcc: recipients.cc,\n\t\t\t\t\t\tsubject: buildReplySubject(message.subject),\n\t\t\t\t\t\tbody: this.originalBody,\n\t\t\t\t\t\toriginalBody: this.originalBody,\n\t\t\t\t\t\treplyTo: message,\n\t\t\t\t\t}\n\t\t\t\t} else if (this.$route.params.threadId === 'asNew') {\n\t\t\t\t\tlogger.debug('composing as new', { original: this.original })\n\n\t\t\t\t\tif (this.original.attachments.length) {\n\t\t\t\t\t\tshowWarning(t('mail', 'Attachments were not copied. Please add them manually.'))\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\taccountId: message.accountId,\n\t\t\t\t\t\tto: message.to,\n\t\t\t\t\t\tcc: message.cc,\n\t\t\t\t\t\tsubject: message.subject,\n\t\t\t\t\t\tbody: this.originalBody,\n\t\t\t\t\t\toriginalBody: this.originalBody,\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// forward\n\t\t\t\t\treturn {\n\t\t\t\t\t\taccountId: message.accountId,\n\t\t\t\t\t\tto: [],\n\t\t\t\t\t\tcc: [],\n\t\t\t\t\t\tsubject: buildForwardSubject(message.subject),\n\t\t\t\t\t\tbody: this.originalBody,\n\t\t\t\t\t\toriginalBody: this.originalBody,\n\t\t\t\t\t\tforwardFrom: message,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// New or mailto: message\n\t\t\t\tlogger.debug('composing a new message or handling a mailto link', {\n\t\t\t\t\tthreadId: this.$route.params.threadId,\n\t\t\t\t})\n\n\t\t\t\tlet accountId\n\t\t\t\t// Only preselect an account when we're not in a unified mailbox\n\t\t\t\tif (this.$route.params.accountId !== 0 && this.$route.params.accountId !== '0') {\n\t\t\t\t\taccountId = parseInt(this.$route.params.accountId, 10)\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\taccountId,\n\t\t\t\t\tto: this.stringToRecipients(this.$route.query.to),\n\t\t\t\t\tcc: this.stringToRecipients(this.$route.query.cc),\n\t\t\t\t\tsubject: this.$route.query.subject || '',\n\t\t\t\t\tbody: this.$route.query.body ? detect(this.$route.query.body) : html(''),\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t},\n\twatch: {\n\t\t$route(to, from) {\n\t\t\t// `saveDraft` replaced the current URL with the updated draft UID\n\t\t\t// in that case we don't really start a new draft but just keep the\n\t\t\t// URL consistent, hence not loading anything\n\t\t\tif (to.name === 'message' && this.draft\n\t\t\t\t&& (\n\t\t\t\t\tto.params.draftId === parseInt(this.draft.databaseId, 10)\n\t\t\t\t\t|| to.params.draftId === this.newDraftId\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tlogger.debug('detected navigation to current (new) draft UID, not reloading')\n\t\t\t\treturn\n\t\t\t}\n\t\t\tlogger.debug('the  draft ID changed, we have to fetch the draft', {\n\t\t\t\tcurrentId: this?.draft?.databaseId ?? 'no draft currently loaded',\n\t\t\t\tnewId: to.params.draftId,\n\t\t\t})\n\n\t\t\tthis.fetchMessage()\n\t\t},\n\t},\n\tcreated() {\n\t\tthis.fetchMessage()\n\t},\n\tmethods: {\n\t\tstringToRecipients(str) {\n\t\t\tif (str === undefined) {\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tlabel: str,\n\t\t\t\t\temail: str,\n\t\t\t\t},\n\t\t\t]\n\t\t},\n\t\tfetchMessage() {\n\t\t\tif (this.$route.params.draftId !== undefined) {\n\t\t\t\treturn this.fetchDraftMessage(this.$route.params.draftId)\n\t\t\t} else if (this.$route.query.messageId !== undefined) {\n\t\t\t\treturn this.fetchOriginalMessage(this.$route.query.messageId)\n\t\t\t}\n\t\t},\n\t\tfetchDraftMessage(id) {\n\t\t\tthis.loading = true\n\t\t\tthis.draft = undefined\n\t\t\tthis.error = undefined\n\t\t\tthis.errorMessage = ''\n\n\t\t\tthis.$store\n\t\t\t\t.dispatch('fetchMessage', id)\n\t\t\t\t.then((draft) => {\n\t\t\t\t\tif (draft.databaseId !== parseInt(this.$route.params.draftId, 10)) {\n\t\t\t\t\t\tlogger.debug(\"User navigated away, loaded draft won't be shown\", {\n\t\t\t\t\t\t\tdraft,\n\t\t\t\t\t\t\tdraftId: this.$route.params.draftId,\n\t\t\t\t\t\t})\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.draft = draft\n\n\t\t\t\t\tif (this.draft === undefined) {\n\t\t\t\t\t\tlogger.info('draft could not be found', { id })\n\t\t\t\t\t\tthis.errorMessage = getRandomMessageErrorMessage()\n\t\t\t\t\t\tthis.loading = false\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.loading = false\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tlogger.error(`could not load draft ${id}`, { error })\n\t\t\t\t\tif (error.isError) {\n\t\t\t\t\t\tthis.errorMessage = t('mail', 'Could not load your draft')\n\t\t\t\t\t\tthis.error = error\n\t\t\t\t\t\tthis.loading = false\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t},\n\t\tasync fetchOriginalMessage(id) {\n\t\t\tthis.loading = true\n\t\t\tthis.error = undefined\n\t\t\tthis.errorMessage = ''\n\n\t\t\tlogger.debug(`fetching original message ${id}`)\n\n\t\t\ttry {\n\t\t\t\tconst message = await this.$store.dispatch('fetchMessage', id)\n\t\t\t\tif (message.databaseId !== parseInt(this.$route.query.messageId, 10)) {\n\t\t\t\t\tlogger.debug(\"User navigated away, loaded original message won't be used\", {\n\t\t\t\t\t\tmessage,\n\t\t\t\t\t\tmessageId: message.databaseId,\n\t\t\t\t\t\turlId: this.$route.query.messageId,\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tlogger.debug('original message fetched', { message })\n\t\t\t\tthis.original = message\n\n\t\t\t\tlet body = plain(message.body || '')\n\t\t\t\tif (message.hasHtmlBody) {\n\t\t\t\t\tlogger.debug('original message has HTML body')\n\t\t\t\t\tconst resp = await Axios.get(\n\t\t\t\t\t\tgenerateUrl('/apps/mail/api/messages/{id}/html?plain=true', {\n\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t})\n\t\t\t\t\t)\n\n\t\t\t\t\tbody = html(resp.data)\n\t\t\t\t}\n\t\t\t\tthis.originalBody = body\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not load original message ' + id, { error })\n\t\t\t\tif (error.isError) {\n\t\t\t\t\tthis.errorMessage = t('mail', 'Could not load original message')\n\t\t\t\t\tthis.error = error\n\t\t\t\t\tthis.loading = false\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t},\n\t\tasync saveDraft(data) {\n\t\t\tif (data.draftId === undefined && this.draft) {\n\t\t\t\tlogger.debug('draft data does not have a draftId, adding one', { draft: this.draft, data, id: this.draft.databaseId })\n\t\t\t\tdata.draftId = this.draft.databaseId\n\t\t\t}\n\t\t\tconst dataForServer = {\n\t\t\t\t...data,\n\t\t\t\tbody: data.isHtml ? data.body.value : toPlain(data.body).value,\n\t\t\t}\n\t\t\tconst { id } = await saveDraft(data.account, dataForServer)\n\n\t\t\t// Remove old draft envelope\n\t\t\tthis.$store.commit('removeEnvelope', { id: data.draftId })\n\t\t\tthis.$store.commit('removeMessage', { id: data.draftId })\n\n\t\t\t// Fetch new draft envelope\n\t\t\tawait this.$store.dispatch('fetchEnvelope', id)\n\n\t\t\t// Update route to new draft (actual redirect will be skipped)\n\t\t\tconst account = this.$store.getters.getAccount(data.account)\n\t\t\tif (parseInt(this.$route.params.mailboxId, 10) === account.draftsMailboxId) {\n\t\t\t\tthis.newDraftId = id\n\t\t\t\tthis.$router.replace({\n\t\t\t\t\tto: 'message',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t\tthreadId: this.$route.params.threadId,\n\t\t\t\t\t\tdraftId: id,\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t}\n\n\t\t\treturn id\n\t\t},\n\t\tasync sendMessage(data) {\n\t\t\tlogger.debug('sending message', { data })\n\t\t\tconst dataForServer = {\n\t\t\t\t...data,\n\t\t\t\tbody: data.isHtml ? data.body.value : toPlain(data.body).value,\n\t\t\t}\n\t\t\tawait sendMessage(data.account, dataForServer)\n\n\t\t\t// Remove old draft envelope\n\t\t\tthis.$store.commit('removeEnvelope', { id: data.draftId })\n\t\t\tthis.$store.commit('removeMessage', { id: data.draftId })\n\t\t},\n\t},\n}\n</script>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewMessageDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewMessageDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NewMessageDetail.vue?vue&type=template&id=51b93a42&\"\nimport script from \"./NewMessageDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./NewMessageDetail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('AppContentDetails',[(_vm.loading)?_c('Loading'):(_vm.error)?_c('Error',{attrs:{\"error\":_vm.error && _vm.error.message ? _vm.error.message : _vm.t('mail', 'Not found'),\"message\":_vm.errorMessage,\"data\":_vm.error,\"role\":\"alert\"}}):_c('Composer',{attrs:{\"from-account\":_vm.composerData.accountId,\"to\":_vm.composerData.to,\"cc\":_vm.composerData.cc,\"bcc\":_vm.composerData.bcc,\"subject\":_vm.composerData.subject,\"body\":_vm.composerData.body,\"draft\":_vm.saveDraft,\"send\":_vm.sendMessage,\"reply-to\":_vm.composerData.replyTo,\"forward-from\":_vm.composerData.forwardFrom}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NoMessageSelected.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NoMessageSelected.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<AppContentDetails>\n\t\t<div class=\"icon icon-mail\" />\n\t\t<h2>{{ t('mail', 'No message selected') }}</h2>\n\t\t<p />\n\t</AppContentDetails>\n</template>\n\n<script>\nimport AppContentDetails from '@nextcloud/vue/dist/Components/AppContentDetails'\n\nexport default {\n\tname: 'NoMessageSelected',\n\tcomponents: {\n\t\tAppContentDetails,\n\t},\n}\n</script>\n\n<style scoped>\n.app-content-details {\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n}\n\n.icon {\n\theight: 64px;\n\twidth: 64px;\n\tmargin: 0 auto 15px;\n\tbackground-size: 64px;\n\topacity: 0.4;\n}\n\nh2,\np {\n\ttext-align: center;\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NoMessageSelected.vue?vue&type=style&index=0&id=0f812b2d&scoped=true&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./NoMessageSelected.vue?vue&type=template&id=0f812b2d&scoped=true&\"\nimport script from \"./NoMessageSelected.vue?vue&type=script&lang=js&\"\nexport * from \"./NoMessageSelected.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NoMessageSelected.vue?vue&type=style&index=0&id=0f812b2d&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0f812b2d\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('AppContentDetails',[_c('div',{staticClass:\"icon icon-mail\"}),_vm._v(\" \"),_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'No message selected')))]),_vm._v(\" \"),_c('p')])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  - @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<UserBubble :display-name=\"label\"\n\t\t:avatar-image=\"avatarUrlAbsolute\"\n\t\t@click=\"onClick\">\n\t\t<span class=\"user-bubble-email\">{{ email }}</span>\n\t</UserBubble>\n</template>\n\n<script>\nimport { generateUrl } from '@nextcloud/router'\nimport UserBubble from '@nextcloud/vue/dist/Components/UserBubble'\n\nimport { fetchAvatarUrlMemoized } from '../service/AvatarService'\n\nexport default {\n\tname: 'RecipientBubble',\n\tcomponents: {\n\t\tUserBubble,\n\t},\n\tprops: {\n\t\temail: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tlabel: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tavatarUrl: undefined,\n\t\t}\n\t},\n\tcomputed: {\n\t\tavatarUrlAbsolute() {\n\t\t\tif (!this.avatarUrl) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (this.avatarUrl.startsWith('http')) {\n\t\t\t\treturn this.avatarUrl\n\t\t\t}\n\n\t\t\t// Make it an absolute URL because the user bubble component doesn't work with relative URLs\n\t\t\treturn window.location.protocol + '//' + window.location.host + generateUrl(this.avatarUrl)\n\t\t},\n\t},\n\tasync mounted() {\n\t\ttry {\n\t\t\tthis.avatarUrl = await fetchAvatarUrlMemoized(this.email)\n\t\t} catch (error) {\n\t\t\tconsole.debug('no avatar for ' + this.email, {\n\t\t\t\terror,\n\t\t\t})\n\t\t}\n\t},\n\tmethods: {\n\t\tonClick() {\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: 'priority', // TODO: figure out current mailbox\n\t\t\t\t\tthreadId: 'new',\n\t\t\t\t},\n\t\t\t\tquery: {\n\t\t\t\t\tto: this.email,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.user-bubble__title {\n\tmax-width: 30vw;\n}\n.user-bubble-email {\n\tmargin: 10px;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipientBubble.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipientBubble.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipientBubble.vue?vue&type=style&index=0&id=06e00222&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./RecipientBubble.vue?vue&type=template&id=06e00222&scoped=true&\"\nimport script from \"./RecipientBubble.vue?vue&type=script&lang=js&\"\nexport * from \"./RecipientBubble.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RecipientBubble.vue?vue&type=style&index=0&id=06e00222&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"06e00222\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('UserBubble',{attrs:{\"display-name\":_vm.label,\"avatar-image\":_vm.avatarUrlAbsolute},on:{\"click\":_vm.onClick}},[_c('span',{staticClass:\"user-bubble-email\"},[_vm._v(_vm._s(_vm.email))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * Mail\n *\n * This code is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License, version 3,\n * as published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License, version 3,\n * along with this program.  If not, see <http://www.gnu.org/licenses/>\n *\n */\n\nimport { Client } from 'davclient.js'\nimport ical from 'ical.js'\nimport { getCurrentUser, getRequestToken } from '@nextcloud/auth'\nimport { generateRemoteUrl } from '@nextcloud/router'\nimport Axios from '@nextcloud/axios'\n\nimport Logger from '../logger'\n\nconst client = new Client({\n\tbaseUrl: generateRemoteUrl('dav/calendars'),\n\txmlNamespaces: {\n\t\t'DAV:': 'd',\n\t\t'urn:ietf:params:xml:ns:caldav': 'c',\n\t\t'http://apple.com/ns/ical/': 'aapl',\n\t\t'http://owncloud.org/ns': 'oc',\n\t\t'http://calendarserver.org/ns/': 'cs',\n\t},\n})\nconst props = [\n\t'{DAV:}displayname',\n\t'{urn:ietf:params:xml:ns:caldav}calendar-description',\n\t'{urn:ietf:params:xml:ns:caldav}calendar-timezone',\n\t'{http://apple.com/ns/ical/}calendar-order',\n\t'{http://apple.com/ns/ical/}calendar-color',\n\t'{urn:ietf:params:xml:ns:caldav}supported-calendar-component-set',\n\t'{http://owncloud.org/ns}calendar-enabled',\n\t'{DAV:}acl',\n\t'{DAV:}owner',\n\t'{http://owncloud.org/ns}invite',\n]\n\nconst getResponseCodeFromHTTPResponse = (t) => {\n\treturn parseInt(t.split(' ')[1])\n}\n\nconst getACLFromResponse = (properties) => {\n\tlet canWrite = false\n\tconst acl = properties['{DAV:}acl']\n\tif (acl) {\n\t\tfor (let k = 0; k < acl.length; k++) {\n\t\t\tlet href = acl[k].getElementsByTagNameNS('DAV:', 'href')\n\t\t\tif (href.length === 0) {\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\thref = href[0].textContent\n\t\t\tconst writeNode = acl[k].getElementsByTagNameNS('DAV:', 'write')\n\t\t\tif (writeNode.length > 0) {\n\t\t\t\tcanWrite = true\n\t\t\t}\n\t\t}\n\t}\n\tproperties.canWrite = canWrite\n}\n\nconst getCalendarData = (properties) => {\n\tgetACLFromResponse(properties)\n\n\tconst data = {\n\t\tdisplayname: properties['{DAV:}displayname'],\n\t\tcolor: properties['{http://apple.com/ns/ical/}calendar-color'],\n\t\torder: properties['{http://apple.com/ns/ical/}calendar-order'],\n\t\tcomponents: {\n\t\t\tvevent: false,\n\t\t},\n\t\twritable: properties.canWrite,\n\t}\n\n\tconst components = properties['{urn:ietf:params:xml:ns:caldav}supported-calendar-component-set'] || []\n\tfor (let i = 0; i < components.length; i++) {\n\t\tconst name = components[i].attributes.getNamedItem('name').textContent.toLowerCase()\n\t\tif (Object.hasOwnProperty.call(data.components, name)) {\n\t\t\tdata.components[name] = true\n\t\t}\n\t}\n\n\treturn data\n}\n\n/**\n * @returns {Promise}\n */\nexport const getUserCalendars = () => {\n\tconst url = generateRemoteUrl('dav/calendars') + '/' + getCurrentUser().uid + '/'\n\n\treturn client\n\t\t.propFind(url, props, 1, {\n\t\t\trequesttoken: getRequestToken(),\n\t\t})\n\t\t.then((data) => {\n\t\t\tconst calendars = []\n\n\t\t\tdata.body.forEach((cal) => {\n\t\t\t\tif (cal.propStat.length < 1) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tif (getResponseCodeFromHTTPResponse(cal.propStat[0].status) === 200) {\n\t\t\t\t\tconst properties = getCalendarData(cal.propStat[0].properties)\n\t\t\t\t\tif (properties && properties.components.vevent && properties.writable === true) {\n\t\t\t\t\t\tproperties.url = cal.href\n\t\t\t\t\t\tcalendars.push(properties)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\n\t\t\treturn calendars\n\t\t})\n}\n\nconst getRandomString = () => {\n\tlet str = ''\n\tfor (let i = 0; i < 7; i++) {\n\t\tstr += Math.random().toString(36).substring(7)\n\t}\n\treturn str\n}\n\nconst createICalElement = () => {\n\tconst root = new ical.Component(['vcalendar', [], []])\n\n\troot.updatePropertyWithValue('prodid', '-//' + OC.theme.name + ' Mail')\n\n\treturn root\n}\n\nconst splitCalendar = (data) => {\n\tconst timezones = []\n\tconst allObjects = {}\n\tconst jCal = ical.parse(data)\n\tconst components = new ical.Component(jCal)\n\n\tconst vtimezones = components.getAllSubcomponents('vtimezone')\n\tvtimezones.forEach((vtimezone) => timezones.push(vtimezone))\n\n\tconst componentNames = ['vevent', 'vjournal', 'vtodo']\n\tcomponentNames.forEach((componentName) => {\n\t\tconst vobjects = components.getAllSubcomponents(componentName)\n\t\tallObjects[componentName] = {}\n\n\t\tvobjects.forEach((vobject) => {\n\t\t\tconst uid = vobject.getFirstPropertyValue('uid')\n\t\t\tallObjects[componentName][uid] = allObjects[componentName][uid] || []\n\t\t\tallObjects[componentName][uid].push(vobject)\n\t\t})\n\t})\n\n\tconst split = []\n\tcomponentNames.forEach((componentName) => {\n\t\tsplit[componentName] = []\n\t\tfor (const objectsId in allObjects[componentName]) {\n\t\t\tconst objects = allObjects[componentName][objectsId]\n\t\t\tconst component = createICalElement()\n\t\t\ttimezones.forEach(component.addSubcomponent.bind(component))\n\t\t\tfor (const objectId in objects) {\n\t\t\t\tcomponent.addSubcomponent(objects[objectId])\n\t\t\t}\n\t\t\tsplit[componentName].push(component.toString())\n\t\t}\n\t})\n\n\treturn {\n\t\tname: components.getFirstPropertyValue('x-wr-calname'),\n\t\tcolor: components.getFirstPropertyValue('x-apple-calendar-color'),\n\t\tsplit,\n\t}\n}\n\n/**\n * @param {String} url the url\n * @param {Object} data the data\n * @returns {Promise}\n */\nexport const importCalendarEvent = (url) => (data) => {\n\tLogger.debug('importing events into calendar', {\n\t\turl,\n\t\tdata,\n\t})\n\tconst promises = []\n\n\tconst file = splitCalendar(data)\n\tconst components = ['vevent', 'vjournal', 'vtodo']\n\tcomponents.forEach((componentName) => {\n\t\tfor (const componentId in file.split[componentName]) {\n\t\t\tconst component = file.split[componentName][componentId]\n\t\t\tLogger.info('importing event component', { component })\n\t\t\tpromises.push(\n\t\t\t\tPromise.resolve(\n\t\t\t\t\tAxios.put(url + getRandomString() + '.ics', component, {\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t'Content-Type': 'text/calendar; charset=utf-8',\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t)\n\t\t}\n\t})\n\n\treturn Promise.all(promises)\n}\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CalendarImport.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CalendarImport.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<Actions v-if=\"calendars.length\" default-icon=\"icon-add\">\n\t\t<ActionButton\n\t\t\tv-for=\"(calendar, idx) in cals\"\n\t\t\t:key=\"idx\"\n\t\t\t:icon=\"calendar.loading ? 'icon-loading-small' : 'icon-add'\"\n\t\t\t@click=\"onImport(calendar)\">\n\t\t\t{{ t('mail', 'Import into {calendar}', {calendar: calendar.displayname}) }}\n\t\t</ActionButton>\n\t</Actions>\n</template>\n\n<script>\nimport Actions from '@nextcloud/vue/dist/Components/Actions'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\n\nexport default {\n\tname: 'CalendarImport',\n\tcomponents: {\n\t\tActions,\n\t\tActionButton,\n\t},\n\tprops: {\n\t\tcalendars: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\thandler: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tcals() {\n\t\t\treturn this.calendars.map((original) => {\n\t\t\t\tthis.$set(original, 'loading', false)\n\t\t\t\treturn original\n\t\t\t})\n\t\t},\n\t},\n\tmethods: {\n\t\tonImport(calendar) {\n\t\t\tcalendar.loading = true\n\n\t\t\tthis.handler(calendar)\n\t\t\t\t.catch(console.error.bind(this))\n\t\t\t\t.then(() => {\n\t\t\t\t\tcalendar.loading = false\n\t\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style scoped></style>\n","import { render, staticRenderFns } from \"./CalendarImport.vue?vue&type=template&id=7c52d704&scoped=true&\"\nimport script from \"./CalendarImport.vue?vue&type=script&lang=js&\"\nexport * from \"./CalendarImport.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7c52d704\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.calendars.length)?_c('Actions',{attrs:{\"default-icon\":\"icon-add\"}},_vm._l((_vm.cals),function(calendar,idx){return _c('ActionButton',{key:idx,attrs:{\"icon\":calendar.loading ? 'icon-loading-small' : 'icon-add'},on:{\"click\":function($event){return _vm.onImport(calendar)}}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'Import into {calendar}', {calendar: calendar.displayname}))+\"\\n\\t\")])}),1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventReservation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventReservation.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"reservation\">\n\t\t<div class=\"event\">\n\t\t\t<div class=\"event-name\">\n\t\t\t\t{{ eventName }}\n\t\t\t</div>\n\t\t\t<div v-if=\"location\" class=\"venue\">\n\t\t\t\t{{ location }}\n\t\t\t</div>\n\t\t\t<div v-if=\"date\">\n\t\t\t\t{{ date }}\n\t\t\t</div>\n\t\t\t<div v-if=\"time\">\n\t\t\t\t{{ time }}\n\t\t\t</div>\n\t\t</div>\n\t\t<CalendarImport v-if=\"canImport\" :calendars=\"calendars\" :handler=\"handleImport\" />\n\t</div>\n</template>\n\n<script>\nimport ical from 'ical.js'\nimport md5 from 'md5'\nimport moment from '@nextcloud/moment'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\n\nimport CalendarImport from './CalendarImport'\nimport { importCalendarEvent } from '../../service/DAVService'\nimport logger from '../../logger'\n\nexport default {\n\tname: 'EventReservation',\n\tcomponents: { CalendarImport },\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcalendars: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmessageId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\teventName() {\n\t\t\treturn this.data.reservationFor.name\n\t\t},\n\t\ttime() {\n\t\t\tif (!('startDate' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(this.data.reservationFor.startDate).format('LT')\n\t\t},\n\t\tdate() {\n\t\t\tif (!('startDate' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(this.data.reservationFor.startDate).format('L')\n\t\t},\n\t\tlocation() {\n\t\t\tif (!('location' in this.data.reservationFor) || !('name' in this.data.reservationFor.location)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn this.data.reservationFor.location.name\n\t\t},\n\t\tcanImport() {\n\t\t\treturn 'startDate' in this.data.reservationFor\n\t\t},\n\t},\n\tmethods: {\n\t\tgetEndDateTime(event) {\n\t\t\tif ('endDate' in this.data.reservationFor) {\n\t\t\t\treturn moment(this.data.reservationFor.endDate).format()\n\t\t\t} else {\n\t\t\t\t// Assume it's 2h and user will adjust if necessary\n\t\t\t\t// TODO: handle 'duration' https://schema.org/Event\n\t\t\t\treturn moment('2019-10-22T12:00:00Z').add(2, 'hours').format()\n\t\t\t}\n\t\t},\n\t\thandleImport(calendar) {\n\t\t\tconst event = new ical.Component('VEVENT')\n\t\t\tevent.updatePropertyWithValue('SUMMARY', this.eventName)\n\n\t\t\tconst start = moment(this.data.reservationFor.startDate).format()\n\t\t\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(start))\n\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t'DTEND',\n\t\t\t\tical.Time.fromDateTimeString(this.getEndDateTime(this.data.reservationFor))\n\t\t\t)\n\n\t\t\tif ('location' in this.data.reservationFor) {\n\t\t\t\tevent.updatePropertyWithValue('LOCATION', this.data.reservationFor.location.name)\n\t\t\t\tif ('geo' in this.data.reservationFor.location) {\n\t\t\t\t\t// https://www.kanzaki.com/docs/ical/geo.html\n\t\t\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t\t\t'GEO',\n\t\t\t\t\t\t`${this.data.reservationFor.location.geo.latitude};${this.data.reservationFor.location.geo.longitude}`\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// TODO: read version from package.json\n\t\t\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\n\n\t\t\t// TODO: is this free of collisions? the bug reports will tell us!\n\t\t\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.eventName))\n\n\t\t\tconst cal = new ical.Component('VCALENDAR')\n\t\t\tcal.addSubcomponent(event)\n\t\t\tlogger.debug('generated calendar event from event reservation data', { ical: cal.toString() })\n\t\t\treturn importCalendarEvent(calendar.url)(cal.toString())\n\t\t\t\t.then(() => {\n\t\t\t\t\tlogger.debug('event successfully imported')\n\t\t\t\t\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tlogger.error('Could not import event', { error })\n\t\t\t\t\tshowError(t('mail', 'Could not create event'))\n\t\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.reservation {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n\n.event {\n\tflex-grow: 1;\n}\n\n.event-name {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n</style>\n","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventReservation.vue?vue&type=style&index=0&id=b2f6d4c0&scoped=true&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./EventReservation.vue?vue&type=template&id=b2f6d4c0&scoped=true&\"\nimport script from \"./EventReservation.vue?vue&type=script&lang=js&\"\nexport * from \"./EventReservation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EventReservation.vue?vue&type=style&index=0&id=b2f6d4c0&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b2f6d4c0\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"reservation\"},[_c('div',{staticClass:\"event\"},[_c('div',{staticClass:\"event-name\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.eventName)+\"\\n\\t\\t\")]),_vm._v(\" \"),(_vm.location)?_c('div',{staticClass:\"venue\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.location)+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.date)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.date)+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.time)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.time)+\"\\n\\t\\t\")]):_vm._e()]),_vm._v(\" \"),(_vm.canImport)?_c('CalendarImport',{attrs:{\"calendars\":_vm.calendars,\"handler\":_vm.handleImport}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlightReservation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlightReservation.vue?vue&type=script&lang=js&\"","<template>\n\t<div class=\"reservation\">\n\t\t<div class=\"departure\">\n\t\t\t<div class=\"iata\">\n\t\t\t\t{{ data.reservationFor.departureAirport.iataCode }}\n\t\t\t</div>\n\t\t\t<div class=\"airport\">\n\t\t\t\t{{ data.reservationFor.departureAirport.name }}\n\t\t\t</div>\n\t\t\t<div v-if=\"departureDate\">\n\t\t\t\t{{ departureDate }}\n\t\t\t</div>\n\t\t\t<div v-if=\"departureTime\">\n\t\t\t\t{{ departureTime }}\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"connection\">\n\t\t\t<div><AirplaneIcon :title=\"t('mail', 'Airplane')\" /></div>\n\t\t\t<div>{{ flightNumber }}</div>\n\t\t\t<div v-if=\"reservation\">\n\t\t\t\t{{ t('mail', 'Reservation {id}', {id: reservation}) }}\n\t\t\t</div>\n\t\t\t<div v-else>\n\t\t\t\t<ArrowIcon decorative />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"arrival\">\n\t\t\t<div class=\"iata\">\n\t\t\t\t{{ data.reservationFor.arrivalAirport.iataCode }}\n\t\t\t</div>\n\t\t\t<div class=\"airport\">\n\t\t\t\t{{ data.reservationFor.arrivalAirport.name }}\n\t\t\t</div>\n\t\t\t<div v-if=\"arrivalDate\">\n\t\t\t\t{{ arrivalDate }}\n\t\t\t</div>\n\t\t\t<div v-if=\"arrivalTime\">\n\t\t\t\t{{ arrivalTime }}\n\t\t\t</div>\n\t\t</div>\n\t\t<CalendarImport :calendars=\"calendars\" :handler=\"handleImport\" />\n\t</div>\n</template>\n\n<script>\nimport AirplaneIcon from 'vue-material-design-icons/Airplane'\nimport ArrowIcon from 'vue-material-design-icons/ArrowRight'\nimport ical from 'ical.js'\nimport md5 from 'md5'\nimport moment from '@nextcloud/moment'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\n\nimport CalendarImport from './CalendarImport'\nimport { importCalendarEvent } from '../../service/DAVService'\nimport logger from '../../logger'\n\nexport default {\n\tname: 'FlightReservation',\n\tcomponents: {\n\t\tAirplaneIcon,\n\t\tArrowIcon,\n\t\tCalendarImport,\n\t},\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcalendars: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmessageId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tdepartureTime() {\n\t\t\tif (!('departureTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(this.data.reservationFor.departureTime['@value']).format('LT')\n\t\t},\n\t\tdepartureDate() {\n\t\t\tif (!('departureTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(this.data.reservationFor.departureTime['@value']).format('L')\n\t\t},\n\t\tarrivalTime() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(this.data.reservationFor.arrivalTime['@value']).format('LT')\n\t\t},\n\t\tarrivalDate() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(this.data.reservationFor.arrivalTime['@value']).format('L')\n\t\t},\n\t\tflightNumber() {\n\t\t\treturn this.data.reservationFor.airline.iataCode + this.data.reservationFor.flightNumber\n\t\t},\n\t\treservation() {\n\t\t\tif (!('reservationNumber' in this.data)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn this.data.reservationNumber\n\t\t},\n\t\tcanImport() {\n\t\t\treturn 'departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor\n\t\t},\n\t},\n\tmethods: {\n\t\thandleImport(calendar) {\n\t\t\tconst event = new ical.Component('VEVENT')\n\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t'SUMMARY',\n\t\t\t\tt('mail', 'Flight {flightNr} from {depAirport} to {arrAirport}', {\n\t\t\t\t\tflightNr: this.flightNumber,\n\t\t\t\t\tdepAirport: this.data.reservationFor.departureAirport.iataCode,\n\t\t\t\t\tarrAirport: this.data.reservationFor.arrivalAirport.iataCode,\n\t\t\t\t})\n\t\t\t)\n\n\t\t\tconst depart = moment(this.data.reservationFor.departureTime['@value']).format()\n\t\t\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(depart))\n\t\t\tconst arrive = moment(this.data.reservationFor.arrivalTime['@value']).format()\n\t\t\tevent.updatePropertyWithValue('DTEND', ical.Time.fromDateTimeString(arrive))\n\n\t\t\t// TODO: read version from package.json\n\t\t\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\n\n\t\t\t// TODO: is this free of collisions? the bug reports will tell us!\n\t\t\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.flightNumber))\n\n\t\t\tconst cal = new ical.Component('VCALENDAR')\n\t\t\tcal.addSubcomponent(event)\n\t\t\tlogger.debug('generated calendar event from flight reservation data', { ical: cal.toString() })\n\n\t\t\treturn importCalendarEvent(calendar.url)(cal.toString())\n\t\t\t\t.then(() => {\n\t\t\t\t\tlogger.debug('event successfully imported')\n\t\t\t\t\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tlogger.error('Could not import event', { error })\n\t\t\t\t\tshowError(t('mail', 'Could not create event'))\n\t\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.reservation {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n\n.departure,\n.arrival {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n}\n\n.departure,\n.arrival,\n.connection {\n\tjustify-content: center;\n}\n\n.iata {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n\n.airport {\n\tfont-size: large;\n}\n\n.departure {\n\ttext-align: right;\n}\n\n.connection {\n\ttext-align: center;\n\tpadding: 0 40px;\n}\n</style>\n","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlightReservation.vue?vue&type=style&index=0&id=670645fc&scoped=true&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./FlightReservation.vue?vue&type=template&id=670645fc&scoped=true&\"\nimport script from \"./FlightReservation.vue?vue&type=script&lang=js&\"\nexport * from \"./FlightReservation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FlightReservation.vue?vue&type=style&index=0&id=670645fc&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"670645fc\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"reservation\"},[_c('div',{staticClass:\"departure\"},[_c('div',{staticClass:\"iata\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.data.reservationFor.departureAirport.iataCode)+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"airport\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.data.reservationFor.departureAirport.name)+\"\\n\\t\\t\")]),_vm._v(\" \"),(_vm.departureDate)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.departureDate)+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.departureTime)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.departureTime)+\"\\n\\t\\t\")]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"connection\"},[_c('div',[_c('AirplaneIcon',{attrs:{\"title\":_vm.t('mail', 'Airplane')}})],1),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.flightNumber))]),_vm._v(\" \"),(_vm.reservation)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Reservation {id}', {id: _vm.reservation}))+\"\\n\\t\\t\")]):_c('div',[_c('ArrowIcon',{attrs:{\"decorative\":\"\"}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"arrival\"},[_c('div',{staticClass:\"iata\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.data.reservationFor.arrivalAirport.iataCode)+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"airport\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.data.reservationFor.arrivalAirport.name)+\"\\n\\t\\t\")]),_vm._v(\" \"),(_vm.arrivalDate)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.arrivalDate)+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.arrivalTime)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.arrivalTime)+\"\\n\\t\\t\")]):_vm._e()]),_vm._v(\" \"),_c('CalendarImport',{attrs:{\"calendars\":_vm.calendars,\"handler\":_vm.handleImport}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainReservation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainReservation.vue?vue&type=script&lang=js&\"","<template>\n\t<div class=\"reservation\">\n\t\t<div class=\"departure\">\n\t\t\t<div class=\"station\">\n\t\t\t\t{{ data.reservationFor.departureStation.name }}\n\t\t\t</div>\n\t\t\t<div v-if=\"departureDate\">\n\t\t\t\t{{ departureDate }}\n\t\t\t</div>\n\t\t\t<div v-if=\"departureTime\">\n\t\t\t\t{{ departureTime }}\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"connection\">\n\t\t\t<div><TrainIcon :title=\"t('mail', 'Train')\" /></div>\n\t\t\t<div>{{ trainNumber }}</div>\n\t\t\t<div><ArrowIcon decorative /></div>\n\t\t</div>\n\t\t<div class=\"arrival\">\n\t\t\t<div class=\"station\">\n\t\t\t\t{{ data.reservationFor.arrivalStation.name }}\n\t\t\t</div>\n\t\t\t<div v-if=\"arrivalDate\">\n\t\t\t\t{{ arrivalDate }}\n\t\t\t</div>\n\t\t\t<div v-if=\"arrivalTime\">\n\t\t\t\t{{ arrivalTime }}\n\t\t\t</div>\n\t\t</div>\n\t\t<CalendarImport v-if=\"canImport\" :calendars=\"calendars\" :handler=\"handleImport\" />\n\t</div>\n</template>\n\n<script>\nimport ArrowIcon from 'vue-material-design-icons/ArrowRight'\nimport ical from 'ical.js'\nimport md5 from 'md5'\nimport moment from '@nextcloud/moment'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\nimport TrainIcon from 'vue-material-design-icons/Train'\n\nimport CalendarImport from './CalendarImport'\nimport { importCalendarEvent } from '../../service/DAVService'\nimport logger from '../../logger'\n\nexport default {\n\tname: 'TrainReservation',\n\tcomponents: {\n\t\tArrowIcon,\n\t\tCalendarImport,\n\t\tTrainIcon,\n\t},\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcalendars: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmessageId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tdepartureTime() {\n\t\t\tif (!('departureTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(this.data.reservationFor.departureTime).format('LT')\n\t\t},\n\t\tdepartureDate() {\n\t\t\tif ('departureTime' in this.data.reservationFor) {\n\t\t\t\treturn moment(this.data.reservationFor.departureTime).format('L')\n\t\t\t}\n\t\t\tif ('departureDay' in this.data.reservationFor) {\n\t\t\t\treturn moment(this.data.reservationFor.departureDay).format('L')\n\t\t\t}\n\t\t\treturn undefined\n\t\t},\n\t\tarrivalTime() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(this.data.reservationFor.arrivalTime).format('LT')\n\t\t},\n\t\tarrivalDate() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(this.data.reservationFor.arrivalTime).format('L')\n\t\t},\n\t\ttrainNumber() {\n\t\t\treturn this.data.reservationFor.trainNumber\n\t\t},\n\t\tcanImport() {\n\t\t\treturn (\n\t\t\t\t('departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor)\n\t\t\t\t|| 'departureDay' in this.data.reservationFor\n\t\t\t)\n\t\t},\n\t},\n\tmethods: {\n\t\thandleImport(calendar) {\n\t\t\tconst event = new ical.Component('VEVENT')\n\t\t\tif ('trainNumber' in this.data.reservationFor) {\n\t\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t\t'SUMMARY',\n\t\t\t\t\tt('mail', '{trainNr} from {depStation} to {arrStation}', {\n\t\t\t\t\t\ttrainNr: this.data.reservationFor.trainNumber,\n\t\t\t\t\t\tdepStation: this.data.reservationFor.departureStation.name,\n\t\t\t\t\t\tarrStation: this.data.reservationFor.arrivalStation.name,\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t} else {\n\t\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t\t'SUMMARY',\n\t\t\t\t\tt('mail', 'Train from {depStation} to {arrStation}', {\n\t\t\t\t\t\tdepStation: this.data.reservationFor.departureStation.name,\n\t\t\t\t\t\tarrStation: this.data.reservationFor.arrivalStation.name,\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tif ('departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor) {\n\t\t\t\tconst depart = moment(this.data.reservationFor.departureTime).format()\n\t\t\t\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(depart))\n\t\t\t\tconst arrive = moment(this.data.reservationFor.arrivalTime).format()\n\t\t\t\tevent.updatePropertyWithValue('DTEND', ical.Time.fromDateTimeString(arrive))\n\t\t\t} else if ('departureDay' in this.data.reservationFor) {\n\t\t\t\tconst date = moment(this.data.reservationFor.departureDay).format()\n\t\t\t\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(date))\n\t\t\t}\n\n\t\t\t// TODO: read version from package.json\n\t\t\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\n\n\t\t\t// TODO: is this free of collisions? the bug reports will tell us!\n\t\t\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.departureTime))\n\n\t\t\tconst cal = new ical.Component('VCALENDAR')\n\t\t\tcal.addSubcomponent(event)\n\t\t\tlogger.debug('generated calendar event from train reservation data', { ical: cal.toString() })\n\n\t\t\treturn importCalendarEvent(calendar.url)(cal.toString())\n\t\t\t\t.then(() => {\n\t\t\t\t\tlogger.debug('event successfully imported')\n\t\t\t\t\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tlogger.error('Could not import event', { error })\n\t\t\t\t\tshowError(t('mail', 'Could not create event'))\n\t\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.reservation {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n\n.departure,\n.arrival {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n}\n\n.departure,\n.arrival,\n.connection {\n\tjustify-content: center;\n}\n\n.station {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n\n.departure {\n\ttext-align: right;\n}\n\n.connection {\n\ttext-align: center;\n\tpadding: 0 40px;\n}\n</style>\n","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainReservation.vue?vue&type=style&index=0&id=1eebd676&scoped=true&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./TrainReservation.vue?vue&type=template&id=1eebd676&scoped=true&\"\nimport script from \"./TrainReservation.vue?vue&type=script&lang=js&\"\nexport * from \"./TrainReservation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TrainReservation.vue?vue&type=style&index=0&id=1eebd676&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1eebd676\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"reservation\"},[_c('div',{staticClass:\"departure\"},[_c('div',{staticClass:\"station\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.data.reservationFor.departureStation.name)+\"\\n\\t\\t\")]),_vm._v(\" \"),(_vm.departureDate)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.departureDate)+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.departureTime)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.departureTime)+\"\\n\\t\\t\")]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"connection\"},[_c('div',[_c('TrainIcon',{attrs:{\"title\":_vm.t('mail', 'Train')}})],1),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.trainNumber))]),_vm._v(\" \"),_c('div',[_c('ArrowIcon',{attrs:{\"decorative\":\"\"}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"arrival\"},[_c('div',{staticClass:\"station\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.data.reservationFor.arrivalStation.name)+\"\\n\\t\\t\")]),_vm._v(\" \"),(_vm.arrivalDate)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.arrivalDate)+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.arrivalTime)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.arrivalTime)+\"\\n\\t\\t\")]):_vm._e()]),_vm._v(\" \"),(_vm.canImport)?_c('CalendarImport',{attrs:{\"calendars\":_vm.calendars,\"handler\":_vm.handleImport}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div>\n\t\t<template v-for=\"(entry, idx) in entries\">\n\t\t\t<EventReservation\n\t\t\t\tv-if=\"entry['@type'] === 'EventReservation'\"\n\t\t\t\t:key=\"idx\"\n\t\t\t\t:data=\"entry\"\n\t\t\t\t:calendars=\"calendars\"\n\t\t\t\t:message-id=\"messageId\" />\n\t\t\t<FlightReservation\n\t\t\t\tv-else-if=\"entry['@type'] === 'FlightReservation'\"\n\t\t\t\t:key=\"idx\"\n\t\t\t\t:data=\"entry\"\n\t\t\t\t:calendars=\"calendars\"\n\t\t\t\t:message-id=\"messageId\" />\n\t\t\t<TrainReservation\n\t\t\t\tv-else-if=\"entry['@type'] === 'TrainReservation'\"\n\t\t\t\t:key=\"idx\"\n\t\t\t\t:data=\"entry\"\n\t\t\t\t:calendars=\"calendars\"\n\t\t\t\t:message-id=\"messageId\" />\n\t\t\t<span v-else :key=\"idx\">{{\n\t\t\t\tt('mail', 'Itinerary for {type} is not supported yet', {type: entry['@type']})\n\t\t\t}}</span>\n\t\t</template>\n\t</div>\n</template>\n\n<script>\nimport once from 'lodash/fp/once'\n\nimport { getUserCalendars } from '../service/DAVService'\nimport logger from '../logger'\nimport EventReservation from './itinerary/EventReservation'\nimport FlightReservation from './itinerary/FlightReservation'\nimport TrainReservation from './itinerary/TrainReservation'\n\nconst getUserCalendarsOnce = once(getUserCalendars)\n\nexport default {\n\tname: 'Itinerary',\n\tcomponents: {\n\t\tEventReservation,\n\t\tFlightReservation,\n\t\tTrainReservation,\n\t},\n\tprops: {\n\t\tentries: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmessageId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcalendars: [],\n\t\t}\n\t},\n\tmounted() {\n\t\tgetUserCalendarsOnce()\n\t\t\t.then((calendars) => (this.calendars = calendars))\n\t\t\t.catch((error) => logger.error('Could not load calendars', { error }))\n\t},\n}\n</script>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Itinerary.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Itinerary.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Itinerary.vue?vue&type=template&id=5044772a&\"\nimport script from \"./Itinerary.vue?vue&type=script&lang=js&\"\nexport * from \"./Itinerary.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._l((_vm.entries),function(entry,idx){return [(entry['@type'] === 'EventReservation')?_c('EventReservation',{key:idx,attrs:{\"data\":entry,\"calendars\":_vm.calendars,\"message-id\":_vm.messageId}}):(entry['@type'] === 'FlightReservation')?_c('FlightReservation',{key:idx,attrs:{\"data\":entry,\"calendars\":_vm.calendars,\"message-id\":_vm.messageId}}):(entry['@type'] === 'TrainReservation')?_c('TrainReservation',{key:idx,attrs:{\"data\":entry,\"calendars\":_vm.calendars,\"message-id\":_vm.messageId}}):_c('span',{key:idx},[_vm._v(_vm._s(_vm.t('mail', 'Itinerary for {type} is not supported yet', {type: entry['@type']})))])]})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachment.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"attachment\" @click=\"download\">\n\t\t<img v-if=\"isImage\" class=\"mail-attached-image\" :src=\"url\">\n\t\t<img class=\"attachment-icon\" :src=\"mimeUrl\">\n\t\t<span class=\"attachment-name\"\n\t\t\t:title=\"label\">{{ name }}\n\t\t\t<span class=\"attachment-size\">({{ humanReadable(size) }})</span>\n\t\t</span>\n\t\t<button\n\t\t\tv-if=\"isCalendarEvent\"\n\t\t\tclass=\"button attachment-import calendar\"\n\t\t\t:class=\"{'icon-add': !loadingCalendars, 'icon-loading-small': loadingCalendars}\"\n\t\t\t:disabled=\"loadingCalendars\"\n\t\t\t:title=\"t('mail', 'Import into calendar')\"\n\t\t\t@click.stop=\"loadCalendars\" />\n\t\t<button class=\"button icon-download attachment-download\" :title=\"t('mail', 'Download attachment')\" />\n\t\t<button\n\t\t\tclass=\"attachment-save-to-cloud\"\n\t\t\t:class=\"{'icon-folder': !savingToCloud, 'icon-loading-small': savingToCloud}\"\n\t\t\t:disabled=\"savingToCloud\"\n\t\t\t:title=\"t('mail', 'Save to Files')\"\n\t\t\t@click.stop=\"saveToCloud\" />\n\t\t<div\n\t\t\tv-on-click-outside=\"closeCalendarPopover\"\n\t\t\tclass=\"popovermenu bubble attachment-import-popover hidden\"\n\t\t\t:class=\"{open: showCalendarPopover}\">\n\t\t\t<PopoverMenu :menu=\"calendarMenuEntries\" />\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { formatFileSize } from '@nextcloud/files'\nimport { mixin as onClickOutside } from 'vue-on-click-outside'\nimport { translate as t } from '@nextcloud/l10n'\nimport { getFilePickerBuilder } from '@nextcloud/dialogs'\nimport PopoverMenu from '@nextcloud/vue/dist/Components/PopoverMenu'\n\nimport Logger from '../logger'\n\nimport { downloadAttachment, saveAttachmentToFiles } from '../service/AttachmentService'\nimport { getUserCalendars, importCalendarEvent } from '../service/DAVService'\n\nexport default {\n\tname: 'MessageAttachment',\n\tcomponents: {\n\t\tPopoverMenu,\n\t},\n\tmixins: [onClickOutside],\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tfileName: {\n\t\t\ttype: String,\n\t\t\tdefault: t('mail', 'Unnamed'),\n\t\t\trequired: false,\n\t\t},\n\t\turl: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tsize: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tmime: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmimeUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tisImage: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tisCalendarEvent: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tsavingToCloud: false,\n\t\t\tloadingCalendars: false,\n\t\t\tcalendars: [],\n\t\t\tshowCalendarPopover: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tname() {\n\t\t\tif (this.mime === 'message/rfc822') {\n\t\t\t\treturn t('mail', 'Embedded message')\n\t\t\t}\n\t\t\treturn this.fileName\n\t\t},\n\t\tlabel() {\n\t\t\tif (this.mime === 'message/rfc822') {\n\t\t\t\treturn t('mail', 'Embedded message') + ' (' + formatFileSize(this.size) + ')'\n\t\t\t}\n\t\t\treturn this.fileName + ' (' + formatFileSize(this.size) + ')'\n\t\t},\n\t\tcalendarMenuEntries() {\n\t\t\treturn this.calendars.map((cal) => {\n\t\t\t\treturn {\n\t\t\t\t\ticon: 'icon-add',\n\t\t\t\t\ttext: cal.displayname,\n\t\t\t\t\taction: this.importCalendar(cal.url),\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t},\n\tmethods: {\n\t\thumanReadable(size) {\n\t\t\treturn formatFileSize(size)\n\t\t},\n\t\tsaveToCloud() {\n\t\t\tconst saveAttachment = (id, attachmentId) => (directory) => {\n\t\t\t\treturn saveAttachmentToFiles(id, attachmentId, directory)\n\t\t\t}\n\t\t\tconst id = this.$route.params.threadId\n\t\t\tconst picker = getFilePickerBuilder(t('mail', 'Choose a folder to store the attachment in'))\n\t\t\t\t.setMultiSelect(false)\n\t\t\t\t.addMimeTypeFilter('httpd/unix-directory')\n\t\t\t\t.setModal(true)\n\t\t\t\t.setType(1)\n\t\t\t\t.allowDirectories(true)\n\t\t\t\t.build()\n\n\t\t\treturn picker\n\t\t\t\t.pick()\n\t\t\t\t.then((dest) => {\n\t\t\t\t\tthis.savingToCloud = true\n\t\t\t\t\treturn dest\n\t\t\t\t})\n\t\t\t\t.then(saveAttachment(id, this.id))\n\t\t\t\t.then(() => Logger.info('saved'))\n\t\t\t\t.catch((e) => Logger.error('not saved', { error: e }))\n\t\t\t\t.then(() => (this.savingToCloud = false))\n\t\t},\n\t\tdownload() {\n\t\t\twindow.location = this.url\n\t\t},\n\t\tloadCalendars() {\n\t\t\tthis.loadingCalendars = true\n\t\t\tgetUserCalendars().then((calendars) => {\n\t\t\t\tthis.calendars = calendars\n\t\t\t\tthis.showCalendarPopover = true\n\t\t\t\tthis.loadingCalendars = false\n\t\t\t})\n\t\t},\n\t\tcloseCalendarPopover() {\n\t\t\tthis.showCalendarPopover = false\n\t\t},\n\t\timportCalendar(url) {\n\t\t\treturn () => {\n\t\t\t\tdownloadAttachment(this.url)\n\t\t\t\t\t.then(importCalendarEvent(url))\n\t\t\t\t\t.then(() => Logger.info('calendar imported'))\n\t\t\t\t\t.catch((e) => Logger.error('import error', { error: e }))\n\t\t\t\t\t.then(() => (this.showCalendarPopover = false))\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.attachment {\n\tposition: relative;\n\tdisplay: inline-block;\n\twidth: calc(100% - 32px);\n\tpadding: 16px;\n}\n\n.attachment:hover,\n.attachment span:hover {\n\tbackground-color: var(--color-background-hover);\n\tcursor: pointer;\n}\n\n.mail-attached-image {\n\tdisplay: block;\n\tmax-width: 100%;\n\tborder-radius: var(--border-radius);\n\tcursor: pointer;\n}\n.mail-attached-image:hover {\n\topacity: 0.8;\n}\n\n.attachment-save-to-cloud,\n.attachment-download,\n.attachment-import {\n\tposition: absolute;\n\tpadding: 21px;\n\tmargin: 0;\n\tbottom: 6px;\n\tbackground-color: transparent;\n\tborder-color: transparent;\n}\n\n.attachment-save-to-cloud {\n\tright: 0;\n}\n\n.attachment-download {\n\tright: 32px;\n\topacity: 0.6;\n}\n\n.attachment-import {\n\tright: 64px;\n}\n\n.attachment-import-popover {\n\tright: 32px;\n\ttop: 42px;\n}\n\n.attachment-import-popover::after {\n\tright: 32px;\n}\n\n.attachment-name {\n\tdisplay: inline-block;\n\twidth: calc(100% - 72px);\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tvertical-align: middle;\n}\n\n/* show attachment size less prominent */\n.attachment-size {\n\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=50)';\n\topacity: 0.5;\n}\n\n.attachment-icon {\n\tvertical-align: middle;\n\ttext-align: left;\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachment.vue?vue&type=style&index=0&id=473b0a1e&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachments.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachments.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"mail-message-attachments\">\n\t\t<div class=\"attachments\">\n\t\t\t<MessageAttachment\n\t\t\t\tv-for=\"attachment in attachments\"\n\t\t\t\t:id=\"attachment.id\"\n\t\t\t\t:key=\"attachment.id\"\n\t\t\t\t:file-name=\"attachment.fileName\"\n\t\t\t\t:size=\"attachment.size\"\n\t\t\t\t:url=\"attachment.downloadUrl\"\n\t\t\t\t:is-image=\"attachment.isImage\"\n\t\t\t\t:is-calendar-event=\"attachment.isCalendarEvent\"\n\t\t\t\t:mime=\"attachment.mime\"\n\t\t\t\t:mime-url=\"attachment.mimeUrl\" />\n\t\t</div>\n\t\t<p v-if=\"moreThanOne\" class=\"attachments-button-wrapper\">\n\t\t\t<button\n\t\t\t\tclass=\"attachments-save-to-cloud\"\n\t\t\t\t:class=\"{'icon-folder': !savingToCloud, 'icon-loading-small': savingToCloud}\"\n\t\t\t\t:disabled=\"savingToCloud\"\n\t\t\t\t@click=\"saveAll\">\n\t\t\t\t{{ t('mail', 'Save all to Files') }}\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tclass=\"attachments-save-to-cloud icon-folder\"\n\t\t\t\t@click=\"downloadZip\">\n\t\t\t\t{{ t('mail', 'Download Zip') }}\n\t\t\t</button>\n\t\t</p>\n\t</div>\n</template>\n\n<script>\nimport { generateUrl } from '@nextcloud/router'\nimport { getFilePickerBuilder } from '@nextcloud/dialogs'\nimport { saveAttachmentsToFiles } from '../service/AttachmentService'\n\nimport MessageAttachment from './MessageAttachment'\nimport Logger from '../logger'\n\nexport default {\n\tname: 'MessageAttachments',\n\tcomponents: {\n\t\tMessageAttachment,\n\t},\n\tprops: {\n\t\tenvelope: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t\tattachments: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tsavingToCloud: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tmoreThanOne() {\n\t\t\treturn this.attachments.length > 1\n\t\t},\n\t\tzipUrl() {\n\t\t\treturn generateUrl('/apps/mail/api/messages/{id}/attachments', {\n\t\t\t\tid: this.envelope.databaseId,\n\t\t\t})\n\t\t},\n\t},\n\tmethods: {\n\t\tsaveAll() {\n\t\t\tconst picker = getFilePickerBuilder(t('mail', 'Choose a folder to store the attachments in'))\n\t\t\t\t.setMultiSelect(false)\n\t\t\t\t.addMimeTypeFilter('httpd/unix-directory')\n\t\t\t\t.setModal(true)\n\t\t\t\t.setType(1)\n\t\t\t\t.allowDirectories(true)\n\t\t\t\t.build()\n\n\t\t\tconst saveAttachments = (id) => (directory) => {\n\t\t\t\treturn saveAttachmentsToFiles(id, directory)\n\t\t\t}\n\t\t\tconst id = this.$route.params.threadId\n\n\t\t\treturn picker\n\t\t\t\t.pick()\n\t\t\t\t.then((dest) => {\n\t\t\t\t\tthis.savingToCloud = true\n\t\t\t\t\treturn dest\n\t\t\t\t})\n\t\t\t\t.then(saveAttachments(id))\n\t\t\t\t.then(() => Logger.info('saved'))\n\t\t\t\t.catch((error) => Logger.error('not saved', { error }))\n\t\t\t\t.then(() => (this.savingToCloud = false))\n\t\t},\n\t\tdownloadZip() {\n\t\t\twindow.open(this.zipUrl)\n\t\t\twindow.focus()\n\t\t\twindow.location = this.zipUrl\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\">\n.attachments {\n\twidth: 300px;\n}\n\n/* show icon + text for Download all button\n\t\tas well as when there is only one attachment */\n.attachments-button-wrapper {\n\ttext-align: center;\n}\n.attachments-save-to-cloud {\n\tdisplay: inline-block;\n\tmargin: 16px;\n\tbackground-position: 16px center;\n\tpadding: 12px;\n\tpadding-left: 44px;\n}\n.oc-dialog {\n\tz-index: 10000000;\n}\n</style>\n","import { render, staticRenderFns } from \"./MessageAttachment.vue?vue&type=template&id=473b0a1e&scoped=true&\"\nimport script from \"./MessageAttachment.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageAttachment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageAttachment.vue?vue&type=style&index=0&id=473b0a1e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"473b0a1e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"attachment\",on:{\"click\":_vm.download}},[(_vm.isImage)?_c('img',{staticClass:\"mail-attached-image\",attrs:{\"src\":_vm.url}}):_vm._e(),_vm._v(\" \"),_c('img',{staticClass:\"attachment-icon\",attrs:{\"src\":_vm.mimeUrl}}),_vm._v(\" \"),_c('span',{staticClass:\"attachment-name\",attrs:{\"title\":_vm.label}},[_vm._v(_vm._s(_vm.name)+\"\\n\\t\\t\"),_c('span',{staticClass:\"attachment-size\"},[_vm._v(\"(\"+_vm._s(_vm.humanReadable(_vm.size))+\")\")])]),_vm._v(\" \"),(_vm.isCalendarEvent)?_c('button',{staticClass:\"button attachment-import calendar\",class:{'icon-add': !_vm.loadingCalendars, 'icon-loading-small': _vm.loadingCalendars},attrs:{\"disabled\":_vm.loadingCalendars,\"title\":_vm.t('mail', 'Import into calendar')},on:{\"click\":function($event){$event.stopPropagation();return _vm.loadCalendars($event)}}}):_vm._e(),_vm._v(\" \"),_c('button',{staticClass:\"button icon-download attachment-download\",attrs:{\"title\":_vm.t('mail', 'Download attachment')}}),_vm._v(\" \"),_c('button',{staticClass:\"attachment-save-to-cloud\",class:{'icon-folder': !_vm.savingToCloud, 'icon-loading-small': _vm.savingToCloud},attrs:{\"disabled\":_vm.savingToCloud,\"title\":_vm.t('mail', 'Save to Files')},on:{\"click\":function($event){$event.stopPropagation();return _vm.saveToCloud($event)}}}),_vm._v(\" \"),_c('div',{directives:[{name:\"on-click-outside\",rawName:\"v-on-click-outside\",value:(_vm.closeCalendarPopover),expression:\"closeCalendarPopover\"}],staticClass:\"popovermenu bubble attachment-import-popover hidden\",class:{open: _vm.showCalendarPopover}},[_c('PopoverMenu',{attrs:{\"menu\":_vm.calendarMenuEntries}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachments.vue?vue&type=style&index=0&lang=scss&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./MessageAttachments.vue?vue&type=template&id=338a22bc&\"\nimport script from \"./MessageAttachments.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageAttachments.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageAttachments.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mail-message-attachments\"},[_c('div',{staticClass:\"attachments\"},_vm._l((_vm.attachments),function(attachment){return _c('MessageAttachment',{key:attachment.id,attrs:{\"id\":attachment.id,\"file-name\":attachment.fileName,\"size\":attachment.size,\"url\":attachment.downloadUrl,\"is-image\":attachment.isImage,\"is-calendar-event\":attachment.isCalendarEvent,\"mime\":attachment.mime,\"mime-url\":attachment.mimeUrl}})}),1),_vm._v(\" \"),(_vm.moreThanOne)?_c('p',{staticClass:\"attachments-button-wrapper\"},[_c('button',{staticClass:\"attachments-save-to-cloud\",class:{'icon-folder': !_vm.savingToCloud, 'icon-loading-small': _vm.savingToCloud},attrs:{\"disabled\":_vm.savingToCloud},on:{\"click\":_vm.saveAll}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Save all to Files'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('button',{staticClass:\"attachments-save-to-cloud icon-folder\",on:{\"click\":_vm.downloadZip}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Download Zip'))+\"\\n\\t\\t\")])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div v-if=\"hasMdnRequest && !mdnSent\" class=\"mail-message-has-mdn-request\">\n\t\t{{\n\t\t\tt('mail', 'The sender of this message has asked to be notified when you read this message.')\n\t\t}}\n\t\t<button :disabled=\"loading\" @click=\"sendMdn\">\n\t\t\t{{ t('mail', 'Notify the sender') }}\n\t\t</button>\n\t</div>\n\t<div v-else-if=\"mdnSent\" class=\"mail-message-has-mdn-request\">\n\t\t{{\n\t\t\tt('mail', 'You sent a read confirmation to the sender of this message.')\n\t\t}}\n\t</div>\n</template>\n\n<script>\nimport logger from '../logger'\nimport { sendMdn } from '../service/MessageService'\nimport { showError } from '@nextcloud/dialogs'\n\nexport default {\n\tname: 'MdnRequest',\n\tprops: {\n\t\tmessage: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\thasMdnRequest: this.message.dispositionNotificationTo && this.message.dispositionNotificationTo.length > 0,\n\t\t\tloading: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tmdnSent() {\n\t\t\treturn this.message.flags.mdnsent\n\t\t},\n\t},\n\tmethods: {\n\t\tasync sendMdn() {\n\t\t\tthis.loading = true\n\t\t\tlogger.debug('send return receipt')\n\n\t\t\ttry {\n\t\t\t\tawait sendMdn(this.message.databaseId)\n\t\t\t\tthis.$store.commit('flagEnvelope', { envelope: this.message, flag: 'mdnsent', value: true })\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not send mdn', error)\n\t\t\t\tshowError(t('mail', 'Could not send mdn'))\n\t\t\t}\n\n\t\t\tthis.loading = false\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.mail-message-has-mdn-request {\n\twhite-space: normal;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MdnRequest.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MdnRequest.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MdnRequest.vue?vue&type=style&index=0&id=3bf60f28&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./MdnRequest.vue?vue&type=template&id=3bf60f28&scoped=true&\"\nimport script from \"./MdnRequest.vue?vue&type=script&lang=js&\"\nexport * from \"./MdnRequest.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MdnRequest.vue?vue&type=style&index=0&id=3bf60f28&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3bf60f28\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.hasMdnRequest && !_vm.mdnSent)?_c('div',{staticClass:\"mail-message-has-mdn-request\"},[_vm._v(\"\\n\\t\"+_vm._s(_vm.t('mail', 'The sender of this message has asked to be notified when you read this message.'))+\"\\n\\t\"),_c('button',{attrs:{\"disabled\":_vm.loading},on:{\"click\":_vm.sendMdn}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'Notify the sender'))+\"\\n\\t\")])]):(_vm.mdnSent)?_c('div',{staticClass:\"mail-message-has-mdn-request\"},[_vm._v(\"\\n\\t\"+_vm._s(_vm.t('mail', 'You sent a read confirmation to the sender of this message.'))+\"\\n\")]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div>\n\t\t<div v-if=\"mailvelope\" id=\"mail-content\">\n\t\t\t<MdnRequest :message=\"message\" />\n\t\t</div>\n\t\t<span v-else>{{ t('mail', 'This message is encrypted with PGP. Install Mailvelope to decrypt it.') }}</span>\n\t</div>\n</template>\n\n<script>\nimport { getMailvelope } from '../crypto/mailvelope'\nimport MdnRequest from './MdnRequest'\n\nexport default {\n\tname: 'MessageEncryptedBody',\n\tcomponents: { MdnRequest },\n\tprops: {\n\t\tbody: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tfrom: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: undefined,\n\t\t},\n\t\tmessage: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tmailvelope: false,\n\t\t}\n\t},\n\tasync mounted() {\n\t\tthis.mailvelope = await getMailvelope()\n\t\tthis.mailvelope.createDisplayContainer('#mail-content', this.body, undefined, {\n\t\t\tsenderAddress: this.from,\n\t\t})\n\t},\n}\n</script>\n\n<style scoped>\n#mail-content {\n\theight: 450px;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageEncryptedBody.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageEncryptedBody.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageEncryptedBody.vue?vue&type=style&index=0&id=812ccd96&scoped=true&lang=css&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./MessageEncryptedBody.vue?vue&type=template&id=812ccd96&scoped=true&\"\nimport script from \"./MessageEncryptedBody.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageEncryptedBody.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageEncryptedBody.vue?vue&type=style&index=0&id=812ccd96&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"812ccd96\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.mailvelope)?_c('div',{attrs:{\"id\":\"mail-content\"}},[_c('MdnRequest',{attrs:{\"message\":_vm.message}})],1):_c('span',[_vm._v(_vm._s(_vm.t('mail', 'This message is encrypted with PGP. Install Mailvelope to decrypt it.')))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div id=\"mail-content\">\n\t\t<MdnRequest :message=\"message\" />\n\t\t<div v-if=\"hasBlockedContent\" id=\"mail-message-has-blocked-content\" style=\"color: #000000\">\n\t\t\t{{ t('mail', 'The images have been blocked to protect your privacy.') }}\n\t\t\t<Actions default-icon=\"icon-toggle\" :menu-title=\"t('mail', 'Show')\">\n\t\t\t\t<ActionButton icon=\"icon-toggle\"\n\t\t\t\t\t@click=\"onShowBlockedContent\">\n\t\t\t\t\t{{ t('mail', 'Always show images from {sender}', {sender: message.from[0].email}) }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton icon=\"icon-toggle\"\n\t\t\t\t\t@click=\"onShowBlockedContentForDomain\">\n\t\t\t\t\t{{ t('mail', 'Always show images from {domain}', {domain: getDomain()}) }}\n\t\t\t\t</ActionButton>\n\t\t\t</Actions>\n\t\t</div>\n\t\t<div v-if=\"loading\" class=\"icon-loading\" />\n\t\t<div id=\"message-container\" :class=\"{hidden: loading, scroll: !fullHeight}\">\n\t\t\t<iframe ref=\"iframe\"\n\t\t\t\tclass=\"message-frame\"\n\t\t\t\t:title=\"t('mail', 'Message frame')\"\n\t\t\t\t:src=\"url\"\n\t\t\t\tseamless\n\t\t\t\t@load=\"onMessageFrameLoad\" />\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { iframeResizer } from 'iframe-resizer'\nimport PrintScout from 'printscout'\nimport { trustSender } from '../service/TrustedSenderService'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\nimport Actions from '@nextcloud/vue/dist/Components/Actions'\n\nimport logger from '../logger'\nimport MdnRequest from './MdnRequest'\nconst scout = new PrintScout()\n\nexport default {\n\tname: 'MessageHTMLBody',\n\tcomponents: {\n\t\tMdnRequest,\n\t\tActions,\n\t\tActionButton,\n\t},\n\tprops: {\n\t\turl: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tfullHeight: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t\tmessage: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading: true,\n\t\t\thasBlockedContent: false,\n\t\t\tisSenderTrusted: this.message.isSenderTrusted,\n\t\t}\n\t},\n\tbeforeMount() {\n\t\tscout.on('beforeprint', this.onBeforePrint)\n\t\tscout.on('afterprint', this.onAfterPrint)\n\t},\n\tmounted() {\n\t\tiframeResizer({}, this.$refs.iframe)\n\t},\n\tbeforeDestroy() {\n\t\tscout.off('beforeprint', this.onBeforePrint)\n\t\tscout.off('afterprint', this.onAfterPrint)\n\t\tthis.$refs.iframe.iFrameResizer.close()\n\t},\n\tmethods: {\n\t\tgetIframeDoc() {\n\t\t\tconst iframe = this.$refs.iframe\n\t\t\treturn iframe.contentDocument || iframe.contentWindow.document\n\t\t},\n\t\tonMessageFrameLoad() {\n\t\t\tconst iframeDoc = this.getIframeDoc()\n\t\t\tthis.hasBlockedContent\n\t\t\t\t= iframeDoc.querySelectorAll('[data-original-src]').length > 0\n\t\t\t\t|| iframeDoc.querySelectorAll('[data-original-style]').length > 0\n\n\t\t\tthis.loading = false\n\t\t\tif (this.isSenderTrusted) {\n\t\t\t\tthis.displayIframe()\n\t\t\t}\n\t\t},\n\t\tonAfterPrint() {\n\t\t\tthis.$refs.iframe.style.setProperty('height', '')\n\t\t},\n\t\tonBeforePrint() {\n\t\t\tthis.$refs.iframe.style.setProperty('height', `${this.getIframeDoc().body.scrollHeight}px`, 'important')\n\t\t},\n\t\tdisplayIframe() {\n\t\t\tconst iframeDoc = this.getIframeDoc()\n\t\t\tlogger.debug('showing external images')\n\t\t\tiframeDoc.querySelectorAll('[data-original-src]').forEach((node) => {\n\t\t\t\tnode.style.display = null\n\t\t\t\tnode.setAttribute('src', node.getAttribute('data-original-src'))\n\t\t\t})\n\t\t\tiframeDoc\n\t\t\t\t.querySelectorAll('[data-original-style]')\n\t\t\t\t.forEach((node) => node.setAttribute('style', node.getAttribute('data-original-style')))\n\t\t\tthis.hasBlockedContent = false\n\t\t},\n\t\tasync onShowBlockedContent() {\n\t\t\tthis.displayIframe()\n\t\t\tawait trustSender(this.message.from[0].email, 'individual', true)\n\t\t},\n\t\tgetDomain() {\n\t\t\treturn this.message.from[0].email.split('@').pop()\n\t\t},\n\t\tasync onShowBlockedContentForDomain() {\n\t\t\tthis.displayIframe()\n\t\t\t// TODO: there might be more than one @ in an email address\n\t\t\tawait trustSender(this.getDomain(), 'domain', true)\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n// account for 8px margin on iframe body\n#mail-content {\n\tmargin-left: 48px;\n\tmargin-top: 2px;\n\tdisplay: flex;\n\tflex-direction: column;\n\theight: 100%;\n\tbackground-color: #FFFFFF;\n}\n#mail-message-has-blocked-content {\n\tmargin-left: 8px;\n}\n\n#message-container {\n\tflex: 1;\n\tdisplay: flex;\n\tbackground-color: #FFFFFF;\n\n\t// TODO: collapse quoted text and remove inner scrollbar\n\t&.scroll {\n\t\tmax-height: 50vh;\n\t\toverflow-y: auto;\n\t}\n}\n::v-deep .icon-toggle {\n\tbackground-image: var(--icon-toggle-000) !important;\n}\n::v-deep .action-item__menutoggle--with-title {\n\tbackground-color: var(--color-background-hover) !important;\n}\n.message-frame {\n\twidth: 100%;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageHTMLBody.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageHTMLBody.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageHTMLBody.vue?vue&type=style&index=0&id=0970d385&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./MessageHTMLBody.vue?vue&type=template&id=0970d385&scoped=true&\"\nimport script from \"./MessageHTMLBody.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageHTMLBody.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageHTMLBody.vue?vue&type=style&index=0&id=0970d385&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0970d385\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"mail-content\"}},[_c('MdnRequest',{attrs:{\"message\":_vm.message}}),_vm._v(\" \"),(_vm.hasBlockedContent)?_c('div',{staticStyle:{\"color\":\"#000000\"},attrs:{\"id\":\"mail-message-has-blocked-content\"}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'The images have been blocked to protect your privacy.'))+\"\\n\\t\\t\"),_c('Actions',{attrs:{\"default-icon\":\"icon-toggle\",\"menu-title\":_vm.t('mail', 'Show')}},[_c('ActionButton',{attrs:{\"icon\":\"icon-toggle\"},on:{\"click\":_vm.onShowBlockedContent}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Always show images from {sender}', {sender: _vm.message.from[0].email}))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-toggle\"},on:{\"click\":_vm.onShowBlockedContentForDomain}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Always show images from {domain}', {domain: _vm.getDomain()}))+\"\\n\\t\\t\\t\")])],1)],1):_vm._e(),_vm._v(\" \"),(_vm.loading)?_c('div',{staticClass:\"icon-loading\"}):_vm._e(),_vm._v(\" \"),_c('div',{class:{hidden: _vm.loading, scroll: !_vm.fullHeight},attrs:{\"id\":\"message-container\"}},[_c('iframe',{ref:\"iframe\",staticClass:\"message-frame\",attrs:{\"title\":_vm.t('mail', 'Message frame'),\"src\":_vm.url,\"seamless\":\"\"},on:{\"load\":_vm.onMessageFrameLoad}})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div id=\"mail-content\">\n\t\t<MdnRequest :message=\"message\" />\n\t\t<div id=\"message-container\" v-html=\"nl2br(enhancedBody)\" />\n\t\t<details v-if=\"signature\" class=\"mail-signature\">\n\t\t\t<summary v-html=\"nl2br(signatureSummaryAndBody.summary)\" />\n\t\t\t<span v-html=\"nl2br(signatureSummaryAndBody.body)\" />\n\t\t</details>\n\t</div>\n</template>\n\n<script>\nimport MdnRequest from './MdnRequest'\nconst regFirstParagraph = /(.+\\n\\r?)+(\\n\\r?)+/\n\nexport default {\n\tname: 'MessagePlainTextBody',\n\tcomponents: { MdnRequest },\n\tprops: {\n\t\tbody: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tsignature: {\n\t\t\ttype: String,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t\tmessage: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t},\n\tcomputed: {\n\t\tenhancedBody() {\n\t\t\treturn this.body.replace(/(&gt;.*\\n?)+/g, (match) => {\n\t\t\t\treturn `<details class=\"quoted-text\"><summary>${t('mail', 'Quoted text')}</summary>${match}</details>`\n\t\t\t})\n\t\t},\n\t\tsignatureSummaryAndBody() {\n\t\t\tconst matches = this.signature.trim().match(regFirstParagraph)\n\n\t\t\tif (matches && matches[0]) {\n\t\t\t\treturn {\n\t\t\t\t\tsummary: matches[0],\n\t\t\t\t\tbody: this.signature.substring(matches[0].length),\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst lines = this.signature.trim().split(/\\r?\\n/)\n\t\t\treturn {\n\t\t\t\tsummary: lines[0],\n\t\t\t\tbody: lines.slice(1).join('\\n'),\n\t\t\t}\n\t\t},\n\t\tsignatureSummary() {\n\t\t\tconsole.info(this.signature.match(regFirstParagraph))\n\n\t\t\treturn this.signatureSummaryAndBody.summary\n\t\t},\n\t},\n\tmethods: {\n\t\tnl2br(str) {\n\t\t\treturn str.replace(/(\\r\\n|\\n\\r|\\n|\\r)/g, '<br />')\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\">\n.quoted-text {\n\tcolor: var(--color-text-maxcontrast)\n}\n</style>\n<style lang=\"scss\" scoped>\n#mail-content, .mail-signature {\n\twhite-space: pre-wrap;\n}\n.mail-signature, .quoted {\n\tcolor: var(--color-text-maxcontrast)\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessagePlainTextBody.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessagePlainTextBody.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessagePlainTextBody.vue?vue&type=style&index=0&lang=scss&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessagePlainTextBody.vue?vue&type=style&index=1&id=6bd2c088&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./MessagePlainTextBody.vue?vue&type=template&id=6bd2c088&scoped=true&\"\nimport script from \"./MessagePlainTextBody.vue?vue&type=script&lang=js&\"\nexport * from \"./MessagePlainTextBody.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessagePlainTextBody.vue?vue&type=style&index=0&lang=scss&\"\nimport style1 from \"./MessagePlainTextBody.vue?vue&type=style&index=1&id=6bd2c088&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6bd2c088\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"mail-content\"}},[_c('MdnRequest',{attrs:{\"message\":_vm.message}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"message-container\"},domProps:{\"innerHTML\":_vm._s(_vm.nl2br(_vm.enhancedBody))}}),_vm._v(\" \"),(_vm.signature)?_c('details',{staticClass:\"mail-signature\"},[_c('summary',{domProps:{\"innerHTML\":_vm._s(_vm.nl2br(_vm.signatureSummaryAndBody.summary))}}),_vm._v(\" \"),_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.nl2br(_vm.signatureSummaryAndBody.body))}})]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div :class=\"[message.hasHtmlBody ? 'mail-message-body mail-message-body-html' : 'mail-message-body']\"\n\t\trole=\"region\"\n\t\t:aria-label=\"t('mail','Message body')\">\n\t\t<div v-if=\"message.itineraries.length > 0\" class=\"message-itinerary\">\n\t\t\t<Itinerary :entries=\"message.itineraries\" :message-id=\"message.messageId\" />\n\t\t</div>\n\t\t<MessageHTMLBody v-if=\"message.hasHtmlBody\"\n\t\t\t:url=\"htmlUrl\"\n\t\t\t:message=\"message\"\n\t\t\t:full-height=\"fullHeight\" />\n\t\t<MessageEncryptedBody v-else-if=\"isEncrypted\"\n\t\t\t:body=\"message.body\"\n\t\t\t:from=\"from\"\n\t\t\t:message=\"message\" />\n\t\t<MessagePlainTextBody v-else\n\t\t\t:body=\"message.body\"\n\t\t\t:signature=\"message.signature\"\n\t\t\t:message=\"message\" />\n\t\t<Popover v-if=\"message.attachments[0]\" class=\"attachment-popover\">\n\t\t\t<Actions slot=\"trigger\">\n\t\t\t\t<ActionButton icon=\"icon-public icon-attachment\">\n\t\t\t\t\t{{ t('mail', 'Attachments') }}\n\t\t\t\t</ActionButton>\n\t\t\t</Actions>\n\t\t\t<MessageAttachments v-close-popover=\"true\" :attachments=\"message.attachments\" :envelope=\"envelope\" />\n\t\t</Popover>\n\t\t<div id=\"reply-composer\" />\n\t</div>\n</template>\n\n<script>\nimport Actions from '@nextcloud/vue/dist/Components/Actions'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\nimport { generateUrl } from '@nextcloud/router'\nimport Popover from '@nextcloud/vue/dist/Components/Popover'\n\nimport { html, plain } from '../util/text'\nimport { isPgpgMessage } from '../crypto/pgp'\nimport Itinerary from './Itinerary'\nimport MessageAttachments from './MessageAttachments'\nimport MessageEncryptedBody from './MessageEncryptedBody'\nimport MessageHTMLBody from './MessageHTMLBody'\nimport MessagePlainTextBody from './MessagePlainTextBody'\n\nexport default {\n\tname: 'Message',\n\tcomponents: {\n\t\tActions,\n\t\tActionButton,\n\t\tItinerary,\n\t\tMessageAttachments,\n\t\tMessageEncryptedBody,\n\t\tMessageHTMLBody,\n\t\tMessagePlainTextBody,\n\t\tPopover,\n\t},\n\tprops: {\n\t\tenvelope: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t\tmessage: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t\tfullHeight: {\n\t\t\trequired: false,\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomputed: {\n\t\tfrom() {\n\t\t\treturn this.message.from.length === 0 ? '?' : this.message.from[0].label || this.message.from[0].email\n\t\t},\n\t\thtmlUrl() {\n\t\t\treturn generateUrl('/apps/mail/api/messages/{id}/html', {\n\t\t\t\tid: this.envelope.databaseId,\n\t\t\t})\n\t\t},\n\t\tisEncrypted() {\n\t\t\treturn isPgpgMessage(this.message.hasHtmlBody ? html(this.message.body) : plain(this.message.body))\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.v-popover > .trigger > .action-item {\n\tborder-radius: 22px;\n\tbackground-color: var(--color-background-darker);\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=style&index=0&id=106a4f26&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","<!--\n  - @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"envelope\">\n\t\t<div class=\"envelope--header\">\n\t\t\t<Avatar v-if=\"envelope.from && envelope.from[0]\"\n\t\t\t\t:email=\"envelope.from[0].email\"\n\t\t\t\t:display-name=\"envelope.from[0].label\"\n\t\t\t\t:disable-tooltip=\"true\"\n\t\t\t\t:size=\"40\" />\n\t\t\t<div\n\t\t\t\tv-if=\"envelope.flags.important\"\n\t\t\t\tclass=\"app-content-list-item-star icon-important\"\n\t\t\t\t:data-starred=\"envelope.flags.important ? 'true' : 'false'\"\n\t\t\t\t@click.prevent=\"onToggleImportant\"\n\t\t\t\tv-html=\"importantSvg\" />\n\t\t\t<div\n\t\t\t\tv-if=\"envelope.flags.flagged\"\n\t\t\t\tclass=\"app-content-list-item-star icon-starred\"\n\t\t\t\t:data-starred=\"envelope.flags.flagged ? 'true' : 'false'\"\n\t\t\t\t@click.prevent=\"onToggleFlagged\" />\n\t\t\t<router-link\n\t\t\t\t:to=\"route\"\n\t\t\t\tevent=\"\"\n\t\t\t\tclass=\"left\"\n\t\t\t\t:class=\"{seen: envelope.flags.seen}\"\n\t\t\t\t@click.native.prevent=\"$emit('toggleExpand', $event)\">\n\t\t\t\t<span class=\"sender\">{{ envelope.from && envelope.from[0] ? envelope.from[0].label : '' }}</span>\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span class=\"preview\">\n\t\t\t\t\t\t<!-- TODO: instead of subject it should be shown the first line of the message #2666 -->\n\t\t\t\t\t\t{{ envelope.subject }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</router-link>\n\t\t\t<div class=\"right\">\n\t\t\t\t<Moment class=\"timestamp\" :timestamp=\"envelope.dateInt\" />\n\t\t\t\t<router-link\n\t\t\t\t\t:to=\"hasMultipleRecipients ? replyAllLink : replyOneLink\"\n\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t'icon-reply-all-white': hasMultipleRecipients,\n\t\t\t\t\t\t'icon-reply-white': !hasMultipleRecipients,\n\t\t\t\t\t\tprimary: expanded,\n\t\t\t\t\t}\"\n\t\t\t\t\tclass=\"button\">\n\t\t\t\t\t<span class=\"action-label\"> {{ t('mail', 'Reply') }}</span>\n\t\t\t\t</router-link>\n\t\t\t\t<MenuEnvelope class=\"app-content-list-item-menu\"\n\t\t\t\t\t:envelope=\"envelope\"\n\t\t\t\t\t:with-reply=\"false\"\n\t\t\t\t\t:with-select=\"false\"\n\t\t\t\t\t:with-show-source=\"true\" />\n\t\t\t</div>\n\t\t</div>\n\t\t<Loading v-if=\"loading\" />\n\t\t<Message v-else-if=\"message\"\n\t\t\t:envelope=\"envelope\"\n\t\t\t:message=\"message\"\n\t\t\t:full-height=\"fullHeight\" />\n\t\t<Error v-else-if=\"error\"\n\t\t\t:error=\"error && error.message ? error.message : t('mail', 'Not found')\"\n\t\t\t:message=\"errorMessage\"\n\t\t\t:data=\"error\"\n\t\t\trole=\"alert\" />\n\t</div>\n</template>\n<script>\nimport Error from './Error'\nimport Loading from './Loading'\nimport logger from '../logger'\nimport Message from './Message'\nimport MenuEnvelope from './MenuEnvelope'\nimport Moment from './Moment'\nimport Avatar from './Avatar'\nimport importantSvg from '../../img/important.svg'\nimport { buildRecipients as buildReplyRecipients } from '../ReplyBuilder'\n\nexport default {\n\tname: 'ThreadEnvelope',\n\tcomponents: {\n\t\tError,\n\t\tLoading,\n\t\tMenuEnvelope,\n\t\tMoment,\n\t\tMessage,\n\t\tAvatar,\n\t},\n\tprops: {\n\t\tenvelope: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t\tmailboxId: {\n\t\t\trequired: false,\n\t\t\ttype: [\n\t\t\t\tString,\n\t\t\t\tNumber,\n\t\t\t],\n\t\t\tdefault: undefined,\n\t\t},\n\t\texpanded: {\n\t\t\trequired: false,\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tfullHeight: {\n\t\t\trequired: false,\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading: false,\n\t\t\terror: undefined,\n\t\t\tmessage: undefined,\n\t\t\timportantSvg,\n\t\t\tseenTimer: undefined,\n\t\t}\n\t},\n\tcomputed: {\n\t\taccount() {\n\t\t\treturn this.$store.getters.getAccount(this.envelope.accountId)\n\t\t},\n\t\thasMultipleRecipients() {\n\t\t\tif (!this.account) {\n\t\t\t\tconsole.error('account is undefined', {\n\t\t\t\t\taccountId: this.envelope.accountId,\n\t\t\t\t})\n\t\t\t}\n\t\t\tconst recipients = buildReplyRecipients(this.envelope, {\n\t\t\t\tlabel: this.account.name,\n\t\t\t\temail: this.account.emailAddress,\n\t\t\t})\n\t\t\treturn recipients.to.concat(recipients.cc).length > 1\n\t\t},\n\t\treplyOneLink() {\n\t\t\treturn {\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\tthreadId: 'reply',\n\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t},\n\t\t\t\tquery: {\n\t\t\t\t\tmessageId: this.envelope.databaseId,\n\t\t\t\t},\n\t\t\t}\n\t\t},\n\t\treplyAllLink() {\n\t\t\treturn {\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\tthreadId: 'replyAll',\n\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t},\n\t\t\t\tquery: {\n\t\t\t\t\tmessageId: this.envelope.databaseId,\n\t\t\t\t},\n\t\t\t}\n\t\t},\n\t\troute() {\n\t\t\treturn {\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: this.mailboxId || this.envelope.mailboxId,\n\t\t\t\t\tthreadId: this.envelope.databaseId,\n\t\t\t\t},\n\t\t\t}\n\t\t},\n\t},\n\twatch: {\n\t\texpanded(expanded) {\n\t\t\tif (expanded) {\n\t\t\t\tthis.fetchMessage()\n\t\t\t} else {\n\t\t\t\tthis.message = undefined\n\t\t\t}\n\t\t},\n\t},\n\tasync mounted() {\n\t\tif (this.expanded) {\n\t\t\tawait this.fetchMessage()\n\n\t\t\t// Only one envelope is expanded at the time of mounting so we can\n\t\t\t// assume that this is the relevant envelope to be scrolled to.\n\t\t\tthis.$nextTick(() => this.scrollToCurrentEnvelope())\n\t\t}\n\t},\n\tbeforeDestroy() {\n\t\tif (this.seenTimer !== undefined) {\n\t\t\tlogger.info('Navigating away before seenTimer delay, will not mark message as seen/read')\n\t\t\tclearTimeout(this.seenTimer)\n\t\t}\n\t},\n\tmethods: {\n\t\tasync fetchMessage() {\n\t\t\tthis.loading = true\n\n\t\t\tlogger.debug(`fetching thread message ${this.envelope.databaseId}`)\n\n\t\t\ttry {\n\t\t\t\tconst message = this.message = await this.$store.dispatch('fetchMessage', this.envelope.databaseId)\n\t\t\t\tlogger.debug(`message ${this.envelope.databaseId} fetched`, { message })\n\n\t\t\t\tif (!this.envelope.flags.seen) {\n\t\t\t\t\tlogger.info('Starting timer to mark message as seen/read')\n\t\t\t\t\tthis.seenTimer = setTimeout(() => {\n\t\t\t\t\t\tthis.$store.dispatch('toggleEnvelopeSeen', { envelope: this.envelope })\n\t\t\t\t\t\tthis.seenTimer = undefined\n\t\t\t\t\t}, 2000)\n\t\t\t\t}\n\n\t\t\t\tthis.loading = false\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('Could not fetch message', { error })\n\t\t\t}\n\t\t},\n\t\tscrollToCurrentEnvelope() {\n\t\t\t// Account for global navigation bar and thread header\n\t\t\tconst globalHeader = document.querySelector('#header').clientHeight\n\t\t\tconst threadHeader = document.querySelector('#mail-thread-header').clientHeight\n\t\t\tconst top = this.$el.getBoundingClientRect().top - globalHeader - threadHeader\n\t\t\twindow.scrollTo({ top })\n\t\t},\n\t\tonToggleImportant() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeImportant', this.envelope)\n\t\t},\n\t\tonToggleFlagged() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeFlagged', this.envelope)\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n\t.sender {\n\t\tmargin-left: 8px;\n\t}\n\n\t.right {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\talign-items: center;\n\t\tjustify-content: flex-end;\n\t\tmargin-left: 10px;\n\t\tmargin-right: 22px;\n\t\theight: 44px;\n\n\t\t.app-content-list-item-menu {\n\t\t\tmargin-left: 4px;\n\t\t}\n\n\t\t.timestamp {\n\t\t\tmargin-right: 10px;\n\t\t\tfont-size: small;\n\t\t\twhite-space: nowrap;\n\t\t\tmargin-bottom: 0;\n\t\t}\n\t}\n\t.button {\n\t\tcolor: var(--color-main-background);\n\t\t&:not(.active):not(.primary) {\n\t\t\tdisplay: none;\n\n\t\t\t&.primary {\n\t\t\t\tbackground-color: var(--color-primary);\n\t\t\t\topacity: 1;\n\t\t\t\tmargin-bottom: 0;\n\n\t\t\t}\n\t\t}\n\t}\n\t.avatardiv {\n\t\tdisplay: inline-block;\n\t\tmargin-bottom: -23px;\n\t}\n\t.subject {\n\t\tmargin-left: 8px;\n\t\tcursor: default;\n\t}\n\n\t.envelope {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\n\t.envelope--header {\n\t\tdisplay: flex;\n\t\tpadding: 10px;\n\t\tmargin-bottom: 3px;\n\t\tborder-radius: var(--border-radius);\n\n\t\t&:hover {\n\t\t\tbackground-color: var(--color-background-hover);\n\t\t}\n\t}\n\t.left {\n\t\tflex-grow: 1;\n\t}\n\t.icon-important {\n\t\t::v-deep path {\n\t\t\tfill: #ffcc00;\n\t\t\tstroke: var(--color-main-background);\n\t\t\tcursor: pointer;\n\t\t}\n\n\t\t&.app-content-list-item-star {\n\t\t\tbackground-image: none;\n\t\t\tposition: absolute;\n\t\t\topacity: 1;\n\t\t\twidth: 16px;\n\t\t\theight: 16px;\n\t\t\tmargin-left: -1px;\n\t\t\tdisplay: flex;\n\n\t\t\t&:hover,\n\t\t\t&:focus {\n\t\t\t\topacity: 0.5;\n\t\t\t}\n\t\t}\n\t}\n\t.app-content-list-item-star.icon-starred {\n\t\tdisplay: inline-block;\n\t\tposition: absolute;\n\t\tmargin-top: -2px;\n\t\tmargin-left: 27px;\n\t\tcursor: pointer;\n\t}\n\t.left:not(.seen) {\n\t\tfont-weight: bold;\n\t}\n\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ThreadEnvelope.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ThreadEnvelope.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Message.vue?vue&type=template&id=106a4f26&scoped=true&\"\nimport script from \"./Message.vue?vue&type=script&lang=js&\"\nexport * from \"./Message.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Message.vue?vue&type=style&index=0&id=106a4f26&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"106a4f26\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:[_vm.message.hasHtmlBody ? 'mail-message-body mail-message-body-html' : 'mail-message-body'],attrs:{\"role\":\"region\",\"aria-label\":_vm.t('mail','Message body')}},[(_vm.message.itineraries.length > 0)?_c('div',{staticClass:\"message-itinerary\"},[_c('Itinerary',{attrs:{\"entries\":_vm.message.itineraries,\"message-id\":_vm.message.messageId}})],1):_vm._e(),_vm._v(\" \"),(_vm.message.hasHtmlBody)?_c('MessageHTMLBody',{attrs:{\"url\":_vm.htmlUrl,\"message\":_vm.message,\"full-height\":_vm.fullHeight}}):(_vm.isEncrypted)?_c('MessageEncryptedBody',{attrs:{\"body\":_vm.message.body,\"from\":_vm.from,\"message\":_vm.message}}):_c('MessagePlainTextBody',{attrs:{\"body\":_vm.message.body,\"signature\":_vm.message.signature,\"message\":_vm.message}}),_vm._v(\" \"),(_vm.message.attachments[0])?_c('Popover',{staticClass:\"attachment-popover\"},[_c('Actions',{attrs:{\"slot\":\"trigger\"},slot:\"trigger\"},[_c('ActionButton',{attrs:{\"icon\":\"icon-public icon-attachment\"}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Attachments'))+\"\\n\\t\\t\\t\")])],1),_vm._v(\" \"),_c('MessageAttachments',{directives:[{name:\"close-popover\",rawName:\"v-close-popover\",value:(true),expression:\"true\"}],attrs:{\"attachments\":_vm.message.attachments,\"envelope\":_vm.envelope}})],1):_vm._e(),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"reply-composer\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ThreadEnvelope.vue?vue&type=style&index=0&id=e711eb92&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./ThreadEnvelope.vue?vue&type=template&id=e711eb92&scoped=true&\"\nimport script from \"./ThreadEnvelope.vue?vue&type=script&lang=js&\"\nexport * from \"./ThreadEnvelope.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ThreadEnvelope.vue?vue&type=style&index=0&id=e711eb92&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e711eb92\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"envelope\"},[_c('div',{staticClass:\"envelope--header\"},[(_vm.envelope.from && _vm.envelope.from[0])?_c('Avatar',{attrs:{\"email\":_vm.envelope.from[0].email,\"display-name\":_vm.envelope.from[0].label,\"disable-tooltip\":true,\"size\":40}}):_vm._e(),_vm._v(\" \"),(_vm.envelope.flags.important)?_c('div',{staticClass:\"app-content-list-item-star icon-important\",attrs:{\"data-starred\":_vm.envelope.flags.important ? 'true' : 'false'},domProps:{\"innerHTML\":_vm._s(_vm.importantSvg)},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleImportant($event)}}}):_vm._e(),_vm._v(\" \"),(_vm.envelope.flags.flagged)?_c('div',{staticClass:\"app-content-list-item-star icon-starred\",attrs:{\"data-starred\":_vm.envelope.flags.flagged ? 'true' : 'false'},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleFlagged($event)}}}):_vm._e(),_vm._v(\" \"),_c('router-link',{staticClass:\"left\",class:{seen: _vm.envelope.flags.seen},attrs:{\"to\":_vm.route,\"event\":\"\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.$emit('toggleExpand', $event)}}},[_c('span',{staticClass:\"sender\"},[_vm._v(_vm._s(_vm.envelope.from && _vm.envelope.from[0] ? _vm.envelope.from[0].label : ''))]),_vm._v(\" \"),_c('div',{staticClass:\"subject\"},[_c('span',{staticClass:\"preview\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.envelope.subject)+\"\\n\\t\\t\\t\\t\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"right\"},[_c('Moment',{staticClass:\"timestamp\",attrs:{\"timestamp\":_vm.envelope.dateInt}}),_vm._v(\" \"),_c('router-link',{staticClass:\"button\",class:{\n\t\t\t\t\t'icon-reply-all-white': _vm.hasMultipleRecipients,\n\t\t\t\t\t'icon-reply-white': !_vm.hasMultipleRecipients,\n\t\t\t\t\tprimary: _vm.expanded,\n\t\t\t\t},attrs:{\"to\":_vm.hasMultipleRecipients ? _vm.replyAllLink : _vm.replyOneLink}},[_c('span',{staticClass:\"action-label\"},[_vm._v(\" \"+_vm._s(_vm.t('mail', 'Reply')))])]),_vm._v(\" \"),_c('MenuEnvelope',{staticClass:\"app-content-list-item-menu\",attrs:{\"envelope\":_vm.envelope,\"with-reply\":false,\"with-select\":false,\"with-show-source\":true}})],1)],1),_vm._v(\" \"),(_vm.loading)?_c('Loading'):(_vm.message)?_c('Message',{attrs:{\"envelope\":_vm.envelope,\"message\":_vm.message,\"full-height\":_vm.fullHeight}}):(_vm.error)?_c('Error',{attrs:{\"error\":_vm.error && _vm.error.message ? _vm.error.message : _vm.t('mail', 'Not found'),\"message\":_vm.errorMessage,\"data\":_vm.error,\"role\":\"alert\"}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<AppContentDetails id=\"mail-message\">\n\t\t<Loading v-if=\"loading\" />\n\t\t<template v-else>\n\t\t\t<div id=\"mail-thread-header\">\n\t\t\t\t<div id=\"mail-thread-header-fields\">\n\t\t\t\t\t<h2 :title=\"threadSubject\">\n\t\t\t\t\t\t{{ threadSubject }}\n\t\t\t\t\t</h2>\n\t\t\t\t\t<div ref=\"avatarHeader\" class=\"avatar-header\">\n\t\t\t\t\t\t<!-- Participants that can fit in the parent div -->\n\t\t\t\t\t\t<RecipientBubble v-for=\"participant in threadParticipants.slice(0,participantsToDisplay)\"\n\t\t\t\t\t\t\t:key=\"participant.email\"\n\t\t\t\t\t\t\t:email=\"participant.email\"\n\t\t\t\t\t\t\t:label=\"participant.label\" />\n\t\t\t\t\t\t<!-- Indicator to show that there are more participants than displayed -->\n\t\t\t\t\t\t<Popover v-if=\"threadParticipants.length > participantsToDisplay\"\n\t\t\t\t\t\t\tclass=\"avatar-more\">\n\t\t\t\t\t\t\t<span slot=\"trigger\" class=\"avatar-more\">\n\t\t\t\t\t\t\t\t{{ moreParticipantsString }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<RecipientBubble v-for=\"participant in threadParticipants.slice(participantsToDisplay)\"\n\t\t\t\t\t\t\t\t:key=\"participant.email\"\n\t\t\t\t\t\t\t\t:email=\"participant.email\"\n\t\t\t\t\t\t\t\t:label=\"participant.label\" />\n\t\t\t\t\t\t</Popover>\n\t\t\t\t\t\t<!-- Remaining participants, if any (Needed to have avatarHeader reactive) -->\n\t\t\t\t\t\t<RecipientBubble v-for=\"participant in threadParticipants.slice(participantsToDisplay)\"\n\t\t\t\t\t\t\t:key=\"participant.email\"\n\t\t\t\t\t\t\tclass=\"avatar-hidden\"\n\t\t\t\t\t\t\t:email=\"participant.email\"\n\t\t\t\t\t\t\t:label=\"participant.label\" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<ThreadEnvelope v-for=\"env in thread\"\n\t\t\t\t:key=\"env.databaseId\"\n\t\t\t\t:envelope=\"env\"\n\t\t\t\t:mailbox-id=\"$route.params.mailboxId\"\n\t\t\t\t:expanded=\"expandedThreads.includes(env.databaseId)\"\n\t\t\t\t:full-height=\"thread.length === 1\"\n\t\t\t\t@move=\"onMove(env.databaseId)\"\n\t\t\t\t@toggleExpand=\"toggleExpand(env.databaseId)\" />\n\t\t</template>\n\t</AppContentDetails>\n</template>\n\n<script>\nimport AppContentDetails from '@nextcloud/vue/dist/Components/AppContentDetails'\nimport Popover from '@nextcloud/vue/dist/Components/Popover'\n\nimport { prop, uniqBy } from 'ramda'\nimport debounce from 'lodash/fp/debounce'\n\nimport { getRandomMessageErrorMessage } from '../util/ErrorMessageFactory'\nimport Loading from './Loading'\nimport logger from '../logger'\nimport RecipientBubble from './RecipientBubble'\nimport ThreadEnvelope from './ThreadEnvelope'\n\nexport default {\n\tname: 'Thread',\n\tcomponents: {\n\t\tRecipientBubble,\n\t\tAppContentDetails,\n\t\tLoading,\n\t\tThreadEnvelope,\n\t\tPopover,\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tloading: true,\n\t\t\tmessage: undefined,\n\t\t\terrorMessage: '',\n\t\t\terror: undefined,\n\t\t\texpandedThreads: [],\n\t\t\tparticipantsToDisplay: 999,\n\t\t\tresizeDebounced: debounce(500, this.updateParticipantsToDisplay),\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tmoreParticipantsString() {\n\t\t\t// Returns a number showing the number of thread participants that are not shown in the avatar-header\n\t\t\treturn `+${this.threadParticipants.length - this.participantsToDisplay}`\n\t\t},\n\t\tthreadId() {\n\t\t\treturn parseInt(this.$route.params.threadId, 10)\n\t\t},\n\t\tthread() {\n\t\t\treturn this.$store.getters.getEnvelopeThread(this.threadId)\n\t\t},\n\t\tthreadParticipants() {\n\t\t\tconst recipients = this.thread.flatMap(envelope => {\n\t\t\t\treturn envelope.from.concat(envelope.to).concat(envelope.cc)\n\t\t\t})\n\t\t\treturn uniqBy(prop('email'), recipients)\n\t\t},\n\t\tthreadSubject() {\n\t\t\tconst thread = this.thread\n\t\t\tif (thread.length === 0) {\n\t\t\t\tconsole.warn('thread is empty')\n\t\t\t\treturn ''\n\t\t\t}\n\t\t\treturn thread[0].subject\n\t\t},\n\t},\n\twatch: {\n\t\t$route(to, from) {\n\t\t\tif (\n\t\t\t\tfrom.name === to.name\n\t\t\t\t&& from.params.mailboxId === to.params.mailboxId\n\t\t\t\t&& from.params.threadId === to.params.threadId\n\t\t\t\t&& from.params.filter === to.params.filter\n\t\t\t) {\n\t\t\t\tlogger.debug('navigated but the thread is still the same')\n\t\t\t\treturn\n\t\t\t}\n\t\t\tlogger.debug('navigated to another thread', { to, from })\n\t\t\tthis.resetThread()\n\t\t},\n\t},\n\tcreated() {\n\t\tthis.resetThread()\n\t\twindow.addEventListener('resize', this.resizeDebounced)\n\t},\n\tbeforeDestroy() {\n\t\twindow.removeEventListener('resize', this.resizeDebounced)\n\t},\n\tmethods: {\n\t\tupdateParticipantsToDisplay() {\n\t\t\t// Wait until everything is in place\n\t\t\tif (!this.$refs.avatarHeader || !this.threadParticipants) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// Compute the number of participants to display depending on the width available\n\t\t\tconst avatarHeader = this.$refs.avatarHeader\n\t\t\tconst maxWidth = (avatarHeader.clientWidth - 100) // Reserve 100px for the avatar-more span\n\t\t\tlet childrenWidth = 0\n\t\t\tlet fits = 0\n\t\t\tlet idx = 0\n\t\t\twhile (childrenWidth < maxWidth && fits < this.threadParticipants.length) {\n\t\t\t\t// Skipping the 'avatar-more' span\n\t\t\t\tif (avatarHeader.childNodes[idx].clientWidth === undefined) {\n\t\t\t\t\tidx += 3\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\t\t\t\tchildrenWidth += avatarHeader.childNodes[idx].clientWidth\n\t\t\t\tfits++\n\t\t\t\tidx++\n\t\t\t}\n\n\t\t\tif (childrenWidth > maxWidth) {\n\t\t\t\t// There's not enough space to show all thread participants\n\t\t\t\tif (fits > 1) {\n\t\t\t\t\tthis.participantsToDisplay = fits - 1\n\t\t\t\t} else if (fits === 0) {\n\t\t\t\t\tthis.participantsToDisplay = 1\n\t\t\t\t} else {\n\t\t\t\t\tthis.participantsToDisplay = fits\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// There's enough space to show all thread participants\n\t\t\t\tthis.participantsToDisplay = this.threadParticipants.length\n\t\t\t}\n\t\t},\n\t\ttoggleExpand(threadId) {\n\t\t\tif (!this.expandedThreads.includes(threadId)) {\n\t\t\t\tconsole.debug(`expand thread ${threadId}`)\n\t\t\t\tthis.expandedThreads.push(threadId)\n\t\t\t} else {\n\t\t\t\tconsole.debug(`collapse thread ${threadId}`)\n\t\t\t\tthis.expandedThreads = this.expandedThreads.filter(t => t !== threadId)\n\t\t\t}\n\t\t},\n\t\tonMove(threadId) {\n\t\t\tif (threadId === this.threadId) {\n\t\t\t\tthis.$router.replace({\n\t\t\t\t\tname: 'mailbox',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tthis.expandedThreads = this.expandedThreads.filter((id) => id !== threadId)\n\t\t\t\tthis.fetchThread()\n\t\t\t}\n\t\t},\n\t\tasync resetThread() {\n\t\t\tthis.expandedThreads = [this.threadId]\n\t\t\tawait this.fetchThread()\n\t\t\tthis.updateParticipantsToDisplay()\n\t\t},\n\t\tasync fetchThread() {\n\t\t\tthis.loading = true\n\t\t\tthis.errorMessage = ''\n\t\t\tthis.error = undefined\n\t\t\tconst threadId = this.threadId\n\n\t\t\ttry {\n\t\t\t\tconst thread = await this.$store.dispatch('fetchThread', threadId)\n\t\t\t\tlogger.debug(`thread for envelope ${threadId} fetched`, { thread })\n\t\t\t\t// TODO: add timeout so that envelope isn't flagged when only viewed\n\t\t\t\t//       for a few seconds\n\t\t\t\tif (threadId !== parseInt(this.$route.params.threadId, 10)) {\n\t\t\t\t\tlogger.debug(\"User navigated away, loaded envelope won't be shown nor flagged as seen\", {\n\t\t\t\t\t\toldId: threadId,\n\t\t\t\t\t\tnewId: this.$route.params.threadId,\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tif (thread.length === 0) {\n\t\t\t\t\tlogger.info('thread could not be found and is empty', { threadId })\n\t\t\t\t\tthis.errorMessage = getRandomMessageErrorMessage()\n\t\t\t\t\tthis.loading = false\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tthis.loading = false\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not load envelope thread', { threadId, error })\n\t\t\t\tif (error.isError) {\n\t\t\t\t\tthis.errorMessage = t('mail', 'Could not load your message thread')\n\t\t\t\t\tthis.error = error\n\t\t\t\t\tthis.loading = false\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\">\n#mail-message {\n\tflex-grow: 1;\n}\n\n.mail-message-body {\n\tflex: 1;\n\tmargin-bottom: 60px;\n\tposition: relative;\n}\n\n#mail-thread-header {\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: 30px 0;\n\t// somehow ios doesn't care about this !important rule\n\t// so we have to manually set left/right padding to chidren\n\t// for 100% to be used\n\tbox-sizing: content-box !important;\n\theight: 44px;\n\twidth: 100%;\n\n\tz-index: 100;\n\tposition: fixed; // ie fallback\n\tposition: -webkit-sticky; // ios/safari fallback\n\tposition: sticky;\n\ttop: var(--header-height);\n\tbackground: -webkit-linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255,255,255,0));\n\tbackground: -o-linear-gradient(var(--color-main-background), var(--color-main-background)  80%, rgba(255,255,255,0));\n\tbackground: -moz-linear-gradient(var(--color-main-background), var(--color-main-background)  80%, rgba(255,255,255,0));\n\tbackground: linear-gradient(var(--color-main-background), var(--color-main-background)  80%, rgba(255,255,255,0));\n}\n\n#mail-thread-header-fields {\n\t// initial width\n\twidth: 0;\n\tpadding-left: 60px;\n\t// grow and try to fill 100%\n\tflex: 1 1 auto;\n\th2,\n\tp {\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\tpadding-bottom: 7px;\n\t\tmargin-bottom: 0;\n\t}\n\n\t.transparency {\n\t\topacity: 0.6;\n\t\ta {\n\t\t\tfont-weight: bold;\n\t\t}\n\t}\n}\n\n.attachment-popover {\n\tposition: sticky;\n\tbottom: 12px;\n\ttext-align: center;\n}\n\n.tooltip-inner {\n\ttext-align: left;\n}\n\n#mail-content, .mail-signature {\n\tmargin: 10px 38px 50px 60px;\n\n\t.mail-message-body-html & {\n\t\tmargin-bottom: -44px; // accounting for the sticky attachment button\n\t}\n}\n\n#mail-content iframe {\n\twidth: 100%;\n}\n\n#show-images-text {\n\tdisplay: none;\n}\n\n#mail-content a,\n.mail-signature a {\n\tcolor: #07d;\n\tborder-bottom: 1px dotted #07d;\n\ttext-decoration: none;\n\tword-wrap: break-word;\n}\n\n.icon-reply-white,\n.icon-reply-all-white {\n\theight: 44px;\n\tmin-width: 44px;\n\tmargin: 0;\n\tpadding: 9px 18px 10px 32px;\n}\n\n/* Show action button label and move icon to the left\n   on screens larger than 600px */\n@media only screen and (max-width: 600px) {\n\t.action-label {\n\t\tdisplay: none;\n\t}\n}\n@media only screen and (min-width: 600px) {\n\t.icon-reply-white,\n\t.icon-reply-all-white {\n\t\tbackground-position: 12px center;\n\t}\n}\n\n@media print {\n\t#mail-thread-header-fields {\n\t\tposition: relative;\n\t}\n\n\t#header,\n\t.app-navigation,\n\t#reply-composer,\n\t#forward-button,\n\t#mail-message-has-blocked-content,\n\t.app-content-list,\n\t.message-composer,\n\t.mail-message-attachments {\n\t\tdisplay: none !important;\n\t}\n\t.app-content {\n\t\tmargin-left: 0 !important;\n\t}\n\t.mail-message-body {\n\t\tmargin-bottom: 0 !important;\n\t}\n}\n\n.message-source {\n\tfont-family: monospace;\n\twhite-space: pre-wrap;\n\tuser-select: text;\n}\n\n.avatar-header {\n\tmax-height: 24px;\n\toverflow: hidden;\n}\n.avatar-more {\n\tdisplay: inline;\n\tbackground-color: var(--color-background-dark);\n\tpadding: 0px 0px 1px 1px;\n\tborder-radius: 10px;\n\tcursor: pointer;\n}\n.avatar-hidden {\n\tvisibility: hidden;\n}\n.popover__wrapper {\n\tmax-width: 500px;\n}\n\n.app-content-list-item-star.icon-starred {\n\tdisplay: none;\n}\n.user-bubble__wrapper {\n\tmargin-right: 4px;\n}\n.user-bubble__title {\n\tcursor: pointer;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Thread.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Thread.vue?vue&type=script&lang=js&\"","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Thread.vue?vue&type=style&index=0&lang=scss&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./Thread.vue?vue&type=template&id=3e248eb2&\"\nimport script from \"./Thread.vue?vue&type=script&lang=js&\"\nexport * from \"./Thread.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Thread.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('AppContentDetails',{attrs:{\"id\":\"mail-message\"}},[(_vm.loading)?_c('Loading'):[_c('div',{attrs:{\"id\":\"mail-thread-header\"}},[_c('div',{attrs:{\"id\":\"mail-thread-header-fields\"}},[_c('h2',{attrs:{\"title\":_vm.threadSubject}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.threadSubject)+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{ref:\"avatarHeader\",staticClass:\"avatar-header\"},[_vm._l((_vm.threadParticipants.slice(0,_vm.participantsToDisplay)),function(participant){return _c('RecipientBubble',{key:participant.email,attrs:{\"email\":participant.email,\"label\":participant.label}})}),_vm._v(\" \"),(_vm.threadParticipants.length > _vm.participantsToDisplay)?_c('Popover',{staticClass:\"avatar-more\"},[_c('span',{staticClass:\"avatar-more\",attrs:{\"slot\":\"trigger\"},slot:\"trigger\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.moreParticipantsString)+\"\\n\\t\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_vm._l((_vm.threadParticipants.slice(_vm.participantsToDisplay)),function(participant){return _c('RecipientBubble',{key:participant.email,attrs:{\"email\":participant.email,\"label\":participant.label}})})],2):_vm._e(),_vm._v(\" \"),_vm._l((_vm.threadParticipants.slice(_vm.participantsToDisplay)),function(participant){return _c('RecipientBubble',{key:participant.email,staticClass:\"avatar-hidden\",attrs:{\"email\":participant.email,\"label\":participant.label}})})],2)])]),_vm._v(\" \"),_vm._l((_vm.thread),function(env){return _c('ThreadEnvelope',{key:env.databaseId,attrs:{\"envelope\":env,\"mailbox-id\":_vm.$route.params.mailboxId,\"expanded\":_vm.expandedThreads.includes(env.databaseId),\"full-height\":_vm.thread.length === 1},on:{\"move\":function($event){return _vm.onMove(env.databaseId)},\"toggleExpand\":function($event){return _vm.toggleExpand(env.databaseId)}}})})]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MailboxThread.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MailboxThread.vue?vue&type=script&lang=js&\"","<template>\n\t<AppContent>\n\t\t<div id=\"app-content-wrapper\">\n\t\t\t<AppContentList\n\t\t\t\tv-infinite-scroll=\"onScroll\"\n\t\t\t\tv-shortkey.once=\"shortkeys\"\n\t\t\t\tinfinite-scroll-immediate-check=\"false\"\n\t\t\t\t:show-details=\"showThread\"\n\t\t\t\t:infinite-scroll-disabled=\"false\"\n\t\t\t\t:infinite-scroll-distance=\"10\"\n\t\t\t\trole=\"heading\"\n\t\t\t\t:aria-level=\"2\"\n\t\t\t\t@shortkey.native=\"onShortcut\">\n\t\t\t\t<Mailbox\n\t\t\t\t\tv-if=\"!mailbox.isPriorityInbox\"\n\t\t\t\t\t:account=\"account\"\n\t\t\t\t\t:mailbox=\"mailbox\"\n\t\t\t\t\t:search-query=\"query\"\n\t\t\t\t\t:bus=\"bus\" />\n\t\t\t\t<template v-else>\n\t\t\t\t\t<div class=\"app-content-list-item\">\n\t\t\t\t\t\t<SectionTitle class=\"important\" :name=\"t('mail', 'Important and unread')\" />\n\t\t\t\t\t\t<Popover trigger=\"hover focus\">\n\t\t\t\t\t\t\t<button slot=\"trigger\" :aria-label=\"t('mail', 'Important info')\" class=\"button icon-info\" />\n\t\t\t\t\t\t\t<p class=\"important-info\">\n\t\t\t\t\t\t\t\t{{ importantInfo }}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</Popover>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Mailbox\n\t\t\t\t\t\tclass=\"nameimportant\"\n\t\t\t\t\t\t:account=\"unifiedAccount\"\n\t\t\t\t\t\t:mailbox=\"unifiedInbox\"\n\t\t\t\t\t\t:search-query=\"appendToSearch('is:pi-important')\"\n\t\t\t\t\t\t:paginate=\"'manual'\"\n\t\t\t\t\t\t:is-priority-inbox=\"true\"\n\t\t\t\t\t\t:initial-page-size=\"5\"\n\t\t\t\t\t\t:collapsible=\"true\"\n\t\t\t\t\t\t:bus=\"bus\" />\n\t\t\t\t\t<SectionTitle class=\"app-content-list-item starred\" :name=\"t('mail', 'Favorites')\" />\n\t\t\t\t\t<Mailbox\n\t\t\t\t\t\tclass=\"namestarred\"\n\t\t\t\t\t\t:account=\"unifiedAccount\"\n\t\t\t\t\t\t:mailbox=\"unifiedInbox\"\n\t\t\t\t\t\t:search-query=\"appendToSearch('is:pi-starred')\"\n\t\t\t\t\t\t:paginate=\"'manual'\"\n\t\t\t\t\t\t:is-priority-inbox=\"true\"\n\t\t\t\t\t\t:initial-page-size=\"5\"\n\t\t\t\t\t\t:bus=\"bus\" />\n\t\t\t\t\t<SectionTitle class=\"app-content-list-item other\" :name=\"t('mail', 'Other')\" />\n\t\t\t\t\t<Mailbox\n\t\t\t\t\t\tclass=\"nameother\"\n\t\t\t\t\t\t:account=\"unifiedAccount\"\n\t\t\t\t\t\t:mailbox=\"unifiedInbox\"\n\t\t\t\t\t\t:open-first=\"false\"\n\t\t\t\t\t\t:search-query=\"appendToSearch('is:pi-other')\"\n\t\t\t\t\t\t:is-priority-inbox=\"true\"\n\t\t\t\t\t\t:bus=\"bus\" />\n\t\t\t\t</template>\n\t\t\t</AppContentList>\n\t\t\t<NewMessageDetail v-if=\"newMessage\" />\n\t\t\t<Thread v-else-if=\"showThread\" @delete=\"deleteMessage\" />\n\t\t\t<NoMessageSelected v-else-if=\"hasEnvelopes && !isMobile\" />\n\t\t</div>\n\t</AppContent>\n</template>\n\n<script>\nimport AppContent from '@nextcloud/vue/dist/Components/AppContent'\nimport AppContentList from '@nextcloud/vue/dist/Components/AppContentList'\nimport Popover from '@nextcloud/vue/dist/Components/Popover'\nimport infiniteScroll from 'vue-infinite-scroll'\nimport isMobile from '@nextcloud/vue/dist/Mixins/isMobile'\nimport SectionTitle from './SectionTitle'\nimport Vue from 'vue'\n\nimport logger from '../logger'\nimport Mailbox from './Mailbox'\nimport NewMessageDetail from './NewMessageDetail'\nimport NoMessageSelected from './NoMessageSelected'\nimport Thread from './Thread'\nimport { UNIFIED_ACCOUNT_ID, UNIFIED_INBOX_ID } from '../store/constants'\n\nexport default {\n\tname: 'MailboxThread',\n\tdirectives: {\n\t\tinfiniteScroll,\n\t},\n\tcomponents: {\n\t\tAppContent,\n\t\tAppContentList,\n\t\tMailbox,\n\t\tNewMessageDetail,\n\t\tNoMessageSelected,\n\t\tPopover,\n\t\tSectionTitle,\n\t\tThread,\n\t},\n\tmixins: [isMobile],\n\tprops: {\n\t\taccount: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tmailbox: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\t// eslint-disable-next-line\n\t\t\timportantInfo: t('mail', 'Messages will automatically be marked as important based on which messages you interacted with or marked as important. In the beginning you might have to manually change the importance to teach the system, but it will improve over time.'),\n\t\t\tbus: new Vue(),\n\t\t\tsearchQuery: undefined,\n\t\t\tshortkeys: {\n\t\t\t\tdel: ['del'],\n\t\t\t\tflag: ['s'],\n\t\t\t\tnext: ['arrowright'],\n\t\t\t\tprev: ['arrowleft'],\n\t\t\t\trefresh: ['r'],\n\t\t\t\tunseen: ['u'],\n\t\t\t},\n\t\t}\n\t},\n\tcomputed: {\n\t\tunifiedAccount() {\n\t\t\treturn this.$store.getters.getAccount(UNIFIED_ACCOUNT_ID)\n\t\t},\n\t\tunifiedInbox() {\n\t\t\treturn this.$store.getters.getMailbox(UNIFIED_INBOX_ID)\n\t\t},\n\t\thasEnvelopes() {\n\t\t\treturn this.$store.getters.getEnvelopes(this.mailbox.databaseId, this.searchQuery).length > 0\n\t\t},\n\t\tshowThread() {\n\t\t\treturn (this.mailbox.isPriorityInbox === true || this.hasEnvelopes) && this.$route.name === 'message'\n\t\t},\n\t\tquery() {\n\t\t\tif (this.$route.params.filter === 'starred') {\n\t\t\t\tif (this.searchQuery) {\n\t\t\t\t\treturn this.searchQuery + ' is:starred'\n\t\t\t\t}\n\t\t\t\treturn 'is:starred'\n\t\t\t}\n\t\t\treturn this.searchQuery\n\t\t},\n\t\tnewMessage() {\n\t\t\treturn (\n\t\t\t\tthis.$route.params.threadId === 'new'\n\t\t\t\t|| this.$route.params.threadId === 'reply'\n\t\t\t\t|| this.$route.params.threadId === 'replyAll'\n\t\t\t\t|| this.$route.params.threadId === 'asNew'\n\t\t\t)\n\t\t},\n\t},\n\tmethods: {\n\t\tdeleteMessage(id) {\n\t\t\tthis.bus.$emit('delete', id)\n\t\t},\n\t\tonScroll(event) {\n\t\t\tlogger.debug('scroll', { event })\n\n\t\t\tthis.bus.$emit('loadMore')\n\t\t},\n\t\tonShortcut(e) {\n\t\t\tthis.bus.$emit('shortcut', e)\n\t\t},\n\t\tappendToSearch(str) {\n\t\t\tif (this.searchQuery === undefined) {\n\t\t\t\treturn str\n\t\t\t}\n\t\t\treturn this.searchQuery + ' ' + str\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.v-popover > .trigger > {\n\tz-index: 1;\n}\n\n.icon-info {\n\tbackground-image: var(--icon-info-000);\n}\n\n.important-info {\n\tmax-width: 230px;\n\tpadding: 16px;\n}\n\n.app-content-list-item:hover {\n\tbackground: transparent;\n}\n\n.button {\n\tbackground-color: var(--color-main-background);\n\twidth: 44px;\n\theight: 44px;\n\tborder: 0;\n\tmargin-bottom: 17px;\n\n\t&:hover,\n\t&:focus {\n\t\tbackground-color: var(--color-background-dark);\n\t}\n}\n\n#app-content-wrapper {\n\tdisplay: flex;\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MailboxThread.vue?vue&type=style&index=0&id=04cb845c&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./MailboxThread.vue?vue&type=template&id=04cb845c&scoped=true&\"\nimport script from \"./MailboxThread.vue?vue&type=script&lang=js&\"\nexport * from \"./MailboxThread.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MailboxThread.vue?vue&type=style&index=0&id=04cb845c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"04cb845c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('AppContent',[_c('div',{attrs:{\"id\":\"app-content-wrapper\"}},[_c('AppContentList',{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:(_vm.onScroll),expression:\"onScroll\"},{name:\"shortkey\",rawName:\"v-shortkey.once\",value:(_vm.shortkeys),expression:\"shortkeys\",modifiers:{\"once\":true}}],attrs:{\"infinite-scroll-immediate-check\":\"false\",\"show-details\":_vm.showThread,\"infinite-scroll-disabled\":false,\"infinite-scroll-distance\":10,\"role\":\"heading\",\"aria-level\":2},nativeOn:{\"shortkey\":function($event){return _vm.onShortcut($event)}}},[(!_vm.mailbox.isPriorityInbox)?_c('Mailbox',{attrs:{\"account\":_vm.account,\"mailbox\":_vm.mailbox,\"search-query\":_vm.query,\"bus\":_vm.bus}}):[_c('div',{staticClass:\"app-content-list-item\"},[_c('SectionTitle',{staticClass:\"important\",attrs:{\"name\":_vm.t('mail', 'Important and unread')}}),_vm._v(\" \"),_c('Popover',{attrs:{\"trigger\":\"hover focus\"}},[_c('button',{staticClass:\"button icon-info\",attrs:{\"slot\":\"trigger\",\"aria-label\":_vm.t('mail', 'Important info')},slot:\"trigger\"}),_vm._v(\" \"),_c('p',{staticClass:\"important-info\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.importantInfo)+\"\\n\\t\\t\\t\\t\\t\\t\")])])],1),_vm._v(\" \"),_c('Mailbox',{staticClass:\"nameimportant\",attrs:{\"account\":_vm.unifiedAccount,\"mailbox\":_vm.unifiedInbox,\"search-query\":_vm.appendToSearch('is:pi-important'),\"paginate\":'manual',\"is-priority-inbox\":true,\"initial-page-size\":5,\"collapsible\":true,\"bus\":_vm.bus}}),_vm._v(\" \"),_c('SectionTitle',{staticClass:\"app-content-list-item starred\",attrs:{\"name\":_vm.t('mail', 'Favorites')}}),_vm._v(\" \"),_c('Mailbox',{staticClass:\"namestarred\",attrs:{\"account\":_vm.unifiedAccount,\"mailbox\":_vm.unifiedInbox,\"search-query\":_vm.appendToSearch('is:pi-starred'),\"paginate\":'manual',\"is-priority-inbox\":true,\"initial-page-size\":5,\"bus\":_vm.bus}}),_vm._v(\" \"),_c('SectionTitle',{staticClass:\"app-content-list-item other\",attrs:{\"name\":_vm.t('mail', 'Other')}}),_vm._v(\" \"),_c('Mailbox',{staticClass:\"nameother\",attrs:{\"account\":_vm.unifiedAccount,\"mailbox\":_vm.unifiedInbox,\"open-first\":false,\"search-query\":_vm.appendToSearch('is:pi-other'),\"is-priority-inbox\":true,\"bus\":_vm.bus}})]],2),_vm._v(\" \"),(_vm.newMessage)?_c('NewMessageDetail'):(_vm.showThread)?_c('Thread',{on:{\"delete\":_vm.deleteMessage}}):(_vm.hasEnvelopes && !_vm.isMobile)?_c('NoMessageSelected'):_vm._e()],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","<template>\n\t<Content v-shortkey.once=\"['c']\" app-name=\"mail\" @shortkey.native=\"onNewMessage\">\n\t\t<AppDetailsToggle v-if=\"isMobile && isThreadShown\"\n\t\t\t@close=\"hideMessage\" />\n\t\t<Navigation />\n\t\t<MailboxThread v-if=\"activeAccount\" :account=\"activeAccount\" :mailbox=\"activeMailbox\" />\n\t</Content>\n</template>\n\n<script>\nimport Content from '@nextcloud/vue/dist/Components/Content'\nimport AppDetailsToggle from '../components/AppDetailsToggle'\n\nimport isMobile from '@nextcloud/vue/dist/Mixins/isMobile'\nimport logger from '../logger'\nimport MailboxThread from '../components/MailboxThread'\nimport Navigation from '../components/Navigation'\n\nexport default {\n\tname: 'Home',\n\tcomponents: {\n\t\tContent,\n\t\tMailboxThread,\n\t\tNavigation,\n\t\tAppDetailsToggle,\n\t},\n\tmixins: [isMobile],\n\tcomputed: {\n\t\tactiveAccount() {\n\t\t\treturn this.$store.getters.getAccount(this.activeMailbox?.accountId)\n\t\t},\n\t\tactiveMailbox() {\n\t\t\treturn this.$store.getters.getMailbox(this.$route.params.mailboxId)\n\t\t},\n\t\tmenu() {\n\t\t\treturn this.buildMenu()\n\t\t},\n\t\tisThreadShown() {\n\t\t\treturn this.$route.params.threadId\n\t\t},\n\t},\n\tcreated() {\n\t\tconst accounts = this.$store.getters.accounts\n\n\t\tif (this.$route.name === 'home' && accounts.length > 1) {\n\t\t\t// Show first account\n\t\t\tconst firstAccount = accounts[0]\n\t\t\t// FIXME: this assumes that there's at least one mailbox\n\t\t\tconst firstMailbox = this.$store.getters.getMailboxes(firstAccount.id)[0]\n\n\t\t\tconsole.debug('loading first mailbox of first account', firstAccount.id, firstMailbox.databaseId)\n\n\t\t\tthis.$router.replace({\n\t\t\t\tname: 'mailbox',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: firstMailbox.databaseId,\n\t\t\t\t},\n\t\t\t})\n\t\t} else if (this.$route.name === 'home' && accounts.length === 1) {\n\t\t\tlogger.debug('the only account we have is the unified one -> show the setup page')\n\t\t\tthis.$router.replace({\n\t\t\t\tname: 'setup',\n\t\t\t})\n\t\t} else if (this.$route.name === 'mailto') {\n\t\t\tif (accounts.length === 0) {\n\t\t\t\tconsole.error('cannot handle mailto:, no accounts configured')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// Show first account\n\t\t\tconst firstAccount = accounts[0]\n\t\t\t// FIXME: this assumes that there's at least one mailbox\n\t\t\tconst firstMailbox = this.$store.getters.getMailboxes(firstAccount.id)[0]\n\n\t\t\tconsole.debug('loading composer with first account and mailbox', firstAccount.id, firstMailbox.id)\n\n\t\t\tthis.$router.replace({\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: firstMailbox.databaseId,\n\t\t\t\t\tthreadId: 'new',\n\t\t\t\t},\n\t\t\t\tquery: {\n\t\t\t\t\tto: this.$route.query.to,\n\t\t\t\t\tcc: this.$route.query.cc,\n\t\t\t\t\tbcc: this.$route.query.bcc,\n\t\t\t\t\tsubject: this.$route.query.subject,\n\t\t\t\t\tbody: this.$route.query.body,\n\t\t\t\t},\n\t\t\t})\n\t\t}\n\t},\n\tmethods: {\n\t\tonNewMessage() {\n\t\t\t// FIXME: assumes that we're on the 'message' route already\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\tthreadId: 'new',\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\thideMessage() {\n\t\t\tthis.$router.replace({\n\t\t\t\tname: 'mailbox',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\tfilter: this.$route.params?.filter,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t},\n}\n\n</script>\n\n<style lang=\"scss\" scoped>\n::v-deep .app-content #app-content-wrapper .app-content-details {\n\tmargin: 0 auto;\n\tmax-width: 900px;\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex: 1 1 100%;\n\tmin-width: 0;\n}\n</style>\n","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=7d3f4b94&lang=scss&scoped=true&\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=7d3f4b94&scoped=true&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&id=7d3f4b94&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7d3f4b94\",\n  null\n  \n)\n\nexport default component.exports","/**\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport memoize from 'lodash/fp/memoize'\nimport Axios from '@nextcloud/axios'\nimport { generateUrl } from '@nextcloud/router'\n\nexport const fetchAvatarUrl = (email) => {\n\tif (email === null) {\n\t\treturn Promise.resolve(undefined)\n\t}\n\n\tconst url = generateUrl('/apps/mail/api/avatars/url/{email}', {\n\t\temail,\n\t})\n\n\treturn Axios.get(url)\n\t\t.then((resp) => resp.data)\n\t\t.then((avatar) => {\n\t\t\tif (avatar.isExternal) {\n\t\t\t\treturn generateUrl('/apps/mail/api/avatars/image/{email}', {\n\t\t\t\t\temail,\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\treturn avatar.url\n\t\t\t}\n\t\t})\n\t\t.catch((err) => {\n\t\t\tif (err.response.status === 404) {\n\t\t\t\treturn undefined\n\t\t\t}\n\n\t\t\treturn Promise.reject(err)\n\t\t})\n}\n\nexport const fetchAvatarUrlMemoized = memoize(fetchAvatarUrl)\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.loading || !_vm.hasAvatar)?_c('BaseAvatar',{attrs:{\"display-name\":_vm.displayName,\"size\":_vm.size,\"disable-tooltip\":_vm.disableTooltip}}):_c('BaseAvatar',{attrs:{\"display-name\":_vm.displayName,\"url\":_vm.avatarUrl,\"size\":_vm.size,\"disable-tooltip\":_vm.disableTooltip}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Avatar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Avatar.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<BaseAvatar v-if=\"loading || !hasAvatar\"\n\t\t:display-name=\"displayName\"\n\t\t:size=\"size\"\n\t\t:disable-tooltip=\"disableTooltip\" />\n\t<BaseAvatar v-else\n\t\t:display-name=\"displayName\"\n\t\t:url=\"avatarUrl\"\n\t\t:size=\"size\"\n\t\t:disable-tooltip=\"disableTooltip\" />\n</template>\n\n<script>\nimport BaseAvatar from '@nextcloud/vue/dist/Components/Avatar'\n\nimport { fetchAvatarUrlMemoized } from '../service/AvatarService'\n\nexport default {\n\tname: 'Avatar',\n\tcomponents: {\n\t\tBaseAvatar,\n\t},\n\tprops: {\n\t\tdisplayName: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\temail: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdisableTooltip: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tsize: {\n\t\t\ttype: Number,\n\t\t\tdefault: 40,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading: true,\n\t\t\tavatarUrl: undefined,\n\t\t}\n\t},\n\tcomputed: {\n\t\thasAvatar() {\n\t\t\treturn this.avatarUrl !== undefined\n\t\t},\n\t},\n\tmounted() {\n\t\tfetchAvatarUrlMemoized(this.email).then((url) => {\n\t\t\tthis.avatarUrl = url\n\t\t\tthis.loading = false\n\t\t})\n\t},\n}\n</script>\n","import { render, staticRenderFns } from \"./Avatar.vue?vue&type=template&id=4d0598ca&\"\nimport script from \"./Avatar.vue?vue&type=script&lang=js&\"\nexport * from \"./Avatar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M2 13h7.8a1.4 1.4 0 001.1-.6L14 8l-3.1-4.4A1.4 1.4 0 009.8 3H2l3.4 5z\\\" stroke=\\\"#000\\\" stroke-width=\\\"2\\\"></path></svg>\""],"sourceRoot":""}